 

# ä¸€ã€æ¦‚è¿°

## 1.1 è®¡ç®—æœºç½‘ç»œåœ¨ä¿¡æ¯æ—¶ä»£çš„ä½œç”¨



## 1.2 å› ç‰¹ç½‘æ¦‚è¿°

### 1.2.1 ğŸŒŸç½‘ç»œã€äº’è”ç½‘å’Œå› ç‰¹ç½‘

- ç½‘ç»œï¼ˆnetworkï¼‰æ˜¯ç”±è‹¥å¹²èŠ‚ç‚¹(node)å’Œè¿æ¥è¿™äº›èŠ‚ç‚¹çš„é“¾è·¯ï¼ˆlinkï¼‰ç»„æˆ

- å¤šä¸ªç½‘ç»œå¯ä»¥ç”±è·¯ç”±å™¨é“¾æ¥ï¼Œå½¢æˆæ›´å¤§çš„ç½‘ç»œâ€”â€”äº’è”ç½‘
	**networks of networks**

- Internet æ˜¯ä¸–ç•Œä¸Šåšå¤§çš„äº’è¿ç½‘ç»œ
	>internet é€šç”¨åè¯ï¼Œæ³›æŒ‡ç”±å¤šä¸ªè®¡ç®—æœºç½‘ç»œè¿æ¥è€Œæˆçš„ç½‘ç»œï¼Œç½‘ç»œä¹‹é—´çš„é€šä¿¡åè®®å¯ä»¥æ˜¯ä»»æ„çš„
	>
	>Internet ä¸“æœ‰åè¯ é‡‡ç”¨TCP/IPåè®®æ— 

### 1.2.2 äº’è”ç½‘å‘å±•çš„ä¸‰ä¸ªé˜¶æ®µ

- **ä»å•ä¸ªç½‘ç»œARPANETå‘äº’è”ç½‘å‘å±•**
	1969 ç¬¬ä¸€ä¸ªåˆ†ç»„äº¤æ¢ç½‘ ARPANET
	70å¹´ä»£ä¸­æœŸ ç ”ç©¶å¤šç§ç½‘ç»œä¹‹é—´çš„äº’è¿
	1983 **TCP/IPåè®®**æˆä¸ºARPANETçš„æ ‡å‡†åè®®ï¼ˆäº’è”ç½‘è¯ç”Ÿçš„æ—¶é—´ï¼‰
	
- **é€æ­¥å»ºæˆä¸‰çº§ç»“æ„çš„å› ç‰¹ç½‘**

	1985 NSFNET

- **é€æ­¥å½¢æˆå¤šå±‚æ¬¡ISPç»“æ„çš„å› ç‰¹ç½‘**
	1994 www



ISPï¼ˆInternet Service Providerï¼‰

åŸºäºISPçš„ä¸‰å±‚ç»“æ„çš„å› ç‰¹ç½‘





### 1.2.3 å› ç‰¹ç½‘çš„æ ‡å‡†åŒ–å·¥ä½œ



### 1.2.4 å› ç‰¹ç½‘çš„ç»„æˆ

å·¥ä½œæ–¹å¼åˆ†ï¼š

- è¾¹ç¼˜éƒ¨åˆ†edge
	æœ‰æ‰€æœ‰è¿æ¥åœ¨å› ç‰¹ç½‘ä¸Šçš„**ä¸»æœº**ç»„æˆï¼Œè¿™éƒ¨åˆ†æ˜¯**ç”¨æˆ·ç›´æ¥ä½¿ç”¨**çš„ï¼Œç”¨æ¥è¿›è¡Œ**é€šä¿¡ï¼ˆä¼ é€æ•°æ®è§†é¢‘æˆ–éŸ³é¢‘ï¼‰**å’Œ**èµ„æºå…±äº«**
- æ ¸å¿ƒéƒ¨åˆ†core
	ç”±**å¤§é‡ç½‘ç»œ**å’Œè¿æ¥è¿™äº›ç½‘ç»œçš„**è·¯ç”±å™¨**ç»„æˆï¼Œè¿™éƒ¨åˆ†æ˜¯**ä¸ºè¾¹ç¼˜éƒ¨åˆ†æä¾›æœåŠ¡**çš„ï¼ˆæä¾›è¿é€šæ€§å’Œäº¤æ¢ï¼‰

é€»è¾‘ç»“æ„åˆ†ï¼š

- resource subnet ï¼što be responsible for the entire network data processing, that is, to the network users with a variety of network resources and network services, mainly including the Host and the terminal
- communication subnet: consist of communication control processor, communication lines, and other communications equipment, its task is network data transmission



edge part:

- target : Transfer data between the end systems (Hosts)

- research questions and applications:
	- TCP services (TCP transmission control protocol) ä¼ è¾“æ§åˆ¶åè®®
		 Reliable data transmission, flow control,congestion control (HTTP, FTP, Telnet, SMTP)
	- UDP services  (UDP user data packet protocol) ç”¨æˆ·æ•°æ®æŠ¥åè®®
		Unreliable data transmission, no flow control,no congestion control (DNS, Streaming media, IP phone)



core part:

- basic questions: How data transmitted through the router connected network.
- two solutions:
	- circuit switching
	- packet switching

## 1.3 ä¸‰ç§äº¤æ¢æ–¹å¼

The switching is to dynamically allocate resources for transmission lines in a way  

### 1.3.1 ç”µè·¯äº¤æ¢ï¼ˆcircuit switchingï¼‰

- ç”µè¯äº¤æ¢æœºæ¥é€šç”µè¯çº¿çš„æ–¹å¼ç§°ä¸ºç”µè·¯äº¤æ¢
- ä»é€šä¿¡èµ„æºçš„åˆ†é…è§’åº¦æ¥çœ‹ï¼Œswitchingå°±æ˜¯æŒ‰ç…§é­”ç§æ–¹å¼åŠ¨æ€åœ°åˆ†é…ä¼ è¾“çº¿è·¯çš„èµ„æº
- ä¸‰ä¸ªæ­¥éª¤ï¼š
	- establish connectionå»ºç«‹è¿æ¥ï¼ˆåˆ†é…é€šä¿¡èµ„æºï¼‰
	- communicationé€šè¯ï¼ˆä¸€ç›´å ç”¨é€šä¿¡èµ„æºï¼‰
	- release connectioné‡Šæ”¾è¿æ¥ï¼ˆå½’è¿˜é€šä¿¡èµ„æºï¼‰

### 1.3.2 ğŸŒŸåˆ†ç»„äº¤æ¢ï¼ˆpacket switchingï¼‰

packet = header + data segment

**å‘é€æ–¹**ï¼šæ„é€ åˆ†ç»„ï¼Œå‘é€åˆ†ç»„ the long message is divided into short,fixed-length data segment then add the headers in order to form packets 

**è·¯ç”±å™¨**ï¼šç¼“å­˜åˆ†ç»„ï¼Œè½¬å‘åˆ†ç»„

**æ¥æ”¶æ–¹**ï¼šæ¥å—åˆ†ç»„ï¼Œè¿˜åŸæŠ¥æ–‡

### 1.3.3 æŠ¥æ–‡äº¤æ¢

ç•¥

### 1.3.4 ä¸‰è€…å¯¹æ¯”

|      | ç”µè·¯äº¤æ¢                                                     | åˆ†ç»„äº¤æ¢                                                     | æŠ¥æ–‡äº¤æ¢                                                     |
| ---- | ------------------------------------------------------------ | ------------------------------------------------------------ | ------------------------------------------------------------ |
| ä¼˜ç‚¹ | é€šä¿¡æ—¶å»¶å°<br />æœ‰åºä¼ è¾“<br />æ²¡æœ‰å†²çª<br />é€‚ç”¨èŒƒå›´å¹¿<br />å®æ—¶æ€§å¼º<br />æ§åˆ¶ç®€å• | æ— éœ€å»ºç«‹è¿æ¥<br />çº¿è·¯åˆ©ç”¨ç‡é«˜(channel utilization â¬†ï¸)<br />ç®€åŒ–äº†å­˜å‚¨ç®¡ç†<br />åŠ é€Ÿä¼ è¾“<br />å‡å°‘å‡ºé”™æ¦‚ç‡å’Œé‡å‘æ•°æ®é‡ | æ— éœ€å»ºç«‹è¿æ¥<br />åŠ¨æ€åˆ†é…çº¿è·¯<br />æé«˜çº¿è·¯å¯é æ€§<br />æé«˜çº¿è·¯åˆ©ç”¨ç‡<br />æä¾›å¤šç›®æ ‡æœåŠ¡ |
| ç¼ºç‚¹ | å»ºç«‹è¿æ¥æ—¶é—´é•¿çº¿è·¯ç‹¬å <br />ä½¿ç”¨æ•ˆç‡ä½<br />çµæ´»æ€§å·®<br />éš¾ä»¥è§„æ ¼åŒ– | å¼•èµ·äº†è½¬å‘æ—¶å»¶<br />éœ€è¦ä¼ è¾“é¢å¤–çš„æ•°æ®é‡<br />ä¸€äº›å…¶ä»–çš„é—®é¢˜ | å¼•èµ·äº†è½¬å‘æ—¶å»¶<br />éœ€è¦è¾ƒå¤§å­˜å‚¨ç©ºé—´<br />éœ€è¦ä¼ è¾“é¢å¤–çš„ä¿¡æ¯é‡ |



## 1.4 è®¡ç®—æœºç½‘ç»œçš„å®šä¹‰å’Œåˆ†ç±»

### 1.4.1 å®šä¹‰

- ç²¾ç¡®å®šä¹‰æœªç»Ÿä¸€
- æ—©æœŸå®šä¹‰ï¼š**ä¸€äº›äº’ç›¸è¿æ¥çš„ã€è‡ªæ²»çš„è®¡ç®—æœºçš„é›†åˆ**
	- äº’è¿ï¼šæ˜¯æŒ‡è®¡ç®—æœºä¹‹é—´å¯ä»¥é€šè¿‡æœ‰çº¿æˆ–è€…æ— çº¿çš„æ–¹å¼è¿›è¡Œæ•°æ®é€šä¿¡
	- è‡ªæ²»ï¼šç‹¬ç«‹çš„è®¡ç®—æœºï¼Œæœ‰è‡ªå·±çš„ç¡¬ä»¶å’Œè½¯ä»¶ï¼Œå¯ä»¥å•ç‹¬è¿è¡Œä½¿ç”¨
	- é›†åˆï¼šè‡³å°‘ä¸¤å°è®¡ç®—æœº
- è¾ƒå¥½çš„å®šä¹‰ï¼š**è®¡ç®—æœºç½‘ç»œä¸»è¦æ˜¯ä¸€äº›é€šç”¨çš„ã€å¯ç¼–ç¨‹çš„ç¡¬ä»¶äº’è”è€Œæˆçš„ï¼Œè¿™äº›ç¡¬ä»¶å¹¶éä¸“é—¨ç”¨æ¥å®ç°æŸä¸€ç‰¹å®šç›®çš„ï¼ˆä¾‹å¦‚ä¼ è¾“æ•°æ®ï¼‰ã€‚è¿™äº›å¯ç¼–ç¨‹çš„ç¡¬ä»¶èƒ½å¤Ÿç”¨æ¥ä¼ é€ä¸åŒç±»å‹çš„æ•°æ®ï¼Œå¹¶èƒ½æ”¯æŒå¹¿æ³›çš„å’Œæ—¥ç›Šå¢é•¿çš„åº”ç”¨**
- Definition 1 - Computer network is the information system that uses the communication lines (networking equipment) to connect the geographically dispersed computer systems and realizes the information resources sharing according to some protocol for data communication
- Definition 2 â€“ is an interconnection of computers and computing equipment using either wires or radio waves and can share data and computing resources
  - ç¡¬ä»¶ä¸å±€é™äºè®¡ç®—æœºï¼ŒåŒ…æ‹¬æ‰‹æœº
  - å¹¶éä¸“é—¨ç”¨æ¥ä¼ é€æ•°æ®ï¼Œè€Œæ˜¯æ”¯æŒå¤šç§åº”ç”¨

### 1.4.2 åˆ†ç±»

æŒ‰ç…§äº¤æ¢æŠ€æœ¯åˆ†ï¼š

- ç”µè·¯äº¤æ¢ç½‘ç»œ

- æŠ¥æ–‡äº¤æ¢ç½‘ç»œ

- åˆ†ç»„äº¤æ¢ç½‘ç»œ

æŒ‰ç…§ä½¿ç”¨è€…åˆ†ç±»ï¼š

- å…¬ç”¨ç½‘
- ä¸“ç”¨ç½‘

æŒ‰ä¼ è¾“ä»‹è´¨åˆ†ç±»ï¼š

- æœ‰çº¿ç½‘
- æ— çº¿ç½‘

æŒ‰ç…§è¦†ç›–èŒƒå›´åˆ†ç±»ï¼š

- Internet (world largest WAN)( 10000km)

- å¹¿åŸŸç½‘ï¼šWAN (wide area network)( 100-1000km)
- åŸåŸŸç½‘ï¼šMAN (metropolitan area network)(10km)
- å±€åŸŸç½‘ï¼šLAN (local area network )ï¼ˆæŸä¸ªå•ä½ï¼Œæ¯”å¦‚æ ¡å›­ç½‘ï¼Œä¼ä¸šç½‘,10-1000mï¼‰
- ä¸ªåŸŸç½‘ï¼šPAN ï¼ˆpersonal area networkï¼‰ï¼ˆèŒƒå›´1må·¦å³,æ¯”å¦‚è“ç‰™ï¼‰

æŒ‰æ‹“æ‰‘ç»“æ„åˆ†ç±»ï¼š

- busæ€»çº¿å‹ç½‘ç»œï¼ˆä¸€æ¡çº¿ç©¿èµ·å…¨éƒ¨è®¾å¤‡ï¼‰
- staræ˜Ÿå‹ç½‘ç»œï¼ˆè®¡ç®—æœºè¿æ¥åˆ°ä¸­å¤®è®¾å¤‡æ¯”å¦‚äº¤æ¢æœºï¼‰
- ringç¯å‹ç½‘ç»œï¼ˆæ‰€æœ‰è®¡ç®—æœºè¿æ¥æˆä¸€ä¸ªç¯ï¼‰
- ç½‘çŠ¶å‹ç½‘ç»œ



by information exchange objects:

- Internet - is the world's only international interconnection network based on TCP / IP, the national and regional public data network. 
- Intranet - The protocol set as the basis of enterprises, enterprise dedicated network .It is through the TCP/IP
	(Firewall) to implement the separation and through the proxy server (Server Proxy), encryption and other measures to ensure the internal information communication and access security. In this sense, Intranet is a kind of application of Internet technology in special network.
- Extranet - is to expand the scope of the Intranet's connectivity to the outside of the company's business contacts with partners, suppliers, customers, and consultants.



## 1.5 è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½æŒ‡æ ‡

æ€§èƒ½æŒ‡æ ‡ç”¨äºåº¦é‡è®¡ç®—æœºç½‘ç»œçš„æ€§èƒ½

å¸¸ç”¨æŒ‡æ ‡ï¼š

1. é€Ÿç‡
2. å¸¦å®½
3. ååé‡
4. æ—¶å»¶
5. æ—¶å»¶å¸¦å®½ç§¯
6. å¾€è¿”æ—¶é—´
7. åˆ©ç”¨ç‡
8. ä¸¢åŒ…ç‡

### 1.5.1 é€Ÿç‡ Bit rate

æ¯”ç‰¹ï¼š

- è®¡ç®—æœºä¸­æ•°æ®é‡çš„å•ä½ï¼Œä¸€ä¸ªbitå°±æ˜¯äºŒè¿›åˆ¶æ•°å­—ä¸­çš„ä¸€ä¸ª1æˆ–0

- 8 bit = 1 Byte

- KB = 2^10 B

- MB = 2^10 KB = 2^20 B

- GB = 2^10 MB = 2^30 B

- TB = 2^10 GB = 2^40 B
	>ä¹°çš„å›ºæ€ç¡¬ç›˜ä¸ºä½•å‚å®¶æ ‡æ³¨çš„ä¸å®é™…å®¹é‡ä¸ä¸€æ ·ï¼Ÿ
	>å‚å®¶é‡‡ç”¨ 1000 å€ ï¼Œè€Œè®¡ç®—æœºå®é™…æ˜¯ 1024 å€

	

é€Ÿç‡ï¼š

è¿æ¥åœ¨è®¡ç®—æœºç½‘ç»œä¸Šçš„ä¸»æœºåœ¨æ•°å­—é€šé“ä¸Šä¼ é€æ¯”ç‰¹çš„é€Ÿç‡ï¼Œåˆç§°**æ¯”ç‰¹ç‡**æˆ–**æ•°æ®ç‡**

å¸¸ç”¨å•ä½ï¼š

- bit/s(b/s,bps)
- kb/s = 10^3 b/s(bps)
- Mb/s = 10^6 b/s 
- Gb/s = 10^9 bps

>æ³¨æ„äºŒè€…è¿›åˆ¶ä¸åŒ



### 1.5.2 å¸¦å®½ Bandwidth

åœ¨æ¨¡æ‹Ÿä¿¡å·ç³»ç»Ÿä¸­çš„æ„ä¹‰ï¼š

- ä¿¡å·æ‰€åŒ…å«çš„å„ç§ä¸åŒé¢‘ç‡æˆåˆ†æ‰€å æ®çš„é¢‘ç‡èŒƒå›´
- å•ä½ Hz(kHz,MHz,GHz)



åœ¨è®¡ç®—æœºç½‘ç»œä¸­çš„æ„ä¹‰ï¼š

- ç”¨æ¥è¡¨ç¤ºç½‘ç»œçš„é€šä¿¡çº¿è·¯æ‰€èƒ½ä¼ é€æ•°æ®çš„èƒ½åŠ›ï¼Œå¸¦å®½æŒ‡çš„æ˜¯ç½‘ç»œé“¾è·¯åœ¨å•ä½æ—¶é—´é‡Œæ‰€èƒ½ä¼ è¾“çš„æœ€å¤§çš„æ•°æ®é‡
- å•ä½ bps



### 1.5.3 ååé‡Throughput

- è¡¨ç¤ºå•ä½æ—¶é—´é€šè¿‡æŸä¸ªç½‘ç»œï¼ˆæˆ–ä¿¡é“ã€æ¥å£ï¼‰çš„æ•°æ®é‡
- ç»å¸¸ç”¨äºå¯¹ç°å®ä¸­çš„ç½‘ç»œçš„ä¸€ç§æµ‹é‡ï¼Œä»¥ä¾¿äºçŸ¥é“åˆ°åº•å¤šå°‘æ•°æ®é‡èƒ½å¤Ÿé€šè¿‡ç½‘ç»œ
- ååé‡å—**ç½‘ç»œçš„å¸¦å®½å’Œé¢å®šé€Ÿç‡**çš„é™åˆ¶



### 1.5.4 ğŸŒŸæ—¶å»¶Delay

- **å‘é€æ—¶å»¶**
	åˆ†ç»„é•¿åº¦(b)/å‘é€é€Ÿç‡(bps)
	ç®€åŒ–æ¨¡å‹ä¸­ï¼Œå¸¸å¸¸ç”¨å¸¦å®½è¡¨ç¤ºå‘é€é€Ÿç‡
	
	>å‘é€é€Ÿç‡ï¼š
	>ç½‘å¡çš„å‘é€é€Ÿç‡ï¼Œä¿¡é“å¸¦å®½ï¼Œæ¥å£é€Ÿç‡ä¸‰è€…æœ€å°å€¼ï¼Œå°½é‡åŒ¹é…ä¸‰è€…
	
- **ä¼ æ’­æ—¶å»¶propagation delay**
	ä¿¡é“é•¿åº¦(m)/ç”µç£æ³¢ä¼ æ’­é€Ÿç‡(m/s)

	>è‡ªç”±ç©ºé—´ï¼š3*10^8 m/s
	>
	>é“œçº¿ï¼š2.3*10^8 m/s
	>
	>å…‰çº¤ï¼š2*10^8 m/s

- **å¤„ç†æ—¶å»¶**
	ä¸€èˆ¬ä¸ä¾¿äºè®¡ç®—



å¦ä¸€ç§åˆ†ç±»ï¼š

1. processing delay 
	- check bit error
	- decide output link
2. queuing delay
	- waiting for output link to transmit
	- depending on the level of congestion in router
3. sending delay
	- frame length/sending rate
4. propagation delay
	- channel length/ speed(ä¸€èˆ¬å–2*10^8 m/s)

### 1.5.5 æ—¶å»¶å¸¦å®½ç§¯time delay bandwidth product

ä¼ æ’­æ—¶å»¶  * å¸¦å®½

BDPæ˜¯æŒ‡ä¸€ä¸ªæ•°æ®åŒ…ä»å‘é€ç«¯å‡ºå‘åˆ°æ¥æ”¶ç«¯è¿™æ®µæ—¶é—´å†…ï¼Œé“¾è·¯ä¸Šæœ€å¤šèƒ½åœ¨é€”çš„æ•°æ®é‡



### 1.5.6 å¾€è¿”æ—¶é—´RTT

RTTï¼ˆround-trip-timeï¼‰ä¸€ä¸ªæ•°æ®åŒ…ä»å‘é€æ–¹å‡ºå‘ï¼Œåˆ°è¾¾æ¥å—æ–¹å¹¶æ”¶åˆ°åº”ç­”ï¼Œæ€»å…±èŠ±è´¹çš„æ—¶é—´ï¼ŒåŒ…æ‹¬ï¼š

- å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„ä¼ æ’­æ—¶å»¶
- æ¥æ”¶æ–¹å›åˆ°å‘é€æ–¹çš„ç›¸åº”æ—¶å»¶



### 1.5.7 ğŸŒŸåˆ©ç”¨ç‡Utilization rate

ä¿¡é“åˆ©ç”¨ç‡channel utilization rateï¼šè¡¨ç¤ºä¿¡é“æœ‰ç™¾åˆ†ä¹‹å‡ çš„æ—¶é—´æ˜¯è¢«åˆ©ç”¨çš„ 

ç½‘ç»œåˆ©ç”¨ç‡network utilization rateï¼šå…¨ç½‘ç»œçš„ä¿¡é“åˆ©ç”¨ç‡çš„åŠ æƒå¹³å‡

- ä¿¡é“çš„åˆ©ç”¨ç‡å¢åŠ æ—¶ï¼Œè¯¥ä¿¡é“å¼•èµ·çš„æ—¶å»¶ä¹Ÿä¼šè¿…é€Ÿå¢åŠ ï¼Œæ‰€ä»¥**ä¿¡é“åˆ©ç”¨ç‡å¹¶éè¶Šé«˜è¶Šå¥½**

- D = D~0~/1-U
	D:ç½‘ç»œå½“å‰æ—¶å»¶
	D~0~:ç½‘ç»œç©ºé—²æ—¶çš„æ—¶å»¶
	U:åˆ©ç”¨ç‡

	>Uè¾¾åˆ°50%ï¼Œæ—¶å»¶åŠ å€ï¼Œå°½é‡ä¸è¶…è¿‡è¿™ä¸ªç¨‹åº¦

### 1.5.8 ä¸¢åŒ…ç‡

- å°±æ˜¯åˆ†ç»„ä¸¢åŒ…ç‡ï¼Œæ˜¯æŒ‡åœ¨ä¸€å®šçš„æ—¶é—´èŒƒå›´å†…ï¼Œä¼ è¾“è¿‡ç¨‹ä¸­å› å„ç§åŸå› å¯¼è‡´çš„ ä¸¢å¤±çš„æ•°æ®åŒ…çš„æ¯”ç‡
- åˆ†ä¸ºï¼š
	- æ¥å£ä¸¢åŒ…ç‡
	- é“¾è·¯ä¸¢åŒ…ç‡
	- è·¯å¾„ä¸¢åŒ…ç‡
	- â€¦â€¦
- ä¸»è¦æœ‰ä¸¤ç§æƒ…å†µï¼š
	- ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œè¢«èŠ‚ç‚¹ä¸¢å¼ƒ
	- åˆ°è¾¾ä¸€å°é˜Ÿåˆ—å·²æ»¡çš„åˆ†ç»„äº¤æ¢æœºè¢«ä¸¢å¼ƒï¼Œé€šä¿¡é‡è¾ƒå¤§æ—¶å‡ºç°**ç½‘ç»œæ‹¥å¡**
	- å› æ­¤ä¸¢åŒ…ç‡å¯ä»¥ååº”ç½‘ç»œçš„æ‹¥å¡æƒ…å†µ
		è½»åº¦1~4%



## 1.6 ğŸŒŸè®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„

### 1.6.1 å¸¸è§çš„è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„

#### ğŸŒŸOSIä½“ç³»ç»“æ„

>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼š
>
>7.åº”ç”¨å±‚        è§£å†³é€šè¿‡åº”ç”¨è¿›ç¨‹ä¹‹é—´çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œåº”ç”¨çš„é—®é¢˜
>
>6.è¡¨ç¤ºå±‚       è§£å†³é€šä¿¡åŒæ–¹äº¤æ¢ä¿¡æ¯çš„è¡¨ç¤ºé—®é¢˜ï¼ˆåŒ…æ‹¬æ•°æ®å­—ç¬¦é›†çš„è½¬æ¢ã€æ•°æ®æ ¼å¼åŒ–ã€æ–‡æœ¬å‹ç¼©ã€æ•°æ®åŠ å¯†                  è§£å¯†ç­‰ï¼‰
>
>5.ä¼šè¯å±‚       è¿›ç¨‹ä¹‹é—´å›è¯é—®é¢˜
>
>4.è¿è¾“å±‚       æä¾›ç«¯åˆ°ç«¯çš„æœåŠ¡
>
>3.ç½‘ç»œå±‚       è§£å†³åˆ†ç»„åœ¨å¤šä¸ªç½‘ç»œä¹‹é—´ä¼ è¾“ï¼ˆè·¯ç”±ï¼‰çš„é—®é¢˜
>
>2.æ•°æ®é“¾è·¯å±‚  è§£å†³åˆ†ç»„åœ¨ä¸€ä¸ªé“¾è·¯ä¸Šä¼ è¾“çš„é—®é¢˜
>
>1.ç‰©ç†å±‚         è§£å†³å„ç§ä¿¡å·æ¥ä¼ è¾“æ¯”ç‰¹0 1 çš„é—®é¢˜

**äº‹å®ä¸Šçš„å›½é™…æ ‡å‡†**

#### TCP/IPä½“ç³»ç»“æ„ï¼ˆå»æ‰ä¸Šé¢ä¼šè¯å±‚å’Œè¡¨ç¤ºå±‚ï¼‰

>ä»ä¸Šåˆ°ä¸‹ä¾æ¬¡æ˜¯ï¼š
>
>4.åº”ç”¨å±‚       **HTTP â€¦SMTP DNSâ€¦RTP**
>
>3.è¿è¾“å±‚       **TCP UDPåè®®**
>
>2.ç½‘é™…å±‚      **æ ¸å¿ƒåè®®IPåè®®**  æä¾›æ— è¿æ¥ä¸å¯é çš„æ•°æ®æŠ¥æœåŠ¡
>
>1.ç½‘ç»œæ¥å£å±‚ï¼ˆåŒ…å«ä¸Šé¢1-3ï¼‰



#### åŸç†ä½“ç³»ç»“æ„ï¼š

>5.åº”ç”¨å±‚
>
>4.è¿è¾“å±‚
>
>3.ç½‘ç»œå±‚
>
>2.æ•°æ®é“¾è·¯å±‚
>
>1.ç‰©ç†å±‚



### 1.6.2 è®¡ç®—æœºç½‘ç»œç»“æ„åˆ†å±‚çš„å¿…è¦æ€§

ç‰©ç†å±‚è€ƒè™‘é—®é¢˜ï¼š

- é‡‡ç”¨æ€æ ·çš„ä¼ è¾“åª’ä½“ï¼ˆä»‹è´¨ï¼‰
- ä½¿ç”¨æ€æ ·çš„ä¿¡å·è¡¨ç¤ºæ¯”ç‰¹0å’Œ1
- é‡‡ç”¨æ€æ ·çš„ç‰©ç†æ¥å£



æ•°æ®é“¾è·¯å±‚è€ƒè™‘é—®é¢˜ï¼š

- å¦‚ä½•æ ‡è¯†ç½‘ç»œä¸­çš„å„ä¸ªä¸»æœºï¼ˆä¸»æœºç¼–å€é—®é¢˜ï¼Œæ¯”å¦‚MACåœ°å€ï¼‰
- å¦‚ä½•ä»ä¿¡å·æ‰€è¡¨ç¤ºçš„ä¸€è¿ä¸²æ¯”ç‰¹æµä¸­åŒºåˆ†å‡ºåœ°å€å’Œæ•°æ®ï¼ˆåˆ†ç»„çš„å°è£…æ ¼å¼é—®é¢˜ï¼‰
- åè°ƒå„ä¸»æœºäº‰ç”¨æ€»çº¿



ç½‘ç»œå±‚è€ƒè™‘é—®é¢˜ï¼š

- å¦‚ä½•æ ‡è¯†å„ç½‘ç»œä»¥åŠç½‘ç»œä¸­çš„å„ä¸»æœºï¼ˆç½‘ç»œå’Œä¸»æœºå…±åŒç¼–å€çš„é—®é¢˜ï¼Œä¾‹å¦‚IPåœ°å€ï¼‰
- è·¯ç”±å™¨å¦‚ä½•è½¬å‘åˆ†ç»„ï¼Œå¦‚ä½•è¿›è¡Œè·¯ç”±é€‰æ‹©



è¿è¾“å±‚è€ƒè™‘é—®é¢˜ï¼š

- å¦‚ä½•è§£å†³è¿›ç¨‹ä¹‹é—´åŸºäºç½‘ç»œçš„é€šä¿¡é—®é¢˜
- å‡ºç°ä¼ è¾“é”™è¯¯ï¼Œå¦‚ä½•è§£å†³



é€šè¿‡åº”ç”¨è¿›ç¨‹é—´çš„äº¤äº’æ¥å®Œæˆç‰¹å®šçš„ç½‘ç»œåº”ç”¨

![](../images/è®¡ç½‘å›¾1.png)



### 1.6.3 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„åˆ†å±‚æ€æƒ³ä¸¾ä¾‹







### 1.6.4 è®¡ç®—æœºç½‘ç»œä½“ç³»ç»“æ„ä¸­çš„ä¸€äº›æœ¯è¯­

#### å®ä½“

ä»»ä½•å¯å‘é€æˆ–æ¥å—ä¿¡æ¯çš„**ç¡¬ä»¶**æˆ–**è½¯ä»¶è¿›ç¨‹**

#### å¯¹ç­‰å®ä½“

æ”¶å‘åŒæ–¹**ç›¸åŒå±‚æ¬¡çš„å®ä½“**



#### åè®®

æ§åˆ¶ä¸¤ä¸ªå¯¹ç­‰å®ä½“è¿›è¡Œé€»è¾‘é€šä¿¡ï¼ˆå‡è®¾ï¼‰çš„è§„åˆ™çš„é›†åˆ

åè®®çš„ä¸‰è¦ç´ ï¼š

- è¯­æ³•
	>å®šä¹‰æ‰€äº¤æ¢çš„ä¿¡æ¯çš„æ ¼å¼(å“ªäº›å­—æ®µä½•ç§é¡ºåº)

- è¯­ä¹‰
	>å®šä¹‰åŒæ–¹æ‰€è¦å®Œæˆçš„æ“ä½œ

- åŒæ­¥
	>å®šä¹‰æ”¶å‘åŒæ–¹çš„æ—¶åºå…³ç³»



#### æœåŠ¡

- åœ¨åè®®çš„æ§åˆ¶ä¸‹ï¼Œä¸¤ä¸ªå¯¹ç­‰å®ä½“é—´çš„é€»è¾‘é€šä¿¡ä½¿å¾—æœ¬å±‚èƒ½å¤Ÿå‘ä¸Šä¸€å±‚æä¾›æœåŠ¡

- è¦å®ç°æœ¬å±‚åè®®ï¼Œè¿˜è¦ä½¿ç”¨ä¸‹ä¸€å±‚çš„æœåŠ¡

- ï¼ˆæ¯ä¸€å±‚äº«å—ä¸‹ä¸€å±‚çš„æœåŠ¡ï¼Œéµå®ˆæœ¬å±‚åè®®ï¼Œå¹¶å‘ä¸Šä¸€å±‚æä¾›æœåŠ¡ï¼‰

- ä¹Ÿå°±æ˜¯è¯´ï¼Œåè®®æ˜¯â€œæ°´å¹³çš„â€ï¼ŒæœåŠ¡æ˜¯â€œå‚ç›´çš„â€
- å®ä½“çœ‹å¾—è§ç›¸é‚»ä¸‹å±‚æ‰€æä¾›çš„æœåŠ¡ï¼Œä½†å¹¶ä¸çŸ¥é“å®ç°è¯¥æœåŠ¡çš„å…·ä½“åè®®ï¼Œi.t.ä¸‹é¢çš„åè®®å¯¹ä¸Šé¢çš„å®ä½“æ˜¯â€œé€æ˜çš„â€



#### æœåŠ¡è®¿é—®ç‚¹

åœ¨åŒä¸€ç³»ç»Ÿä¸­ç›¸é‚»ä¸¤å±‚çš„å®ä½“äº¤æ¢ä¿¡æ¯çš„é€»è¾‘æ¥å£ï¼Œç”¨äºåŒºåˆ†ä¸åŒçš„æœåŠ¡ç±»å‹

- æ•°æ®é“¾è·¯å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºå¸§çš„â€œç±»å‹â€å­—æ®µ
- ç½‘ç»œå±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºIPæ•°æ®æŠ¥é¦–ä¸­çš„â€œåè®®å­—æ®µâ€
- è¿è¾“å±‚çš„æœåŠ¡è®¿é—®ç‚¹ä¸ºâ€œç«¯å£å·â€

 #### åè®®æ•°æ®å•å…ƒPDU

å¯¹ç­‰å±‚æ¬¡ä¹‹é—´ä¼ é€çš„æ•°æ®åŒ…æˆä¸ºè¯¥å±‚çš„åè®®æ•°æ®å•å…ƒ
>ç‰©ç†å±‚           æ¯”ç‰¹æµ
>
>æ•°æ®é“¾è·¯å±‚    å¸§frame
>
>ç½‘ç»œå±‚           åˆ†ç»„æˆ–IPæ•°æ®æŠ¥
>
>è¿è¾“å±‚           TCPæŠ¥æ–‡æ®µæˆ–UDPç”¨æˆ·æ•°æ®æŠ¥
>
>åº”ç”¨å±‚           æŠ¥æ–‡



#### æœåŠ¡æ•°æ®å•å…ƒSDU

åŒä¸€ç³»ç»Ÿå†…ï¼Œå±‚ä¸å±‚ä¹‹é—´äº¤æ¢çš„æ•°æ®åŒ…

å¤šä¸ªSDUå¯ä»¥åˆæˆä¸€ä¸ªPDUï¼Œä¸€ä¸ªPDUå¯ä»¥æ‹†æˆå‡ ä¸ªSDU



<img src="../images/è®¡ç½‘å›¾2_00.png" style="zoom:80%;" />

![](../images/è®¡ç½‘å›¾3.jpg)



---

# äºŒã€ç‰©ç†å±‚

## 2.1 ç‰©ç†å±‚çš„åŸºæœ¬æ¦‚å¿µ

è€ƒè™‘çš„æ˜¯å¦‚ä½•æ‰èƒ½åœ¨è¿æ¥å„ç§è®¡ç®—æœºçš„ä¼ è¾“åª’ä½“ä¸Šä¼ è¾“æ•°æ®æ¯”ç‰¹æµ

ä¼ è¾“åª’ä½“ï¼š

- å¯¼å¼•å‹ä¼ è¾“åª’ä½“
	- åŒç»çº¿
	- åŒè½´ç”µç¼†
- éå¯¼å¼•å‹ä¼ è¾“åª’ä½“
	- å¾®æ³¢é€šä¿¡ï¼ˆ2-40GHzï¼‰

ç‰©ç†å±‚åè®®çš„ä¸»è¦ä»»åŠ¡ï¼š

- æœºæ¢°ç‰¹æ€§

	> æŒ‡æ˜æ¥å£æ‰€ç”¨æ¥çº¿å™¨çš„==å½¢çŠ¶==å’Œ==å°ºå¯¸==ï¼Œ==å¼•è„šæ•°ç›®==å’Œ==æ’åˆ—==ã€å›ºå®šå’Œé”å®šè£…ç½®

- ç”µæ°”ç‰¹æ€§
	>æŒ‡æ˜åœ¨æ¥å£ç”µç¼†çš„å„æ¡çº¿ä¸Šå‡ºç°çš„==ç”µå‹çš„èŒƒå›´==

- åŠŸèƒ½ç‰¹æ€§
	>æŒ‡æ˜æŸæ¡çº¿ä¸Šå‡ºç°çš„æŸä¸€ç”µå¹³çš„==ç”µå‹æœ‰ä½•æ„ä¹‰==

- è¿‡ç¨‹ç‰¹æ€§
	>æŒ‡æ˜å¯¹äºä¸åŒåŠŸèƒ½çš„å„ç§==å¯èƒ½äº‹ä»¶çš„å‡ºç°é¡ºåº==

## 2.2 ç‰©ç†å±‚ä¸‹é¢çš„ä¼ è¾“åª’ä½“

### 2.2.1 å¯¼å¼•å‹ä¼ è¾“åª’ä½“

#### åŒè½´ç”µç¼†

>åŸºå¸¦åŒè½´ç”µç¼†ï¼ˆ50Î©ï¼‰æ•°å­—ä¼ è¾“ï¼Œè¿‡å»ç”¨äºå±€åŸŸç½‘
>
>å®½å¸¦åŒè½´ç”µç¼†ï¼ˆ75Î©ï¼‰æ¨¡æ‹Ÿä¼ è¾“ï¼Œç›®å‰ä¸»è¦ç”¨äºæœ‰çº¿ç”µè§†

#### ğŸŒŸåŒç»çº¿

>ç»åˆçš„ä½œç”¨:
>
>> æŠµå¾¡éƒ¨åˆ†æ¥è‡ªå¤–ç•Œçš„ç”µç£æ³¢å¹²æ‰°
>> å‡å°‘ç›¸é‚»å¯¼çº¿çš„ç”µç£å¹²æ‰°

| ç±»åˆ«       | å¸¦å®½èŒƒå›´        | ç‰¹ç‚¹                                                     | å…¸å‹åº”ç”¨                          |
| ---------- | --------------- | -------------------------------------------------------- | --------------------------------- |
| **Cat 3**  | æœ€å¤š 10 Mbps    | æ—©æœŸæ ‡å‡†ï¼Œå·²æ·˜æ±°ï¼ŒæŠ—å¹²æ‰°èƒ½åŠ›å¼±                           | ç”µè¯çº¿è·¯ï¼Œæ—©æœŸä»¥å¤ªç½‘ (10BASE-T)   |
| **Cat 5**  | æœ€å¤š 100 Mbps   | éå±è”½ï¼ˆUTPï¼‰ï¼Œæ¯”Cat 3æ›´å¥½ï¼Œä½†å·²é€æ¸è¢«æ·˜æ±°               | å¿«é€Ÿä»¥å¤ªç½‘ (100BASE-TX)           |
| è¶…5ç±»      | æœ€å¤š 1 Gbps     | å¢å¼ºå‹Cat 5ï¼Œå‡å°‘ä¸²æ‰°ï¼Œæˆæœ¬ä½ï¼Œä¸»æµä½¿ç”¨                  | åƒå…†ä»¥å¤ªç½‘ (1000BASE-T)ï¼Œå®¶åº­ç½‘ç»œ |
| **Cat 6**  | æœ€å¤š 1â€“10 Gbps  | æ›´åšçš„å¯¼çº¿ï¼Œå¢å¼ºæŠ—å¹²æ‰°èƒ½åŠ›ï¼Œé€‚ç”¨äºé«˜é€Ÿä¼ è¾“               | ä¼ä¸šç½‘ç»œï¼Œé«˜æ¸…è§†é¢‘ä¼ è¾“            |
| **Cat 6a** | æœ€å¤š 10 Gbps    | å±è”½/éå±è”½å‡æœ‰ï¼Œé¢‘ç‡å¯è¾¾500 MHzï¼Œä¼ è¾“æ›´ç¨³å®š             | æ•°æ®ä¸­å¿ƒï¼Œé«˜å¯†åº¦éƒ¨ç½²              |
| **Cat 7**  | æœ€å¤š 10 Gbps    | å…¨å±è”½ï¼ˆSTPï¼‰ï¼ŒæŠ—å¹²æ‰°æœ€å¼ºï¼Œæˆæœ¬é«˜                        | ä¸“ä¸šå¸ƒçº¿ã€é«˜å®‰å…¨æ€§ç¯å¢ƒ            |
| **Cat 8**  | æœ€å¤š 25â€“40 Gbps | é¢å‘æ•°æ®ä¸­å¿ƒï¼Œä¼ è¾“é¢‘ç‡é«˜è¾¾2000 MHzï¼Œè·ç¦»å—é™ï¼ˆ30ç±³ä»¥å†…ï¼‰ | æœåŠ¡å™¨äº’è¿ï¼Œæ•°æ®ä¸­å¿ƒä¸“ç”¨          |

#### ğŸŒŸå…‰çº¤

> çº¤èŠ¯ç›´å¾„
>
> >å¤šæ¨¡å…‰çº¤ï¼š50å¾®ç±³ 62.5å¾®ç±³
> >å•æ¨¡å…‰çº¤ï¼š9å¾®ç±³
>
> å·¥ä½œæ³¢é•¿
> >0.85å¾®ç±³ï¼ˆè¡°å‡è¾ƒå¤§ï¼‰
> >
> >1.30å¾®ç±³ï¼ˆè¡°å‡è¾ƒå°ï¼‰
> >
> >1.55å¾®ç±³ï¼ˆè¡°å‡è¾ƒå°ï¼‰
>
> ä¼˜ç‚¹
> >- é€šä¿¡å®¹é‡å¤§ï¼ˆ25000-30000GHzçš„å¸¦å®½ï¼‰
> >- ä¼ è¾“æŸè€—å°ï¼Œè¿œè·ç¦»ä¼ è¾“æ—¶æ›´åŠ ç»æµ
> >- æŠ—é›·ç”µå’Œç”µç£å¹²æ‰°æ€§èƒ½å¥½ï¼ˆåœ¨å¤§ç”µæµè„‰å†²å¹²æ‰°çš„ç¯å¢ƒä¸‹å°¤ä¸ºé‡è¦ï¼‰
> >- æ— ä¸²éŸ³å¹²æ‰°ï¼Œä¿å¯†æ€§å¥½ï¼Œä¸æ˜“è¢«çªƒå¬
> >- ä½“ç§¯å°é‡é‡è½»
>
> ç¼ºç‚¹
> >- å‰²æ¥éœ€è¦ä¸“é—¨çš„è®¾å¤‡
> >- å…‰ç”µæ¥å£è¾ƒè´µ

å¤šæ¨¡å…‰çº¤ï¼š

å…‰æº â†’   ||   å…‰ä¿¡å·è¿›å…¥å…‰çº¤

```javascript
        ________å…‰çº¤åŒ…å±‚ï¼ˆCladdingï¼‰________
       /                                     \
      /                                       \
     |      â†‘                         â†‘        | â† å…‰çº¿ä¸æ–­è¢«åå°„
     |     / \                       / \       |
     |    /   \ â† å…¨åå°„åŸç†          /   \      |
     |   /     \                   /     \     |
     |  /       \                 /       \    |
     | /         \               /         \   |
     |/___________\_____________/___________\__| â† å…‰çº¤æ ¸å¿ƒï¼ˆCoreï¼‰
```

- å…‰ä»ä¸€ç«¯è¿›å…¥ï¼Œæ²¿æ ¸å¿ƒä¸æ–­â€œå¼¹è·³â€ï¼ˆå…¨åå°„ï¼‰å‰è¿›ï¼Œæœ€ç»ˆä¼ è¾“åˆ°å¦ä¸€ç«¯

- ç”±äºå…‰çš„è‰²æ•£é—®é¢˜ï¼Œå…‰åœ¨å¤šæ¨¡å…‰çº¤ä¸­ä¼ è¾“ä¸€å®šè·ç¦»åå¿…ç„¶äº§ç”Ÿä¿¡å·å¤±çœŸï¼ˆè„‰å†²å±•å®½ï¼‰

- å› æ­¤å¤šæ¨¡å…‰çº¤åªé€‚åˆè¿‘è·ç¦»ä¼ è¾“ï¼ˆå»ºç­‘ç‰©å†…ï¼‰
- å‘é€å…‰æºï¼šå‘å…‰äºŒæç®¡
	æ¥æ”¶æ£€æµ‹ï¼šå…‰ç”µäºŒæç®¡

---



å•æ¨¡å…‰çº¤ï¼š

> å…‰ä¸€ç›´å‘å‰ä¼ æ’­è€Œä¸å‘ç”Ÿå…¨åå°„
> æ²¡æœ‰æ¨¡å¼è‰²æ•£
>
> é€‚åˆé•¿è·ç¦»ä¼ è¾“ä¸”è¡°å‡å°ï¼Œä½†åˆ¶é€ æˆæœ¬é«˜ï¼Œå¯¹å…‰æºè¦æ±‚é«˜
>
> å‘é€å…‰æºï¼šæ¿€å…‰å‘ç”Ÿå™¨
> æ¥æ”¶æ£€æµ‹ï¼šæ¿€å…‰æ£€æ³¢å™¨

#### ç”µåŠ›çº¿



### 2.2.2 éå¯¼å¼•å‹ä¼ è¾“åª’ä½“

#### æ— çº¿ç”µæ³¢

#### ğŸŒŸå¾®æ³¢

- åœ°é¢å¾®æ³¢æ¥åŠ›é€šä¿¡
- å«æ˜Ÿé€šä¿¡

#### çº¢å¤–çº¿

- ç‚¹å¯¹ç‚¹æ— çº¿ä¼ è¾“
- ç›´çº¿ä¼ è¾“ï¼Œä¸­é—´ä¸èƒ½æœ‰éšœç¢ç‰©ï¼Œä¼ è¾“è·ç¦»çŸ­
- ä¼ è¾“é€Ÿç‡ä½ï¼ˆ4-16Mb/sï¼‰



## 2.3 ä¼ è¾“æ–¹å¼



### 2.3.1 ğŸŒŸ**å¹¶è¡Œä¼ è¾“ï¼ˆParallel Transmissionï¼‰**

- ä¸€æ¬¡ä¼ å¤šä¸ªæ¯”ç‰¹ï¼ˆé€šå¸¸æ˜¯8ä¸ªæˆ–æ›´å¤šï¼‰ã€‚
- å°±åƒä½ æœ‰8æ¡è½¦é“ï¼Œæ¯æ¡è½¦é“åŒæ—¶ä¼ ä¸€ä½ã€‚
- ç”¨äºï¼šçŸ­è·ç¦»ä¼ è¾“ï¼Œå¦‚**ç”µè„‘å†…éƒ¨ã€CPU åˆ°å†…å­˜çš„æ€»çº¿**

âœ… ä¼˜ç‚¹ï¼šä¼ è¾“å¿«
 âŒ ç¼ºç‚¹ï¼šè·ç¦»ä¸èƒ½å¤ªè¿œï¼Œå®¹æ˜“â€œèµ°åâ€ï¼ˆä¿¡å·å¹²æ‰°ï¼Œä¸åŒæ­¥ï¼‰

------

### 2.3.2ğŸŒŸ**ä¸²è¡Œä¼ è¾“ï¼ˆSerial Transmissionï¼‰**

- ä¸€æ¬¡ä¼ ä¸€ä¸ªæ¯”ç‰¹ï¼ŒæŒ‰ç…§é¡ºåºæ’é˜Ÿä¼ ã€‚
- å°±åƒå•è½¦é“é«˜é€Ÿå…¬è·¯ï¼Œè™½ç„¶æ…¢ï¼Œä½†è·‘å¾—è¿œã€‚

âœ… ä¼˜ç‚¹ï¼šé€‚åˆé•¿è·ç¦»ã€ç®€å•ã€æŠ—å¹²æ‰°å¼º
 âŒ ç¼ºç‚¹ï¼šé€Ÿåº¦ç•¥æ…¢ï¼ˆä¸è¿‡ç°ä»£æŠ€æœ¯å·²ç»å¼¥è¡¥äº†è¿™ä¸ªç¼ºç‚¹ï¼‰

---

### 2.3.3 ğŸŒŸåŒæ­¥ä¼ è¾“

- ä¿è¯åŒæ–¹æ—¶é’ŸåŒæ­¥çš„æ–¹æ³•
	- å¤–åŒæ­¥ï¼šæ”¶å‘åŒæ–¹ä¹‹é—´æ·»åŠ ä¸€æ¡å•ç‹¬çš„æ—¶é’Ÿä¿¡å·çº¿
	- å†…åŒæ­¥ï¼šå‘é€ç«¯å°†æ—¶é’ŸåŒæ­¥ä¿¡å·ç¼–ç åˆ°å‘é€æ•°æ®ä¸­ä¸€èµ·ä¼ è¾“ï¼ˆå¦‚æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼‰



---

### 2.3.4 ğŸŒŸå¼‚æ­¥ä¼ è¾“

- å­—èŠ‚ä¹‹é—´å¼‚æ­¥ï¼Œæ—¶é—´é—´éš”ä¸å›ºå®š
- ä½†æ˜¯å­—èŠ‚ä¸­çš„æ¯ä¸ªæ¯”ç‰¹ä»»è¦åŒæ­¥ï¼ˆå„æ¯”ç‰¹çš„æŒç»­æ—¶é—´ç›¸åŒï¼‰



---

### 2.3.5 å•å·¥ã€åŠåŒå·¥ã€å…¨åŒå·¥

å•è¡Œé€šä¿¡ï¼šåªæœ‰ä¸€ä¸ªä¼ è¾“æ–¹å‘ï¼ˆæ”¶éŸ³æœºï¼‰

åŠåŒå·¥ï¼šå¯ä»¥åŒå‘ä¼ é€’ï¼Œä½†ä¸èƒ½åŒæ—¶è¿›è¡Œï¼ˆå¯¹è®²æœºï¼‰

å…¨åŒå·¥ï¼šåŒå‘åŒæ—¶ä¼ é€’ ï¼ˆæ‰‹æœºï¼‰

>åé¢äºŒè€…éƒ½éœ€è¦ä¸¤æ¡ä¿¡é“





---

## 2.4 ç¼–ç ä¸è°ƒåˆ¶

>**ç¼–ç **æ˜¯æŠŠâ€œè¯â€å˜æˆâ€œç”µâ€ï¼Œ**è°ƒåˆ¶**æ˜¯æŠŠâ€œç”µâ€å˜æˆâ€œå¹¿æ’­â€

![](../images/è®¡ç½‘å›¾4.jpg)



### ğŸŒŸç å…ƒ

åœ¨ä½¿ç”¨æ—¶é—´åŸŸçš„æ³¢å½¢è¡¨ç¤ºæ•°å­—ä¿¡å·æ—¶ï¼Œ**ä»£è¡¨ä¸åŒç¦»æ•£æ•°å€¼çš„åŸºæœ¬æ³¢å½¢**ï¼Œæ˜¯ä¸€ä¸ªåœ¨ä¿¡é“ä¸Šä¼ è¾“çš„æœ€å°å•ä½çš„ä¿¡å·å½¢å¼

- **æ¯”ç‰¹** æ˜¯ä¿¡æ¯çš„æœ€å°å•ä½ï¼ˆ0 æˆ– 1ï¼‰
- **ç å…ƒ** æ˜¯ç‰©ç†ä¸Šå‘å‡ºå»çš„â€œä¸€ä¸ªåŠ¨ä½œâ€ï¼Œæ¯”å¦‚ä¸€æ¬¡ç”µå¹³å˜åŒ–ã€ä¸€æ¬¡æ³¢å½¢ï¼›
- **ä¸€ä¸ªç å…ƒå¯ä»¥æºå¸¦ä¸€ä¸ªæˆ–å¤šä¸ªæ¯”ç‰¹**

> ç å…ƒæ˜¯ä½ â€œå‘äº†ä¸€æ¬¡ä¿¡å·â€ï¼Œæ¯”ç‰¹æ˜¯â€œä¿¡å·é‡Œè—äº†å‡ ä¸ªç§˜å¯†â€

---

### å¸¸ç”¨ç¼–ç 

NRZä¸å½’é›¶ç¼–ç å­˜åœ¨åŒæ­¥é—®é¢˜ï¼Œéœ€è¦é¢å¤–ä¼ è¾“æ—¶é’Ÿä¿¡å·

å¯¹äºRZå½’é›¶ç¼–ç ï¼ˆè‡ªåŒæ­¥ï¼Œç¼–ç æ•ˆç‡ä½ï¼‰ï¼š

- æ¥æ”¶æ–¹åªéœ€è¦åœ¨ä¿¡å·å½’é›¶åè¿›è¡Œé‡‡æ ·å³å¯ï¼Œä¸éœ€è¦å•ç‹¬çš„æ—¶é’Ÿä¿¡å·
- å®é™…ä¸Šï¼Œå½’é›¶ç¼–ç ç›¸å½“äºæŠŠæ—¶é’Ÿä¿¡å·ç”¨â€œå½’é›¶â€çš„æ–¹å¼ç¼–ç åœ¨æ•°æ®ä¹‹ä¸­ï¼Œè¿™ç§°ä¸ºâ€œ**è‡ªåŒæ­¥**â€ä¿¡å·

#### æ›¼å½»æ–¯ç‰¹ç¼–ç ï¼ˆä¼ ç»Ÿä»¥å¤ªç½‘ï¼‰

ç å…ƒä¸­é—´æ—¶åˆ»çš„è·³å˜æ—¢è¡¨ç¤ºæ—¶é’Ÿï¼Œåˆè¡¨ç¤ºæ•°æ®

| åŸå§‹æ¯”ç‰¹ | æ›¼å½»æ–¯ç‰¹ç¼–ç               |
| -------- | ------------------------- |
| 0        | é«˜ç”µå¹³ â†’ ä½ç”µå¹³ï¼ˆä¸‹é™æ²¿ï¼‰ |
| 1        | ä½ç”µå¹³ â†’ é«˜ç”µå¹³ï¼ˆä¸Šå‡æ²¿ï¼‰ |



### åŸºæœ¬è°ƒåˆ¶æ–¹æ³•

æ‰€è°“è°ƒåˆ¶ï¼š
æ•°å­—ä¿¡å·è½¬ä¸ºæ¨¡æ‹Ÿä¿¡å·ï¼Œåœ¨æ¨¡æ‹Ÿä¿¡é“ä¸­ä¼ è¾“
æ¨¡æ‹Ÿä¿¡å·è½¬æ¢ä¸ºå¦ä¸€ç§æ¨¡æ‹Ÿä¿¡å·ï¼Œåœ¨æ¨¡æ‹Ÿä¿¡é“ä¸­ä¼ è¾“

#### è°ƒå¹…ï¼ˆAMï¼‰å¹…ç§»é”®æ§ ASK

- âœ… ä¼˜ç‚¹ï¼šå®ç°ç®€å•

- âŒ ç¼ºç‚¹ï¼šå¯¹å™ªå£°éå¸¸æ•æ„Ÿï¼ˆæŒ¯å¹…å®¹æ˜“è¢«å¹²æ‰°ï¼‰

#### è°ƒé¢‘ï¼ˆFMï¼‰é¢‘ç§»é”®æ§ FSK

- âœ… ä¼˜ç‚¹ï¼šæŠ—å¹²æ‰°èƒ½åŠ›æ¯”ASKå¼º

- âŒ ç¼ºç‚¹ï¼šå¸¦å®½å ç”¨å¤§ï¼Œé¢‘ç‡åˆ‡æ¢éš¾

#### è°ƒç›¸ï¼ˆPMï¼‰ç›¸ç§»é”®æ§ PSK

- âœ… ä¼˜ç‚¹ï¼šæŠ—å™ªå£°å¼ºï¼Œæ•ˆç‡é«˜

- âŒ ç¼ºç‚¹ï¼šå®ç°ç›¸å¯¹å¤æ‚ï¼ˆæ¥æ”¶ç«¯è¦èƒ½å‡†ç¡®åˆ¤ç›¸ï¼‰



#### æ··åˆè°ƒåˆ¶ï¼ˆå¤šå…ƒåˆ¶ï¼‰

æ³¨æ„ï¼š
é¢‘ç‡ä¸ç›¸ä½ç›¸å…³ï¼ˆé¢‘ç‡æ˜¯ç›¸ä½éšæ—¶é—´çš„å˜åŒ–ç‡ï¼‰ï¼Œä¸€æ¬¡åªèƒ½è°ƒä¸€ä¸ª

ç›¸ä½å’ŒæŒ¯å¹…å¯ä»¥åŒæ—¶è°ƒåˆ¶

ä¾‹å¦‚ æ­£äº¤æŒ¯å¹…è°ƒåˆ¶ QAM

#### QAM-16

- 12ç§ç›¸ä½

- æ¯ç§ç›¸ä½æœ‰1å’Œ2ä¸¤ç§æŒ¯å¹…å¯é€‰

- ç å…ƒä¸4ä¸ªæ¯”ç‰¹çš„å¯¹åº”å…³ç³»é‡‡ç”¨æ ¼é›·ç ï¼ˆä»»æ„ä¸¤ä¸ªç›¸é‚»ç å…ƒä»…æœ‰1ä¸ªæ¯”ç‰¹ä¸åŒï¼‰

	![](../images/è®¡ç½‘å›¾5.png)

å› ä¸ºæ˜¯16ä¸ªä¿¡å·ç‚¹ï¼Œæ‰€ä»¥æ¯ä¸ªç‚¹ä»£è¡¨4ä¸ªæ¯”ç‰¹ï¼ˆ2^4ï¼‰

| æ¯”ç‰¹ç»„åˆ | ä¿¡å·ç‚¹ä½ç½®ï¼ˆI, Qï¼‰ |
| -------- | ------------------ |
| 0000     | (-3, -3)           |
| 0001     | (-3, -1)           |
| 0010     | (-3, 1)            |
| 0011     | (-3, 3)            |
| 0100     | (-1, -3)           |
| 0101     | (-1, -1)           |
| 0110     | (-1, 1)            |
| 0111     | (-1, 3)            |
| 1000     | (1, -3)            |
| 1001     | (1, -1)            |
| 1010     | (1, 1)             |
| 1011     | (1, 3)             |
| 1100     | (3, -3)            |
| 1101     | (3, -1)            |
| 1110     | (3, 1)             |
| 1111     | (3, 3)             |

---

## 2.5 ä¿¡é“çš„æé™å®¹é‡

ä¿¡å·å¤±çœŸçš„å› ç´ ï¼š

1. ç å…ƒä¼ è¾“é€Ÿç‡
2. ä¿¡å·ä¼ è¾“è·ç¦»
3. å™ªå£°å¹²æ‰°
4. ä¼ è¾“åª’ä½“è´¨é‡

### ğŸŒŸå¥ˆæ°å‡†åˆ™

åœ¨å‡å®šçš„ç†æƒ³æ¡ä»¶ä¸‹ï¼Œ**ä¸ºäº†é¿å…ç é—´ä¸²æ‰°ï¼Œç å…ƒä¼ è¾“é€Ÿç‡æ˜¯æœ‰ä¸Šé™çš„**

ç†æƒ³ä½é€šä¿¡ä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡ = 2W Baud

ç†æƒ³å¸¦é€šä¿¡ä¿¡é“çš„æœ€é«˜ç å…ƒä¼ è¾“é€Ÿç‡ = W Baud

W:ä¿¡é“å¸¦å®½ï¼ˆå•ä½Hzï¼‰

Baud:ç å…ƒ/ç§’

>ç å…ƒä¼ è¾“é€Ÿç‡åˆç§°ä¸º**æ³¢ç‰¹ç‡**ã€**è°ƒåˆ¶é€Ÿç‡**ã€æ³¢å½¢é€Ÿç‡æˆ–ç¬¦å·é€Ÿç‡ï¼Œä¸æ¯”ç‰¹ç‡æœ‰ä¸€å®šå…³ç³»
>
>ä¸ºäº†æé«˜æ¯”ç‰¹ç‡ï¼Œåˆ™éœ€è®¾æ³•ä½¿å¾—æ¯ä¸€ä¸ªç å…ƒæºå¸¦æ›´å¤šæ¯”ç‰¹çš„ä¿¡æ¯é‡

**å®é™…ä¿¡é“æ‰€èƒ½ä¼ è¾“çš„é€Ÿç‡ï¼Œæ˜æ˜¾ä½äºå¥ˆæ°å‡†åˆ™ç»™å‡ºçš„ä¸Šé™æ•°å€¼**

å¹¶éæé«˜è°ƒåˆ¶æ–¹æ³•ä½¿å¾—ç å…ƒæºå¸¦æ›´å¤šæ¯”ç‰¹å°±å¯ä»¥æ— é™åˆ¶æé«˜ä¿¡æ¯çš„ä¼ è¾“é€Ÿç‡ï¼Œå› ä¸ºæé™ä¼ è¾“é€Ÿç‡è¿˜å—é™äºå®é™…çš„ä¿¡å·åœ¨ä¿¡é“ä¼ è¾“æ—¶çš„ä¿¡å™ªæ¯”

### ğŸŒŸé¦™å†œå…¬å¼

å¸¦å®½å—é™ä¸”æœ‰é«˜æ–¯ç™½å™ªå£°å¹²æ‰°çš„ä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡
$$
C = Wâœ–ï¸ \log_2\left(1 + \frac{S}{N}\right)
$$

å…¶ä¸­ï¼š
- \( C \)ï¼šä¿¡é“çš„æé™ä¿¡æ¯ä¼ è¾“é€Ÿç‡ï¼ˆbpsï¼‰
- \( W )ï¼šå¸¦å®½ï¼ˆHzï¼‰
- \( S \)ï¼šä¿¡é“å†…æ‰€ä¼ ä¿¡å·çš„å¹³å‡åŠŸç‡
- \( N \)ï¼šå™ªå£°åŠŸç‡
- S/N:ä¿¡å™ªæ¯”ï¼ˆSNRï¼‰ï¼Œä½¿ç”¨åˆ†è´ä½œä¸ºåº¦é‡å•ä½
- ==ä¿¡å™ªæ¯” = $10âœ–ï¸\lg_\left( \frac{S}{N}\right)$ ï¼ˆdBï¼‰==

ä¸éš¾çœ‹å‡ºï¼š

1. ä¿¡é“å¸¦å®½æˆ–é€šä¿¡ä¸­ï¼Œä¿¡å™ªæ¯”è¶Šå¤§ï¼Œæé™ä¼ è¾“é€Ÿç‡è¶Šé«˜
2. å®é™…ä¸Šæ¯”å…¬å¼çš„æé™é€Ÿç‡è¿˜ä½ä¸å°‘ï¼Œå› ä¸ºè¿˜æœ‰å…¶ä»–æŸä¼¤æ¯”å¦‚å„ç§è„‰å†²å¹²æ‰°ã€è¡°å‡å’Œå¤±çœŸç­‰

---



# ä¸‰ã€æ•°æ®é“¾è·¯å±‚

## 3.1 æ•°æ®é“¾è·¯å±‚æ¦‚è¿°

- ==é“¾è·¯== ä¸€ä¸ªç»“ç‚¹åˆ°ç›¸é‚»ç»“ç‚¹çš„ä¸€æ®µç‰©ç†çº¿è·¯ï¼Œä¸­é—´æ²¡æœ‰å…¶ä»–çš„äº¤æ¢ç»“ç‚¹
- ==æ•°æ®é“¾è·¯ï¼ˆdata linkï¼‰== æ˜¯æŒ‡æŠŠå®ç°é€šä¿¡åè®®çš„ç¡¬ä»¶å’Œè½¯ä»¶åŠ åˆ°é“¾è·¯ä¸Šæ„æˆäº†æ•°æ®é“¾è·¯
- æ•°æ®é“¾è·¯å±‚ä»¥==å¸§==ä¸ºå•ä½ä¼ è¾“å’Œå¤„ç†æ•°æ®



æ•°æ®é“¾è·¯å±‚çš„ä¸‰ä¸ªé‡è¦é—®é¢˜

1. å°è£…æˆå¸§

2. å·®é”™æ£€æµ‹

3. å¯é ä¼ è¾“
	>å°½ç®¡è¯¯ç æ˜¯ä¸èƒ½å®Œå…¨é¿å…çš„ï¼Œä½†è‹¥èƒ½å®ç°å‘é€æ–¹å‘é€ä»€ä¹ˆæ¥æ”¶æ–¹æ”¶åˆ°ä»€ä¹ˆï¼Œå°±ç§°ä¸ºå¯é ä¼ è¾“

- ä½¿ç”¨ç‚¹å¯¹ç‚¹ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚

- ä½¿ç”¨å¹¿æ’­ä¿¡é“çš„æ•°æ®é“¾è·¯å±‚ï¼ˆå…±äº«å¼å±€åŸŸç½‘ï¼‰
	>å…±äº«å¼ä»¥å¤ªç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMA/CD
	>802.11å±€åŸŸç½‘çš„åª’ä½“æ¥å…¥æ§åˆ¶åè®®CSMA/CA

- æ•°æ®é“¾è·¯å±‚çš„äº’è”è®¾å¤‡
	>ç½‘æ¡¥ äº¤æ¢æœº
	>é›†çº¿å™¨ï¼ˆç‰©ç†å±‚äº’è”è®¾å¤‡ï¼‰ä¸äº¤æ¢æœºçš„åŒºåˆ«



### ç½‘ç»œé€‚é…å™¨

ç½‘ç»œé€‚é…å™¨çš„ä½œç”¨ï¼š

- æ•°æ®æ ¼å¼è½¬æ¢ï¼šå®ç°è®¡ç®—æœºä¸ç½‘ç»œä¹‹é—´çš„æ•°æ®æ ¼å¼è½¬æ¢ï¼ŒåŒ…æ‹¬==å¹¶è¡Œä¼ è¾“ä¸ä¸²è¡Œä¼ è¾“ä¹‹é—´çš„è½¬æ¢==

- æ•°æ®ç¼“å­˜ï¼šç”±äºç½‘ç»œå’Œè®¡ç®—æœºçš„æ•°æ®ä¼ è¾“é€Ÿç‡ä¸åŒï¼Œç½‘å¡å†…ç½®å­˜å‚¨å™¨ç”¨äºç¼“å­˜æ•°æ®ï¼Œåè°ƒé€Ÿåº¦å·®å¼‚

- åè®®å¤„ç†ï¼šç½‘å¡å®ç°å¦‚ä»¥å¤ªç½‘åè®®ç­‰é“¾è·¯å±‚åŠŸèƒ½ï¼Œè´Ÿè´£å¸§çš„å°è£…ã€è§£æå’Œå·®é”™æ£€æµ‹

- ç‹¬ç«‹æ”¶å‘æ•°æ®ï¼šç½‘å¡å¯è‡ªä¸»æ¥æ”¶å’Œå‘é€æ•°æ®å¸§ï¼Œä¸å ç”¨CPUèµ„æºï¼›æ”¶åˆ°æ­£ç¡®å¸§åé€šè¿‡ä¸­æ–­é€šçŸ¥è®¡ç®—æœº

- é©±åŠ¨æ”¯æŒï¼šéœ€åœ¨æ“ä½œç³»ç»Ÿä¸­å®‰è£…è®¾å¤‡é©±åŠ¨ç¨‹åºï¼Œä»¥ä¾¿æ“ä½œç³»ç»Ÿæ§åˆ¶ç½‘å¡è¿›è¡Œæ•°æ®æ”¶å‘

---

## 3.2 å°è£…æˆå¸§

**æ˜¯æŒ‡æ•°æ®é“¾è·¯å±‚ç»™ä¸Šå±‚äº¤ä»˜çš„åè®®æ•°æ®å•å…ƒæ·»åŠ å¸§å¤´å’Œå¸§å°¾ä½¿ä¹‹æˆä¸ºå¸§**

- å¸§å¤´å’Œå¸§å°¾å«æœ‰é‡è¦çš„æ§åˆ¶ä¿¡æ¯
- å¸§å¤´å’Œå¸§å°¾çš„ä½œç”¨ä¹‹ä¸€æ˜¯==å¸§å®šç•Œ==



#### **é€æ˜ä¼ è¾“**

**é€æ˜ä¼ è¾“**çš„ç›®æ ‡æ˜¯ï¼š

> *å³ä½¿æ•°æ®ä¸­åŒ…å«äº†åè®®æ§åˆ¶å­—ç¬¦ï¼ˆæ¯”å¦‚æ ‡å¿—ä½ï¼‰ï¼Œä¹Ÿä¸ä¼šå¹²æ‰°å¸§çš„è§£æ*

æ˜¯æŒ‡**æ•°æ®é“¾è·¯å±‚å¯¹ä¸Šå±‚äº¤ä»˜çš„ä¼ è¾“æ•°æ®æ²¡æœ‰ä»»ä½•é™åˆ¶**ï¼Œå¥½åƒæ•°æ®é“¾è·¯å±‚ä¸å­˜åœ¨

- é¢å‘å­—èŠ‚çš„ç‰©ç†é“¾è·¯ä½¿ç”¨å­—èŠ‚å¡«å……ï¼ˆå­—ç¬¦å¡«å……ï¼‰çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“
	>è½¬ä¹‰å­—ç¬¦ï¼Œç¡®ä¿ä¸ä¼šè¯¯åˆ¤å¼€å¤´ç»“å°¾

- é¢å‘æ¯”ç‰¹çš„ç‰©ç†é“¾è·¯ï¼Œä½¿ç”¨æ¯”ç‰¹å¡«å……çš„æ–¹æ³•å®ç°é€æ˜ä¼ è¾“

	>![](../images/è®¡ç½‘å›¾6.jpg)

- ä¸ºäº†æé«˜å¸§çš„ä¼ è¾“æ•ˆç‡ï¼Œåº”å½“ä½¿*å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦å°½å¯èƒ½å¤§ï¼ˆè¿œå¤§äºå¸§å¤´å¸§å°¾ï¼‰*
	è€ƒè™‘åˆ°å·®é”™æ§åˆ¶ç­‰å¤šç§å› ç´ ï¼Œæ¯ä¸€ç§æ•°æ®é“¾è·¯å±‚åè®®éƒ½è§„å®šäº†å¸§çš„æ•°æ®éƒ¨åˆ†çš„é•¿åº¦ä¸Šé™ï¼Œä¹Ÿå°±æ˜¯ ==æœ€å¤§ä¼ é€å•å…ƒï¼ˆMaximum Transfer Unitï¼‰==

	

	

	---

## 3.3 å·®é”™æ£€æµ‹

- **æ¯”ç‰¹å·®é”™**ï¼šä¼ è¾“è¿‡ç¨‹ä¸­æ¯”ç‰¹1å’Œ0è¯¯å˜
- åœ¨ä¸€æ®µæ—¶é—´å†…ï¼Œä¼ è¾“é”™è¯¯çš„æ¯”ç‰¹æ•°å æ€»æ¯”ç‰¹æ•°çš„æ¯”ç‡å«åš è¯¯ç ç‡ï¼ˆBit Error Rateï¼‰
- ä½¿ç”¨==å·®é”™æ£€æµ‹ç ==æ¥æ£€æµ‹ä¼ è¾“è¿‡ç¨‹ä¸­æ˜¯éƒ½å‡ºç°äº†æ¯”ç‰¹å·®é”™ï¼Œæ˜¯æ•°æ®é“¾è·¯å±‚éœ€è¦è§£å†³çš„é‡è¦é—®é¢˜ä¹‹ä¸€



### å¥‡å¶æ ¡éªŒ

- åœ¨å¾…å‘é€çš„æ•°æ®åé¢æ·»åŠ ä¸€ä½å¥‡å¶æ ¡éªŒä½ï¼Œä½¿æ•´ä¸ªæ•°æ®ï¼ˆåŒ…å«æ‰€æ·»åŠ çš„æ ¡éªŒä½åœ¨å†…ï¼‰ä¸­æ¯”ç‰¹1çš„ä¸ªæ•°ä¸ºå¥‡æ•°æˆ–å¶æ•°ï¼ˆå¥‡æ ¡éªŒæˆ–å¶æ ¡éªŒï¼‰
	>å¦‚æœå‡ºç°å¶æ•°ä¸ªä½å‘ç”Ÿè¯¯ç ï¼Œä¸èƒ½æ£€æŸ¥å‡ºè¯¯ç ï¼ˆæ¼æ£€ï¼‰



### å¾ªç¯å†—ä½™æ ¡éªŒï¼ˆCyclic Redundancy Checkï¼‰

>æœ‰å¾ˆå¥½çš„æ£€é”™èƒ½åŠ›ï¼ˆæ¼æ£€ç‡å¾ˆä½ï¼‰ï¼Œè™½ç„¶è®¡ç®—å¤æ‚ï¼Œä½†éå¸¸æ˜“äºç”¨ç¡¬ä»¶å®ç°ï¼Œå› æ­¤è¢«å¹¿æ³›åº”ç”¨äºæ•°æ®é“¾è·¯å±‚

- æ”¶å‘åŒæ–¹çº¦å®šå¥½ä¸€ä¸ª==ç”Ÿæˆå¤šé¡¹å¼==G(x)
- å‘é€æ–¹åŸºäºå¾…å‘é€çš„æ•°æ®å’Œç”Ÿæˆå¤šé¡¹å¼è®¡ç®—å‡ºå·®é”™æ£€éªŒç ï¼ˆ==å†—ä½™ç ==ï¼‰ï¼Œå°†å…¶æ·»åŠ åˆ°å¸¦ä¼ è¾“çš„æ•°æ®åé¢ä¸€èµ·ä¼ è¾“
- æ¥æ”¶æ–¹é€šè¿‡ç”Ÿæˆå¤šé¡¹å¼æ¥è®¡ç®—æ”¶åˆ°çš„æ•°æ®æ˜¯å¦äº§ç”Ÿäº†è¯¯ç 

å…·ä½“å†…å®¹ï¼š
>### ğŸ§® CRCè®¡ç®—è¿‡ç¨‹æ­¥éª¤
>
>1. **å®šä¹‰å‚æ•°ï¼š**
>	- åŸå§‹æ•°æ® `M`ï¼ˆk ä½ï¼‰
>	- ç”Ÿæˆå¤šé¡¹å¼ `P`ï¼ˆn+1 ä½ï¼‰
>	- è¡¥ `n` ä¸ª 0 åˆ° `M` åé¢ï¼Œæ„æˆæ–°çš„è¢«é™¤æ•° `D = M * 2â¿`
>2. **æ‰§è¡Œæ¨¡2é™¤æ³•ï¼š**
>	- ç”¨ `P` å»é™¤ `D`ï¼ˆå¼‚æˆ–è¿ç®—ä»£æ›¿å‡æ³•ï¼‰
>	- å¾—åˆ°çš„ä½™æ•° `R`ï¼ˆn ä½ï¼‰å³ä¸ºå†—ä½™æ ¡éªŒç 
>3. **ç”Ÿæˆå¾…ä¼ è¾“ç ï¼š**
>	- å°† `R` æ‹¼æ¥åˆ° `M` åé¢ï¼Œæ„æˆæœ€ç»ˆå‘é€æ•°æ® `M || R`ï¼ˆå…± `k + n` ä½ï¼‰
>
>------
>
>### ğŸ”§ æ¨¡2é™¤æ³•ç®€è¦è¯´æ˜
>
>- ä¸æ™®é€šé™¤æ³•ç±»ä¼¼ï¼Œä½†è¿ç®—å…¨ç”¨ **XOR å¼‚æˆ–**ï¼ˆæ— å€Ÿä½ï¼‰
>- æ¯æ¬¡å–ä¸ `P` ç­‰é•¿çš„ä¸€æ®µæ•°æ®è¿›è¡Œå¼‚æˆ–
>- è‹¥é¦–ä½ä¸º0åˆ™è·³è¿‡å¼‚æˆ–ï¼Œä»…å·¦ç§»
>- æœ€åå‰©ä¸‹çš„å°±æ˜¯ä½™æ•° `R`
>
>------
>
>### ğŸ“˜ ç¤ºä¾‹ï¼š
>
>ç»™å®šï¼š
>
>- `M = 101001`
>- `P = 1101` ï¼ˆn=3ï¼‰
>
>æ­¥éª¤ï¼š
>
>1. `D = 101001000`
>2. ç”¨ 1101 å»é™¤ `D`ï¼Œæ¯æ¬¡æŒ‰ä½å¼‚æˆ–
>3. å¾—åˆ°ä½™æ•° `R = 001`==ä½™æ•°çš„ä½æ•°ç­‰äºn==
>4. æœ€ç»ˆå‘é€æ•°æ®ä¸ºï¼š`101001001`



---

## 3.4 å¯é ä¼ è¾“

### 3.4.1 å¯é ä¼ è¾“çš„åŸºæœ¬æ¦‚å¿µ

äº§ç”Ÿè¯¯ç è¿‡åæ“ä½œï¼š

- æ ¹æ®æ•°æ®é“¾è·¯å±‚å‘ä¸Šå±‚æä¾›çš„æœåŠ¡ç±»å‹
	- **ä¸å¯é ä¼ è¾“æœåŠ¡ï¼šä»…ä»…ä¸¢å¼ƒæœ‰è¯¯ç çš„å¸§**
	- **å¯é ä¼ è¾“æœåŠ¡ï¼šæƒ³åŠæ³•å®ç°å‘é€ç«¯å‘é€ä»€ä¹ˆï¼Œæ¥æ”¶ç«¯å°±æ”¶åˆ°ä»€ä¹ˆ**
- ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œæœ‰çº¿é“¾è·¯çš„è¯¯ç ç‡æ¯”è¾ƒä½ï¼Œä¸ºäº†å‡å°å¼€é”€ï¼Œä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡ï¼Œã€‚å³ä¾¿å‡ºç°è¯¯ç ï¼Œå¯é ä¼ è¾“çš„é—®é¢˜ç”±å…¶ä¸Šå±‚å¤„ç†
- æ— çº¿é“¾è·¯è¯¯ç ç‡é«˜ï¼Œè¦æ±‚æ•°æ®é“¾è·¯å±‚æä¾›å¯é ä¼ è¾“



ä¼ è¾“å·®é”™é™¤äº†æ¯”ç‰¹å·®é”™å¤–ï¼Œè¿˜æœ‰**åˆ†ç»„ä¸¢å¤±**ã€**åˆ†ç»„å¤±åº**ä»¥åŠ**åˆ†ç»„é‡å¤**ï¼Œä¸€èˆ¬ä¸å‡ºç°åœ¨æ•°æ®é“¾è·¯å±‚

**å¯é ä¼ è¾“æœåŠ¡ä¸é™äºæ•°æ®é“¾è·¯å±‚**ï¼Œå…¶ä½™å„å±‚å‡å¯é€‰æ‹©å®ç°å¯é ä¼ è¾“

- åº”ç”¨å±‚
- è¿è¾“å±‚
	TCP å‘ä¸Šå±‚æä¾›é¢å‘è¿æ¥çš„å¯é ä¼ è¾“æœåŠ¡
	UDPå‘å…¶ä¸Šå±‚æä¾›æ— è¿æ¥ã€ä¸å¯é ä¼ è¾“æœåŠ¡
- ç½‘é™…å±‚
	IPå‘å…¶ä¸Šå±‚æä¾›æ— è¿æ¥ã€ä¸å¯é ä¼ è¾“æœåŠ¡
- ç½‘ç»œæ¥å£å±‚
	802.11æ— çº¿å±€åŸŸç½‘è¦æ±‚æ•°æ®é“¾è·¯å±‚å®ç°å¯é ä¼ è¾“
	ä»¥å¤ªç½‘ä¸è¦æ±‚æ•°æ®é“¾è·¯å±‚å®ç°å¯é ä¼ è¾“

---

### 3.4.2 å¯é ä¼ è¾“çš„å®ç°æœºåˆ¶  åœæ­¢=ç­‰å¾…åè®®SW

####  åŸºæœ¬æ€æƒ³

> **æ¯å‘é€ä¸€ä¸ªåˆ†ç»„ï¼ˆæ•°æ®åŒ…ï¼‰å°±å¿…é¡»ç­‰å¾…å…¶ç¡®è®¤ï¼ˆACKï¼‰åæ‰èƒ½å‘é€ä¸‹ä¸€ä¸ªåˆ†ç»„,è‹¥æœ‰è¯¯ç è¿”å›NAKï¼Œé‡ä¼ æ•°æ®åˆ†ç»„**

#### æœºåˆ¶

- å‘é€æ–¹å‘é€ä¸€ä¸ªæ•°æ®åŒ…ååœæ­¢ï¼Œç­‰å¾…æ¥æ”¶æ–¹ç¡®è®¤
- **è¶…æ—¶é‡ä¼ **ï¼šå¦‚æœåœ¨è¶…æ—¶æ—¶é—´å†…æœªæ”¶åˆ°ç¡®è®¤ï¼Œé‡ä¼ è¯¥æ•°æ®åŒ…ï¼Œé‡ä¼ æ—¶é—´ä¸€èˆ¬ä¸ºä»å‘é€æ–¹åˆ°æ¥æ”¶æ–¹çš„å¹³å‡æ—¶é—´
- è‡ªåŠ¨è¯·æ±‚é‡ä¼ ARQï¼ˆautomatic repeat questï¼‰
- æ¥æ”¶æ–¹æ¯æ¬¡åªæ¥æ”¶ä¸€ä¸ªæ•°æ®åŒ…ï¼Œå¹¶å›å¤ä¸€ä¸ª ACK

#### ç‰¹ç‚¹

- ç®€å•æ˜“å®ç°ï¼Œä½†**æ•ˆç‡ä½**
- ä¿¡é“åˆ©ç”¨ç‡ä½ï¼Œå°¤å…¶åœ¨**é«˜å¸¦å®½Ã—é«˜å»¶è¿Ÿ**ç¯å¢ƒä¸‹ï¼ˆå³ BDP å¤§ï¼‰
- ä¸ºäº†é¿å…åˆ†ç»„é‡å¤ï¼Œå¿…é¡»ç»™æ¯ä¸ªåˆ†ç»„å¸¦ä¸Šåºå·ï¼Œç”¨ä¸€ä¸ªæ¯”ç‰¹å°±å¤Ÿï¼ˆå› ä¸ºä¼šç­‰å¾…ï¼‰

#### ä¿¡é“åˆ©ç”¨ç‡



$
U=\frac{T_{D}}{T_{D}+RTT+T_{A}}
$



$T_{D} $æ˜¯å‘é€æ—¶å»¶ï¼Œä¸€èˆ¬å¿½ç•¥$T_{A}$

RTTæ˜¯==å¾€è¿”æ—¶é—´==

- å¯ä»¥çœ‹å‡ºï¼Œå½“RTTè¿œå¤§äºå‘é€æ—¶å»¶æ—¶ï¼ˆæ¯”å¦‚ä½¿ç”¨å«æ˜Ÿé“¾è·¯ï¼‰ï¼Œä¿¡é“åˆ©ç”¨ç‡éå¸¸ä½
- ä¸ºäº†å…‹æœS-Wåè®®ä¿¡é“åˆ©ç”¨ç‡å¾ˆä½çš„ç¼ºç‚¹ï¼Œå°±äº§ç”Ÿäº†å¦å¤–ä¸¤ç§åè®®



---

### 3.4.3 å›é€€Nå¸§åè®®GBNï¼ˆgo-to-back-Nï¼‰

> å‘é€æ–¹å¯ä»¥è¿ç»­å‘é€å¤šä¸ªåˆ†ç»„ï¼ˆçª—å£å†…ï¼‰ï¼Œä½†å¦‚æœæŸä¸ªåˆ†ç»„ä¸¢å¤±æˆ–å‡ºé”™ï¼Œæ¥æ”¶æ–¹åªæ¥å—æŒ‰åºçš„åˆ†ç»„ï¼Œä¹‹åçš„å…¨éƒ¨ä¸¢å¼ƒï¼Œå‘é€æ–¹é‡ä¼ â€œä¸¢å¤±åˆ†ç»„åŠå…¶åçš„æ‰€æœ‰åˆ†ç»„â€
>
> å½“ä¿¡é“çº¿è·¯è´¨é‡ä¸é«˜æ—¶ï¼Œå…¶ä¿¡é“åˆ©ç”¨ç‡å¹¶ä¸æ¯”S-Wåè®®é«˜

æ¥æ”¶æ–¹ç´¯è®¡ç¡®è®¤ï¼š

æ”¶åˆ°å¤šä¸ªæ•°æ®åˆ†ç»„åï¼Œå¯¹æŒ‰é¡ºåºåˆ°è¾¾çš„æœ€åä¸€ä¸ªæ•°æ®åˆ†ç»„å‘é€ç¡®è®¤ï¼Œ$ACK_{n}$è¡¨ç¤ºåºå·ä¸ºnåŠä»¥å‰çš„æ‰€æœ‰æ•°æ®åˆ†ç»„éƒ½å·²ç»æ­£ç¡®æ¥æ”¶

æ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£å°ºå¯¸æ˜¯$W_{R}=1$



- å‡è®¾ä½¿ç”¨ m ä½ç¼–å·ï¼Œåˆ™æœ€å¤šèƒ½è¡¨ç¤º 2m2^m2m ä¸ªä¸åŒç¼–å·ã€‚
- ä¸ºé˜²æ­¢ç¼–å·æ··æ·†ï¼ˆæ¯”å¦‚æ–°å‘é€çš„ pkt3 è¢«è¯¯è®¤ä¸ºæ˜¯ä¸Šä¸€æ¬¡çš„ pkt3ï¼‰ï¼Œè¦æ±‚ï¼š

çª—å£å¤§å°â‰¤$2^m$âˆ’1ï¼ˆmæ˜¯æ„æˆåˆ†ç»„åºå·çš„æ¯”ç‰¹æ•°é‡ï¼‰ï¼Œè‹¥æ›´å¤§åˆ™æ— æ³•åˆ†è¾¨æ–°æ—§æ•°æ®åˆ†ç»„



####  å‘é€æ–¹

- ç»´æŠ¤ä¸€ä¸ª**å‘é€çª—å£**ï¼Œçª—å£å¤§å°ä¸º NNN
- å¯ä»¥**è¿ç»­å‘é€çª—å£å†…æœªç¡®è®¤çš„å¸§**
- æ”¶åˆ° ACK åï¼Œçª—å£å‘å‰æ»‘åŠ¨
- å¦‚æœæŸä¸ªå¸§è¶…æ—¶æœªç¡®è®¤ï¼Œ**ä»è¯¥å¸§èµ·é‡ä¼ æ•´ä¸ªçª—å£å†…çš„æ‰€æœ‰å¸§ï¼ˆåŒ…æ‹¬åé¢çš„ï¼‰**

#### æ¥æ”¶æ–¹

- åªæ¥å—**æŒ‰åºåˆ°è¾¾çš„å¸§**ï¼ˆframe iiiï¼‰
- å¦‚æœæ”¶åˆ°çš„å¸§ä¸æ˜¯æœŸæœ›çš„ç¼–å·ï¼ˆå¦‚è·³å·ï¼‰ï¼Œ**ä¸¢å¼ƒè¯¥å¸§ï¼Œä¸ç¼“å­˜ä¹±åºå¸§**ï¼Œå¹¶é‡å‘ä¸Šä¸€ä¸ªç¡®è®¤å·ï¼ˆACK for last in-order frameï¼‰

---

### 3.4.5 é€‰æ‹©é‡ä¼ åè®®SR

ä¸ºäº†è¿›ä¸€æ­¥æé«˜æ€§èƒ½ï¼Œå¯è®¾æ³•åªé‡ä¼ å‡ºç°è¯¯ç çš„æ•°æ®åˆ†ç»„ï¼Œå› æ­¤$W_{R}$åº”è¯¥å¤§äº1ï¼Œä»¥ä¾¿äºæ¥æ”¶æ–¹å…ˆæ”¶ä¸‹å¤±åºåˆ°è¾¾ä½†æ— è¯¯ç å¹¶ä¸”åºå·è½åœ¨æ¥æ”¶çª—å£å†…çš„é‚£äº›æ•°æ®åˆ†ç»„ï¼Œç­‰åˆ°æ‰€ç¼ºåˆ†ç»„æ”¶é½åä¸€èµ·é€äº¤ä¸Šå±‚

####  ä¸ºä»€ä¹ˆéœ€è¦é€‰æ‹©é‡ä¼ åè®®ï¼Ÿ

åœ¨å‰é¢çš„ GBNï¼ˆGo-Back-Nï¼‰åè®®ä¸­ï¼Œå¦‚æœæŸä¸ªå¸§å‡ºé”™æˆ–ä¸¢å¤±ï¼Œ**åé¢çš„æ‰€æœ‰å¸§éƒ½è¦å›é€€é‡ä¼ **ï¼Œé€ æˆå¸¦å®½æµªè´¹ã€‚

> **SR çš„ç›®æ ‡**æ˜¯ï¼šåªé‡ä¼ å‡ºé”™çš„å¸§ï¼Œåˆ«çš„å¥½å¸§å°±ä¸åŠ¨ï¼æ¥æ”¶æ–¹ä¼šé€ä¸€ç¡®è®¤

------

####  é€‰æ‹©é‡ä¼ åè®®çš„æ ¸å¿ƒæœºåˆ¶

SR åè®®ä½¿ç”¨ä¸¤ä¸ª**æ»‘åŠ¨çª—å£**ï¼š

| è§’è‰²   | çª—å£ç±»å‹ | åŠŸèƒ½                                     |
| ------ | -------- | ---------------------------------------- |
| å‘é€æ–¹ | å‘é€çª—å£ | å…è®¸è¿ç»­å‘é€å¤šä¸ªå¸§ï¼ˆä½†è¦ç­‰å¾…ç¡®è®¤ï¼‰       |
| æ¥æ”¶æ–¹ | æ¥æ”¶çª—å£ | å…è®¸æ¥å—**ä¸æŒ‰é¡ºåº**åˆ°è¾¾çš„å¸§ï¼Œå¹¶ç¼“å­˜å®ƒä»¬ |



------

####  å…³é”®ç‰¹æ€§ä¸€è§ˆ

| ç‰¹æ€§         | è¯´æ˜                         |
| ------------ | ---------------------------- |
| âœ… å¯ä¹±åºæ¥æ”¶ | æ¥æ”¶æ–¹å¯ç¼“å­˜ä¹±åºåˆ°è¾¾çš„æ•°æ®å¸§ |
| âœ… é€‰æ‹©æ€§ç¡®è®¤ | æ¥æ”¶æ–¹åªå¯¹æ”¶åˆ°çš„å¸§å‘é€ ACK   |
| âœ… é€‰æ‹©æ€§é‡ä¼  | å‘é€æ–¹åªé‡ä¼ å‡ºé”™ï¼ˆè¶…æ—¶ï¼‰çš„å¸§ |



------

#### ç¼–å·ç©ºé—´ä¸çª—å£å¤§å°çš„å…³ç³»

ä¸ºäº†é˜²æ­¢å¸§åºå·æ­§ä¹‰ï¼Œå‘é€çª—å£å¤§å°å¿…é¡» â‰¤ $2^{mâˆ’1}$ï¼Œå…¶ä¸­ m æ˜¯å¸§ç¼–å·çš„æ¯”ç‰¹ä½æ•°

> è¿™æ¯” GBN æ›´ç´§ï¼Œå› ä¸º SR æ¥æ”¶æ–¹å¯èƒ½ç¼“å­˜æœªæŒ‰é¡ºåºåˆ°è¾¾çš„å¸§ï¼Œå¿…é¡»æ›´ä¸¥æ ¼åŒºåˆ†â€œæ—§å¸§â€å’Œâ€œæ–°å¸§â€

æ¥å—çª—å£ $W_R$âˆˆï¼ˆ1,$W_T$]

---

## 3.5 ç‚¹å¯¹ç‚¹åè®®PPP

- point-to-point protocol æ˜¯ç›®å‰ä½¿ç”¨æœ€å¹¿æ³›çš„ç‚¹å¯¹ç‚¹æ•°æ®é“¾è·¯å±‚åè®®
- pppåè®®ä¸ºåœ¨ç‚¹å¯¹ç‚¹é“¾è·¯ä¼ è¾“å„ç§åè®®æ•°æ®æŠ¥æä¾›äº†ä¸€ä¸ªæ ‡å‡†æ–¹æ³•ï¼Œç”±ä»¥ä¸‹ä¸‰éƒ¨åˆ†æ„æˆ;
	- å¯¹å„ç§åè®®æ•°æ®æŠ¥çš„å°è£…æ–¹æ³•ï¼ˆå°è£…æˆå¸§ï¼‰
	- é“¾è·¯æ§åˆ¶åè®®LCP   ç”¨äºå»ºç«‹é…ç½®ä»¥åŠæµ‹è¯•æ•°æ®é“¾è·¯çš„è¿æ¥
	- ä¸€å¥—ç½‘ç»œæ§åˆ¶åè®®NCPs  å…¶ä¸­çš„æ¯ä¸€ä¸ªåè®®æ”¯æŒä¸åŒçš„ç½‘ç»œå±‚åè®®



### å¸§æ ¼å¼

```yacas
+--------+---------+--------+---------+
| Flag   | Address | Ctrl   | å¸§æ•°æ® | CRC | Flag
| 0x7E   | 0xFF    | 0x03   | ...     | ... | 0x7E
+--------+---------+--------+---------+

```

| å­—æ®µ         | å«ä¹‰                                                         |
| ------------ | ------------------------------------------------------------ |
| **Flag**     | èµ·å§‹/ç»“æŸæ ‡å¿—ï¼ˆå›ºå®šä¸º 0x7Eï¼‰                                 |
| **Address**  | ä¸€èˆ¬ä¸º 0xFFï¼Œä»£è¡¨å¹¿æ’­åœ°å€ï¼ˆç‚¹å¯¹ç‚¹å…¶å®ä¸é‡è¦ï¼‰                |
| **Control**  | å›ºå®šä¸º 0x03ï¼Œæ— ç¼–å·æ— ç¡®è®¤                                    |
| **Protocol** | æŒ‡æ˜å¸§çš„æ•°æ®éƒ¨åˆ†é€äº¤å“ªä¸ªåè®®å¤„ç†<br />0x0021 IPæ•°æ®æŠ¥<br />0xc021 LCPåˆ†ç»„<br />0x8021 NCPåˆ†ç»„ |
| **CRC**      | å¾ªç¯å†—ä½™æ ¡éªŒç ï¼ˆFCSï¼Œå¸§æ£€æŸ¥åºåˆ—ï¼‰                            |

å®ç°é€æ˜ä¼ è¾“æ–¹æ³•ï¼š

é¢å‘å­—èŠ‚çš„å¼‚æ­¥é“¾è·¯é‡‡ç”¨æ’å…¥è½¬ä¹‰å­—ç¬¦çš„å­—èŠ‚å¡«å……æ³•ï¼š

| æƒ…å†µ                                  | æ“ä½œ                                               |
| ------------------------------------- | -------------------------------------------------- |
| æ•°æ®ä¸­å‡ºç° `0x7E`ï¼ˆFlagï¼‰             | æ›¿æ¢ä¸ºä¸¤ä¸ªå­—èŠ‚ï¼š`0x7D` `0x5E`                      |
| æ•°æ®ä¸­å‡ºç° `0x7D`ï¼ˆè½¬ä¹‰ç¬¦ï¼‰           | æ›¿æ¢ä¸ºä¸¤ä¸ªå­—èŠ‚ï¼š`0x7D` `0x5D`                      |
| ASCIIç æ§åˆ¶å­—ç¬¦ï¼ˆæ•°å€¼å°äº0x20çš„å­—ç¬¦ï¼‰ | åœ¨å­—ç¬¦å‰æ’å…¥ä¸€ä¸ª7Då­—èŠ‚ï¼ŒåŒæ—¶æŠŠè¯¥å­—ç¬¦çš„ç¼–ç åŠ ä¸Š0x20 |

æ¯”ç‰¹å¡«å……æ³•ï¼š

å‘é€æ–¹ï¼šå‘ç°5ä¸ªè¿ç»­çš„æ¯”ç‰¹1ï¼Œç«‹å³å¡«å……1ä¸ªæ¯”ç‰¹0

æ¥æ”¶æ–¹ï¼šå‘ç°5ä¸ªè¿ç»­çš„æ¯”ç‰¹1ï¼Œç«‹å³åˆ é™¤åç»­1ä¸ªæ¯”ç‰¹0



å·®é”™æ£€æµ‹ï¼šæ¯æ”¶åˆ°ä¸€ä¸ªå¸§ï¼Œå°±è¿›è¡ŒCRCæ£€éªŒï¼Œæ­£ç¡®æ‰ä¿ç•™ .ä½¿ç”¨PPPçš„æ•°æ®é“¾è·¯å±‚å‘ä¸Šæä¾›å¯é ä¼ è¾“æœåŠ¡



å·¥ä½œçŠ¶æ€ï¼š

1. é“¾è·¯å»ºç«‹ï¼ˆLCPï¼‰
2. ç”¨æˆ·è®¤è¯ï¼ˆPAP æˆ– CHAPï¼Œå¯é€‰ï¼‰
3. ç½‘ç»œå±‚åè®®åå•†ï¼ˆNCPï¼‰
4. æ•°æ®ä¼ è¾“ & é“¾è·¯ç»ˆæ­¢



![](../images/è®¡ç½‘å›¾7.jpg)

## 3.6 åª’ä½“æ§åˆ¶

### 3.6.1 åª’ä½“æ¥å…¥æ§åˆ¶çš„åŸºæœ¬æ¦‚å¿µ

- å…±äº«ä¿¡é“è¦ç€é‡è€ƒè™‘çš„ä¸€ä¸ªé—®é¢˜å°±æ˜¯å¦‚ä½•åè°ƒå¤šä¸ªå‘é€å’Œæ¥æ”¶ç«™ç‚¹å¯¹ä¸€ä¸ªå…±äº«ä¼ è¾“åª’ä½“çš„å ç”¨ï¼Œå³==åª’ä½“æ¥å…¥æ§åˆ¶MAC==*Media Access Control*

åª’ä½“ä»‹å…¥æ§åˆ¶
>é™æ€åˆ’åˆ†ä¿¡é“ï¼ˆ**é¢„å…ˆåˆ†é…å¥½ä¿¡é“ï¼Œä¸çµæ´»ï¼Œå¯¹äºçªå‘æ€§æ•°æ®ä¼ è¾“ä¿¡é“åˆ©ç”¨ç‡ä¼šéå¸¸ä½ï¼Œé€šå¸¸åœ¨æ— çº¿ç½‘ç»œçš„ç‰©ç†å±‚ä½¿ç”¨ï¼Œè€Œä¸æ˜¯åœ¨æ•°æ®é“¾è·¯å±‚ä½¿ç”¨**ï¼‰
>
>>é¢‘åˆ†å¤šå€
>>
>>æ—¶åˆ†å¤šå€
>>
>>ç åˆ†å¤šå€
>
>åŠ¨æ€æ¥å…¥æ§åˆ¶
>
>>å—æ§æ¥å…¥
>>
>>>é›†ä¸­æ§åˆ¶ï¼ˆæœ‰ä¸€ä¸ªä¸»ç«™ä»¥å¾ªç¯æ–¹å¼è½®è¯¢æ¯ä¸ªç«™ç‚¹æœ‰æ— æ•°æ®å‘é€ï¼Œåªæœ‰è½®è¯¢åˆ°çš„ç«™ç‚¹æ‰èƒ½å‘é€æ•°æ®ï¼Œæœ€å¤§ç¼ºç‚¹æ˜¯å•ç‚¹æ•…éšœé—®é¢˜ï¼‰
>>>
>>>åˆ†æ•£æ§åˆ¶ï¼ˆå„ç«™ç‚¹æ˜¯å¹³ç­‰çš„ï¼Œå½¢æˆä¸€ä¸ªç¯å‹ç½‘ç»œï¼Œä»¤ç‰Œæ²¿ç€ç¯ä¼ é€’ï¼Œæ¥æ”¶åˆ°ä»¤ç‰Œçš„ç«™ç‚¹æ‰æœ‰æƒå‘é€æ•°æ®ï¼Œå‘é€å®Œåä¼ é€ä»¤ç‰Œåˆ°ä¸‹ä¸€ä¸ªç«™ç‚¹ï¼‰
>>
>>éšæœºæ¥å…¥ï¼ˆæ‰€æœ‰ç«™ç‚¹é€šè¿‡ç«äº‰ï¼Œéšæœºçš„åœ¨ä¿¡é“ä¸Šå‘é€æ•°æ®ï¼Œå¦‚æœæ°å·§æœ‰ä¸¤ä¸ªæˆ–è€…æ›´å¤šç«™ç‚¹åŒä¸Šå‘é€ï¼Œåˆ™ä¿¡å·å‘ç”Ÿç¢°æ’ï¼Œä½¿å¾—è¿™äº›ç«™ç‚¹éƒ½å‘é€å¤±è´¥ï¼›å› æ­¤ï¼Œè¿™ç±»åè®®å…³é”®é—®é¢˜æ˜¯å¦‚ä½•é¿å…å†²çªä»¥åŠå†²çªå‘ç”Ÿåå¦‚ä½•æ¢å¤é€šä¿¡ï¼Œå…±äº«å¼ä»¥å¤ªç½‘å°±æ˜¯éšæœºæ¥å…¥ï¼‰



### 3.6.2 é™æ€åˆ’åˆ†ä¿¡é“

#### ä¿¡é“å¤ç”¨

- å¤ç”¨ï¼ˆmultiplexingï¼‰ï¼š

	å°±æ˜¯é€šè¿‡ä¸€æ¡ç‰©ç†çº¿è·¯åŒæ—¶ä¼ è¾“å¤šè·¯ç”¨æˆ·çš„ä¿¡å·

- åˆ†ä¸ºï¼š

	1. é¢‘åˆ†å¤ç”¨FDM
		æ‰€æœ‰ç”¨æˆ·åŒæ—¶å ç”¨ä¸åŒçš„é¢‘å¸¦èµ„æºå¹¶è¡Œé€šä¿¡
	2. æ—¶åˆ†å¤ç”¨TDM
		å°†æ—¶é—´åˆ†ä¸ºæ—¶éš™ï¼Œæ¯å¯¹ç”¨æˆ·åªåœ¨æ‰€åˆ†é…çš„æ—¶éš™é‡Œä½¿ç”¨çº¿è·¯ä¼ è¾“æ•°æ®
		**æ‰€æœ‰ç”¨æˆ·åœ¨ä¸åŒçš„æ—¶é—´å ç”¨åŒæ ·çš„é¢‘å¸¦å®½åº¦**
	3. æ³¢åˆ†å¤ç”¨WDM
		ç”¨åœ¨å…‰çº¤é€šä¿¡ä¸­ï¼Œä¿¡å·æŒ‰ç…§å…‰çš„æ³¢é•¿åˆ’åˆ†
	4. ç åˆ†å¤ç”¨CDM
		æ›´å¸¸ç”¨è¯´æ³• CDMAï¼ˆCode Division Multiple Accessï¼‰
		æ¯ä¸ªç”¨æˆ·åœ¨åŒæ—¶ä½¿ç”¨åŒæ ·çš„é¢‘å¸¦è¿›è¡Œé€šä¿¡ï¼Œé‡‡ç”¨ä¸åŒçš„ç¼–ç ï¼Œæ‰€ä»¥äº’ä¸å¹²æ‰°
		1. åœ¨CDMAä¸­ï¼Œæ¯ä¸€ä¸ªæ¯”ç‰¹æ—¶é—´åˆ†ä¸ºmä¸ªçŸ­çš„é—´éš”ï¼Œç§°ä¸º==ç ç‰‡CHIP== ä¸€èˆ¬å–å€¼64æˆ–128 
		2. ä½¿ç”¨CDMAçš„æ¯ä¸€ä¸ªç«™è¢«æŒ‡æ´¾ä¸€ä¸ªå”¯ä¸€çš„==m bitç ç‰‡åºåˆ—==chip sequence
		3. ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹1ï¼Œåˆ™å‘é€è‡ªå·±çš„ m bit chip sequence
		4. ä¸€ä¸ªç«™å¦‚æœè¦å‘é€æ¯”ç‰¹0ï¼Œåˆ™å‘é€è‡ªå·±çš„ m bit chip sequenceçš„äºŒè¿›åˆ¶åç 
		5. ç ç‰‡åºåˆ—æŒ‘é€‰çš„åŸåˆ™ï¼š
			1. åˆ†é…ç»™æ¯ä¸ªç«™çš„ç ç‰‡åºåˆ—ä¸åŒï¼Œå®é™…å¸¸é‡‡ç”¨ä¼ªéšæœºç åºåˆ—
			2. åˆ†é…ç»™æ¯ä¸ªç«™çš„ç ç‰‡åºåˆ—å¿…é¡»ç›¸äº’æ­£äº¤ï¼ˆè§„æ ¼åŒ–å†…ç§¯ä¸º0ï¼‰
			3. ![](../images/è®¡ç½‘å›¾8.jpg)



---

### 3.6.3 åª’ä½“æ¥å…¥æ§åˆ¶-åŠ¨æ€ä»‹å…¥æ§åˆ¶-éšæœºæ¥å…¥-CSMA/CD

æ—©æœŸ CSMA /CD(Carrier Sense Multiple Access/Collision Detection)

è½½æ³¢ç›‘å¬å¤šå€æ¥å…¥/ç¢°æ’æ£€æµ‹
æ€»çº¿å±€åŸŸç½‘ä½¿ç”¨

#### Multiple Access

- å¤šä¸ªç«™è¿æ¥åœ¨ä¸€æ¡æ€»çº¿ä¸Šï¼Œç«äº‰ä½¿ç”¨æ€»çº¿



#### Carrier Sense

- æ¯ä¸€ä¸ªç«™å‘é€å‰å…ˆæ£€æµ‹æ€»çº¿ä¸Šå…¶ä»–ç«™ç‚¹æ˜¯å¦åœ¨å‘é€å¸§
	- è‹¥æ£€æµ‹åˆ°æ€»çº¿ç©ºé—²96æ¯”ç‰¹æ—¶é—´ï¼Œåˆ™å‘é€è¿™ä¸ªå¸§
	- è‹¥æ£€æµ‹åˆ°æ€»çº¿å¿™ï¼Œåˆ™ç»§ç»­æ£€æµ‹å¹¶ç­‰å¾…æ€»çº¿è½¬ä¸ºç©ºé—²96æ¯”ç‰¹æ—¶é—´ï¼Œç„¶åå‘é€è¿™ä¸ªå¸§



#### Collision Detection

- æ¯ä¸€ä¸ªæ­£åœ¨å‘é€çš„ç«™è¾¹å‘é€è¾¹ç›‘æµ‹ç¢°æ’
	- ä¸€æ—¦å‘ç°å‡ºç°ç¢°æ’ï¼Œåˆ™ç«‹å³åœæ­¢å‘é€ï¼Œé€€é¿ä¸€æ®µéšæœºæ—¶é—´åå†æ¬¡å‘é€
- ä»¥å¤ªç½‘è¿˜é‡‡å–ä¸€ç§==å¼ºåŒ–ç¢°æ’==çš„æªæ–½ï¼Œå°±æ˜¯å½“å‘é€å¸§çš„ç«™ç‚¹ä¸€æ—¦æ£€æµ‹åˆ°ç¢°æ’ï¼Œé™¤äº†ç«‹å³åœæ­¢å‘é€å¸§ä¹‹å¤–ï¼Œè¿˜è¦ç»§ç»­å‘é€32æˆ–48bitçš„jamming signalï¼Œä»¥ä¾¿æœ‰è¶³å¤Ÿå¤šçš„ç¢°æ’ä¿¡å·ä½¿æ‰€æœ‰ç«™ç‚¹éƒ½èƒ½æ£€æµ‹å‡ºç¢°æ’



#### contention window äº‰ç”¨æœŸï¼ˆç¢°æ’çª—å£ï¼‰

- ä»¥å¤ªç½‘ç«¯åˆ°ç«¯å¾€è¿”ä¼ æ’­æ—¶å»¶2Ï„ç§°ä¸ºäº‰ç”¨æœŸæˆ–ç¢°æ’çª—å£ 
- ç»è¿‡äº‰ç”¨æœŸè¿™æ®µæ—¶é—´è¿˜æ²¡æœ‰æ£€æµ‹åˆ°ç¢°æ’ï¼Œæ‰èƒ½è‚¯å®šè¿™æ¬¡å‘é€ä¸ä¼šå‘ç”Ÿç¢°æ’
- åœ¨ä»¥å¤ªç½‘ä¸­å‘é€å¸§çš„ä¸»æœºè¶Šå¤šï¼Œç«¯åˆ°ç«¯å¾€è¿”æ—¶å»¶è¶Šå¤§ï¼Œå‘ç”Ÿç¢°æ’çš„æ¦‚ç‡è¶Šå¤§ï¼Œå› æ­¤ï¼Œå…±äº«å¼ä»¥å¤ªç½‘ä¸èƒ½è¿æ¥å¤ªå¤šä¸»æœºï¼Œæ€»çº¿ä¹Ÿä¸èƒ½å¤ªé•¿
	- 10Mb/sä»¥å¤ªç½‘æŠŠcontention windowå®šä¸º512bitå‘é€æ—¶é—´ï¼Œ51.2å¾®å¦™ï¼Œå› æ­¤æ€»çº¿ä¸èƒ½è¶…è¿‡5120mï¼Œè€ƒè™‘ä¿¡å·è¡°å‡ï¼Œä¸è¶…è¿‡2500m



#### æœ€å°å¸§é•¿

> è¾¹å‘é€è¾¹æ£€æµ‹ï¼Œå¦‚æœå¸§å¤ªçŸ­ï¼Œå¾ˆå¿«å°±å‘é€å‡ºå»ï¼Œåˆ™åœ¨åé¢å‘ç”Ÿç¢°æ’ä¹Ÿä¸çŸ¥é“ï¼Œæ‰€ä»¥éœ€è¦é™åˆ¶å¸§ä¸èƒ½å¤ªå°



- ä»¥å¤ªç½‘è§„å®šæœ€å°å¸§64Bï¼Œä¹Ÿå°±æ˜¯512bitï¼ˆå¤§å°ä¸äº‰ç”¨æœŸä¸€æ ·ï¼Œå¾ˆæ˜¾ç„¶è¿™æ ·ä¸€å®šèƒ½æ£€æµ‹åˆ°ç¢°æ’ï¼‰
	- å¦‚æœå‘é€çš„æ•°æ®å¾ˆå°ï¼Œä¹Ÿéœ€è¦åŠ å…¥å¡«å……å­—èŠ‚ï¼Œè®©å¸§é•¿ä¸å°‘äº64B
- **ç¡®ä¿äº†ä¸»æœºåœ¨å¸§å‘é€å®Œæˆå‰å°±æ£€æµ‹åˆ°å¸§æ˜¯å¦å‘ç”Ÿç¢°æ’**



#### æœ€å¤§å¸§é•¿

ä»¥å¤ªç½‘V2çš„MACå¸§æœ€å¤§1518B



#### æˆªæ–­äºŒè¿›åˆ¶æŒ‡æ•°é€€é¿ç®—æ³•

$é€€é¿æ—¶é—´ = åŸºæœ¬é€€é¿æ—¶é—´2Ï„ âœ–ï¸ éšæœºæ•°r$
å…¶ä¸­ï¼Œrâˆˆ{0,1,â€¦,$2^k-1$}

k = min[é‡ä¼ æ¬¡æ•°ï¼Œ10]ï¼ˆä¸èƒ½æ— é™å¢é•¿ï¼‰

- è‹¥è¿ç»­å¤šæ¬¡å‘ç”Ÿç¢°æ’ï¼Œè¡¨æ˜æœ‰å¾ˆå¤šä¸»æœºå‚ä¸ç«äº‰ä¿¡é“ï¼Œä½†ä½¿ç”¨ä¸Šè¿°ç®—æ³•å¯ä½¿é‡ä¼ éœ€è¦æ¨è¿Ÿçš„æ—¶é—´éšé‡ä¼ æ¬¡æ•°æ‰©å¤§ï¼ˆ==åŠ¨æ€é€€é¿==ï¼‰ï¼Œå› è€Œå¯ä»¥å‡å°å‘ç”Ÿç¢°æ’çš„æ¦‚ç‡
- **å½“é‡ä¼ 16æ¬¡ä¾æ—§ä¸èƒ½æˆåŠŸæ—¶**ï¼Œè¡¨æ˜åŒæ—¶æ‰“ç®—å‘é€å¸§çš„ä¸»æœºå¤ªå¤šï¼Œåˆ™ä¸¢å¼ƒè¯¥å¸§ï¼Œå‘é«˜å±‚æŠ¥å‘Š



#### ä¿¡é“åˆ©ç”¨ç‡

è€ƒè™‘ç†æƒ³æƒ…å†µï¼š

- ä¸»æœºå‘é€å¸§ä¸ä¼šç¢°æ’
- æ€»çº¿ç©ºé—²åˆ™ç«‹å³æœ‰ä¸»æœºå‘é€å¸§
- å‘é€å¸§å ç”¨æ€»çº¿æ—¶é—´ $T_0+Ï„$ ï¼Œå¸§æœ¬èº«å‘é€æ—¶é—´ $T_0$
- åˆ™æé™ä¿¡é“åˆ©ç”¨ç‡ 
	$S_{MAX}=\frac{T_0}{T_0+Ï„}=\frac{1}{1+a}$å…¶ä¸­$a=\frac{Ï„}{T_0}$
- ä¸ºæé«˜åˆ©ç”¨ç‡ï¼Œaè¶Šå°è¶Šå¥½ï¼Œä¹Ÿå°±æ˜¯ç«¯åˆ°ç«¯çš„è·ç¦»å—é™ï¼Œå¸§å°½é‡å¤§äº›

#### å‘é€æµç¨‹å›¾

![](../images/è®¡ç½‘å›¾9.jpg)

#### å¸§æ¥æ”¶æµç¨‹å›¾

![](../images/è®¡ç½‘å›¾10.jpg)

### 3.6.4 åª’ä½“ä»‹å…¥æ§åˆ¶-åŠ¨æ€æ¥å…¥æ§åˆ¶-éšæœºæ¥å…¥-CSMA/CA

æ— çº¿å±€åŸŸç½‘ä½¿ç”¨

- åœ¨æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œä¾ç„¶å¯ä»¥ä½¿ç”¨CSMAï¼Œä¹Ÿå°±æ˜¯å‘é€å‰å¯¹ä¼ è¾“åª’ä½“è¿›è¡Œè½½æ³¢ç›‘å¬

- ä½†æ˜¯æ— æ³•ä½¿ç”¨CDï¼ŒåŸå› ï¼š

	- æ— çº¿ä¿¡é“çš„ä¼ è¾“æ¡ä»¶ç‰¹æ®Šï¼Œä¿¡å·å¼ºåº¦çš„åŠ¨æ€èŒƒå›´å¾ˆå¤§ï¼Œæ— çº¿ç½‘å¡æ¥æ”¶åˆ°çš„ä¿¡å·å¼ºåº¦å¾€å¾€ä¼šè¿œå°äºå‘é€ä¿¡å·çš„å¼ºåº¦ï¼ˆå¯èƒ½ç™¾ä¸‡å€ç›¸å·®ï¼‰ï¼Œæ‰€ä»¥åœ¨æ— çº¿ç½‘å¡ä¸Šä½¿ç”¨CDå¯¹ç¡¬ä»¶çš„è¦æ±‚å¾ˆé«˜
	- æ— çº¿ç”µæ³¢ä¼ æ’­å…·æœ‰ç‰¹æ®Šæ€§ï¼ˆéšè”½ç«™é—®é¢˜æ¯”å¦‚ABäº’é€šï¼ŒBCäº’é€šï¼ŒACä¸é€šï¼ŒACåŒæ—¶ç»™Bå‘é€ï¼ŒäºŒè€…ä¹‹é—´æ— æ³•æ£€æµ‹ç¢°æ’ï¼‰ï¼Œæ‰€ä»¥è¿›è¡Œç¢°æ’æ£€æµ‹çš„æ„ä¹‰ä¸å¤§

- **802.11æ— çº¿å±€åŸŸç½‘ä½¿ç”¨CSMA/CAï¼Œåœ¨CSMAçš„åŸºç¡€ä¸Šå¢åŠ collision avoidance**

- ä½†ç”±äºä¸å¯èƒ½é¿å…æ‰€æœ‰ç¢°æ’ï¼Œå¹¶ä¸”æ— çº¿ä¿¡é“è¯¯ç ç‡è¾ƒé«˜ï¼Œ802.11æ ‡å‡†è¿˜ä½¿ç”¨äº†==æ•°æ®é“¾è·¯å±‚ç¡®è®¤æœºåˆ¶ï¼ˆåœæ­¢-ç­‰å¾…åè®®ï¼‰==æ¥ä¿è¯æ•°æ®è¢«æ­£ç¡®æ¥æ”¶

- 802.11çš„MACå±‚æ ‡å‡†å®šä¹‰äº†ä¸¤ç§ä¸åŒçš„åª’ä½“æ¥å…¥æ§åˆ¶æ–¹å¼ï¼š

	- ==åˆ†å¸ƒå¼åè°ƒåŠŸèƒ½ distributed coordinationfunction DCF==
		åœ¨DCFä¸‹ï¼Œæ²¡æœ‰ä¸­å¿ƒç«™ç‚¹ï¼Œæ¯ä¸ªç«™ç‚¹ä½¿ç”¨CSMA/CAåè®®é€šè¿‡äº‰ç”¨ä¿¡é“æ¥è·å¾—å‘é€æƒï¼Œè¿™æ˜¯802.11å®šä¹‰çš„é»˜è®¤æ–¹å¼
	- ==point coordination functionç‚¹åè°ƒåŠŸèƒ½PCF==
		é‡‡ç”¨é›†ä¸­æ§åˆ¶çš„æ¥å…¥ç®—æ³•ï¼ˆä¸€èˆ¬åœ¨Access Pointå®ç°é›†ä¸­æ§åˆ¶ï¼‰ï¼Œå¯é€‰æ–¹å¼ï¼Œå®é™…è¾ƒå°‘ä½¿ç”¨

	

#### å¸§é—´é—´éš”

- 802.11æ ‡å‡†è§„å®šï¼Œæ‰€æœ‰ç«™ç‚¹å¿…é¡»æŒç»­æ£€æµ‹åˆ°ä¿¡é“ç©ºé—²ä¸€æ®µæ—¶é—´æ‰èƒ½å‘é€å¸§ï¼Œè¿™æ®µæ—¶é—´ç§°ä¸ºå¸§é—´é—´éš”IFS
- IFSçš„é•¿çŸ­å–å†³äºç«™ç‚¹è¦å‘é€åˆ°å¸§çš„ç±»å‹
	- é«˜ä¼˜å…ˆçº§å¸§ç­‰å¾…æ—¶é—´çŸ­ï¼Œæœ‰é™å‘é€æƒ
	- ä½ä¼˜å…ˆçº§å¸§ç­‰å¾…æ—¶é—´é•¿ï¼Œæ¨è¿Ÿå‘é€ï¼Œå‡å°‘å‘ç”Ÿç¢°æ’çš„å¯èƒ½
- å¸¸ç”¨çš„å¸§é—´é—´éš”
	- ==çŸ­å¸§é—´é—´éš”SIFS==28Î¼sï¼Œæœ€çŸ­çš„å¸§é—´é—´éš”ï¼Œç”¨æ¥åˆ†éš”å¼€å±äºä¸€æ¬¡å¯¹è¯çš„å„å¸§ã€‚
		ä¸€ä¸ªç«™ç‚¹åº”è¯¥èƒ½åœ¨è¿™æ®µæ—¶é—´ä»å‘é€æ–¹å¼åˆ‡æ¢åˆ°æ¥æ”¶æ–¹å¼
		ä½¿ç”¨SIFSçš„å¸§ç±»å‹æœ‰ACKå¸§ã€CTSå¸§ã€ç”±è¿‡é•¿çš„MACå¸§åˆ†ç‰‡åçš„æ•°æ®å¸§ã€ä»¥åŠæ‰€æœ‰å›ç­”AccessPointæ¢å¯»çš„å¸§å’Œåœ¨PCFæ–¹å¼æ¥å…¥ç‚¹APå‘é€å‡ºçš„ä»»ä½•å¸§
	- ==DCFå¸§é—´é—´éš”DIFS128Î¼s==ï¼Œå®ƒæ¯”SIFSé•¿çš„å¤šï¼Œåœ¨DCFæ–¹å¼ä¸­ç”¨æ¥å‘é€æ•°æ®å¸§å’Œç®¡ç†å¸§



#### CSMA/CAçš„é€€é¿ç®—æ³•

- åœ¨æ‰§è¡Œé€€é¿ç®—æ³•æ—¶ï¼Œç«™ç‚¹ä¸ºé€€é¿è®¡æ—¶å™¨è®¾ç½®ä¸€ä¸ªéšæœºçš„é€€é¿æ—¶é—´ï¼š
	- é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´å‡å°åˆ°0æ—¶ï¼Œå¼€å§‹å‘é€æ•°æ®
	- å½“é€€é¿è®¡æ—¶å™¨çš„æ—¶é—´è¿˜æ²¡æœ‰å‡å°åˆ°0æ—¶ï¼Œä¿¡é“åˆè½¬ä¸ºå¿™çŠ¶æ€ï¼Œè¿™æ—¶å†»ç»“æ•°å€¼ï¼Œç­‰å†æ¬¡ç©ºé—²å†ç»è¿‡DIFSåï¼Œç»§ç»­å¯åŠ¨é€€é¿è®¡æ—¶å™¨
- ç¬¬iæ¬¡é€¼é€€ï¼Œé€¼é€€æ—¶é—´åœ¨æ—¶éš™ç¼–å·{0,1,â€¦,$2^{2+i}-1$}éšæœºé€‰ä¸€ä¸ªï¼Œå†âœ–ï¸åŸºæœ¬é€€é¿æ—¶é—´ï¼ˆä¸€ä¸ªæ—¶éš™çš„é•¿åº¦ï¼‰å°±å¯ä»¥å¾—åˆ°éšæœºçš„é€€é¿æ—¶é—´ï¼Œè¿™æ ·æ˜¯ä¸ºäº†å‡å°‘ä¸åŒç«™ç‚¹é€‰æ‹©ç›¸åŒé€€é¿æ—¶é—´çš„æ¦‚ç‡
	å½“æ—¶éš™ç¼–å·è¾¾åˆ°255ï¼ˆç¬¬6æ¬¡é€€é¿ï¼‰å°±ä¸å†å¢åŠ 

![](../images/è®¡ç½‘å›¾11.jpg)



#### CSMA/CAåè®®çš„ä¿¡é“é¢„çº¦ï¼ˆRTS/CTSï¼‰å’Œè™šæ‹Ÿè½½æ³¢ç›‘å¬(VCS)

- ä¸ºäº†å°½å¯èƒ½å‡å°‘ç¢°æ’çš„æ¦‚ç‡å’Œé™ä½ç¢°æ’çš„å½±å“ï¼Œ802.11æ ‡å‡†å…è®¸è¦å‘é€æ•°æ®çš„ç«™ç‚¹å¯¹ä¿¡é“è¿›è¡Œé¢„çº¦
	- æºç«™åœ¨å‘é€æ•°æ®å¸§ä¹‹å‰å…ˆå‘é€ä¸€ä¸ªçŸ­çš„æ§åˆ¶å¸§ï¼ŒRTS(request to send)ï¼ŒåŒ…æ‹¬æºåœ°å€ã€ç›®çš„åœ°å€ï¼ˆåŒ…æ‹¬ç›¸åº”çš„ç¡®è®¤å¸§ï¼‰æ‰€éœ€çš„æŒç»­æ—¶é—´
	- è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°RTSï¼Œå¹¶ä¸”åª’ä½“ç©ºé—²ï¼Œå°±å‘é€ä¸€ä¸ªç›¸åº”æ§åˆ¶å¸§ï¼Œ==å…è®¸å‘é€CTS(clear to send)==ï¼Œä¹ŸåŒ…æ‹¬è¿™æ¬¡é€šä¿¡çš„æŒç»­æ—¶é—´ï¼ˆä»RTSä¸­å¤åˆ¶ï¼‰
	- æºç«™æ”¶åˆ°CTSå¸§åï¼Œå†æŒç»­ä¸€æ®µSIFSï¼Œå°±å¯ä»¥å‘é€å¸§
	- è‹¥ç›®çš„ç«™æ­£ç¡®æ”¶åˆ°äº†æ¥è‡ªæºç«™çš„æ•°æ®å¸§ï¼Œç­‰å¾…SIFSåï¼Œå‘æºç«™å‘é€ç¡®è®¤å¸§ACK
- é™¤äº†æºç«™å’Œç›®çš„ç«™ï¼Œå…¶ä½™ç«™æ”¶åˆ°CTSæˆ–è€…æ•°æ®å¸§åå°±æ¨è¿Ÿæ¥å…¥åˆ°æ— çº¿å±€åŸŸç½‘ä¸­ï¼Œè¿™æ ·æ¥ç¡®ä¿æºç«™å’Œç›®çš„ç«™çš„é€šä¿¡ä¸ä¼šå—å¹²æ‰°
- å¦‚æœRTSå‘ç”Ÿç¢°æ’ï¼Œæºç«™å°±ä¸ä¼šæ”¶åˆ°CTSï¼Œéœ€è¦æ‰§è¡Œé€€é¿ç®—æ³•é‡ä¼ RTS
- ç”±äºRTSå’ŒCTSéƒ½å¾ˆçŸ­ï¼Œå‘ç”Ÿç¢°æ’çš„æ¦‚ç‡ã€ç¢°æ’äº§ç”Ÿçš„å¼€é”€å¾ˆå°ã€‚
	ä½†å¯¹äºä¸€èˆ¬çš„æ•°æ®å¸§ï¼Œå…¶å‘é€æ—¶å»¶å¾€å¾€å¤§äºä¼ æ’­æ—¶å»¶ï¼ˆå±€åŸŸç½‘ï¼‰ï¼Œç¢°æ’æ¦‚ç‡å¾ˆå¤§æµªè´¹æ—¶é—´å¤šï¼Œå› æ­¤é¢„çº¦æ˜¯å€¼å¾—çš„
- 802.11æ ‡å‡†è§„å®šäº†3ç§æƒ…å†µä¾›ç”¨æˆ·é€‰æ‹©ï¼š
	- ä½¿ç”¨RTSå’ŒCTSå¸§
	- ä¸ä½¿ç”¨RTSå’ŒCTS
	- åªæœ‰å½“æ•°æ®é•¿åº¦è¶…è¿‡ç‰¹å®šæ•°å€¼æ‰ä½¿ç”¨
- é™¤äº†RTSå’ŒCTSï¼Œæ•°æ®å¸§ä¹Ÿä¼šæºå¸¦é€šä¿¡éœ€è¦æŒç»­çš„æ—¶é—´ï¼Œè¿™æˆä¸º802.11çš„è™šæ‹Ÿè½½æ³¢ç›‘å¬VCSæœºåˆ¶
- ç«™ç‚¹åªè¦ç›‘å¬åˆ°RTS CTS æ•°æ®å¸§ä¸­ä»»ä½•ä¸€ä¸ªï¼Œå°±èƒ½å¾—çŸ¥é€šä¿¡æŒç»­æ—¶é—´ï¼Œè€Œä¸éœ€è¦çœŸæ­£å¬åˆ°ä¿¡é“ä¸Šçš„ä¿¡å·ï¼Œå› æ­¤VCSèƒ½å‡å°‘éšè”½ç«™å¸¦æ¥çš„ç¢°æ’é—®é¢˜

---

## 3.7 MACåœ°å€ã€IPåœ°å€ä»¥åŠARPåè®®

### 3.7.1 MACåœ°å€

- å¤šä¸ªä¸»æœºè¿æ¥åœ¨åŒä¸€ä¸ªå¹¿æ’­ä¿¡é“ä¸Šï¼Œè¦æƒ³å®ç°ä¸¤ä¸ªä¸»æœºä¹‹é—´çš„é€šä¿¡ï¼Œåˆ™æ¯ä¸ªä¸»æœºå¿…é¡»è¦æœ‰ä¸€ä¸ªå”¯ä¸€çš„æ ‡è¯†ï¼Œå³ä¸€ä¸ªæ•°æ®é“¾è·¯å±‚åœ°å€
- MACåœ°å€ä¸€èˆ¬è¢«å›ºåŒ–åœ¨ç½‘å¡çš„ç”µå¯æ“¦åªè¯»å­˜å‚¨å™¨EEPROMä¸­ï¼Œå› æ­¤MACåœ°å€ä¹Ÿè¢«ç§°ä¸º==ç¡¬ä»¶åœ°å€==
- æœ‰æ—¶ä¹Ÿè¢«ç§°ä¸º==ç‰©ç†åœ°å€==ï¼ˆå¹¶éç‰©ç†å±‚ï¼‰
- ä¸€èˆ¬æƒ…å†µä¸‹ï¼Œç”¨æˆ·ä¸»æœºæœ‰æœ‰çº¿å±€åŸŸç½‘é€‚é…å™¨å’Œæ— çº¿å±€åŸŸç½‘é€‚é…å™¨ï¼Œæ¯ä¸ªé€‚é…å™¨éƒ½æœ‰å”¯ä¸€çš„MACåœ°å€ï¼Œè€Œäº¤æ¢æœºã€è·¯ç”±å™¨æœ‰æ›´å¤šçš„ç½‘ç»œæ¥å£æ‰€ä»¥æœ‰æ›´å¤šçš„MACåœ°å€ï¼Œ**ä¸¥æ ¼æ¥è¯´ï¼ŒMACåœ°å€æ˜¯å¯¹ç½‘ç»œä¸Šå„æ¥å£çš„å”¯ä¸€æ ‡è¯†è€Œéå¯¹ç½‘ç»œä¸Šè®¾å¤‡çš„å”¯ä¸€æ ‡è¯†**



#### IEEE 802å±€åŸŸç½‘çš„MACåœ°å€æ ¼å¼

- å‰ä¸‰å­—èŠ‚ï¼šç»„ç»‡å”¯ä¸€æ ‡è¯†ç¬¦ OUI
	>ç”±IEEEçš„æ³¨å†Œç®¡ç†æœºæ„åˆ†é…

- åä¸‰å­—èŠ‚ï¼šç½‘ç»œæ¥å£æ ‡è¯†ç¬¦ 
	>ç”±è·å¾—OUIçš„å‚å•†è‡ªè¡Œåˆ†é…



ç¬¬ä¸€å­—èŠ‚b1ä½
>0:å…¨çƒç®¡ç†
>
>1:æœ¬åœ°ç®¡ç†

b0ä½
>0:å•æ’­åœ°å€(ä¸€å¯¹ä¸€é€šä¿¡)
>
>1:å¤šæ’­åœ°å€ï¼ˆä¸€å¯¹å¤šçš„é€šä¿¡ï¼Œæ¥æ”¶ç»„ç”±å¤šä¸ªè®¾å¤‡ç»„æˆï¼‰

å¿«é€Ÿåˆ¤æ–­å¤šæ’­æ–¹æ³•ï¼šè¯¥ä½16è¿›åˆ¶æ•°ä¸èƒ½æ•´é™¤2ï¼Œä¸ºå¤šæ’­ 



#### IEEE 802å±€åŸŸç½‘çš„MACåœ°å€å‘é€é¡ºåº

- å­—èŠ‚å‘é€é¡ºåºï¼šç¬¬ä¸€å­—èŠ‚â€“>ç¬¬å…­å­—èŠ‚
- å­—èŠ‚å†…çš„æ¯”ç‰¹å‘é€é¡ºåºï¼šb0â€“>b7



#### éšæœºMACåœ°å€

---

### 3.7.2 IPåœ°å€

IPåœ°å€æ˜¯Internetä¸Šçš„ä¸»æœºå’Œè·¯ç”±å™¨æ‰€ä½¿ç”¨çš„åœ°å€ï¼Œç”¨äºæ ‡è¯†ä¸¤éƒ¨åˆ†ä¿¡æ¯ï¼š

- ç½‘ç»œç¼–å·ï¼šæ ‡è¯†å› ç‰¹ç½‘ä¸Šæ•°ä»¥ç™¾ä¸‡è®¡çš„ç½‘ç»œ
- ä¸»æœºç¼–å·ï¼šæ ‡è¯†åŒä¸€ç½‘ç»œä¸Šä¸åŒä¸»æœºï¼ˆæˆ–è·¯ç”±å™¨å„æ¥å£ï¼‰



- MACåœ°å€ä¸å…·å¤‡åŒºåˆ†ä¸åŒç½‘ç»œçš„åŠŸèƒ½ï¼Œè€ŒIPåœ°å€æœ‰è¿™ä¸ªåŠŸèƒ½
- å¦‚æœä¸æ¥å…¥Internet,å¯ä»¥åªä½¿ç”¨MACåœ°å€ï¼Œå¦åˆ™MACåœ°å€å’ŒIPåœ°å€éƒ½éœ€è¦ä½¿ç”¨

ä»ç½‘ç»œä½“ç³»çœ‹IPåœ°å€å’ŒMACåœ°å€ï¼š

![](../images/è®¡ç½‘å›¾12.jpg)



![](../images/è®¡ç½‘å›¾13.jpg)

ç”±ä¸Šå›¾å¯ä»¥çœ‹å‡ºï¼š

- æ•°æ®åŒ…è½¬å‘è¿‡ç¨‹ä¸­ï¼Œ**æºIPåœ°å€å’Œç›®çš„IPåœ°å€ä¿æŒä¸å˜**
- æºMACåœ°å€å’Œç›®çš„MACåœ°å€é€ä¸ªé“¾è·¯ï¼ˆæˆ–é€ä¸ªç½‘ç»œï¼‰æ”¹å˜



### 3.7.3 ARPåè®®ï¼ˆaddress resolution protocolï¼‰

> ARP åè®®çš„ä½œç”¨æ˜¯ï¼šé€šè¿‡ IP åœ°å€æŸ¥æ‰¾å¯¹åº”çš„ MAC åœ°å€

æ­¥éª¤ï¼š

1. ä¸»æœºä¸€ARPè¯·æ±‚å¹¿æ’­ï¼ˆå¹¿æ’­éœ€è¦çš„ç›®çš„ä¸»æœºï¼‰

2. ä¸»æœºäºŒARPç›¸åº”å•æ’­ï¼ˆç›®çš„ä¸»æœºå›åº”ï¼Œå•æ’­ç»™è¯·æ±‚æ–¹ï¼‰

3. ä¸»æœºä¸€æ›´æ–°ARPç¼“å­˜è¡¨ï¼ˆè®°ä½ä¸»æœºäºŒçš„MACåœ°å€ï¼‰
	>æ¯ä¸ªä¸»æœºä¼šç»´æŠ¤ä¸€å¼ ARPè¡¨æ ¼ï¼Œæœ‰æ—¶é—´é™åˆ¶ï¼Œé¿å…æ¯æ¬¡éƒ½é‡æ–°å¹¿æ’­ï¼Œæé«˜æ•ˆç‡
	>ç¼“å­˜è¡¨ä¸­çš„è®°å½•éƒ½æœ‰ç±»å‹ï¼Œåˆ†ä¸º
	>
	>>1. åŠ¨æ€ï¼šè‡ªåŠ¨è·å–ï¼Œç”Ÿå‘½å‘¨æœŸé»˜è®¤ä¸º2åˆ†é’Ÿ
	>>2. é™æ€ï¼šæ‰‹å·¥é…ç½®ï¼Œä¸åŒæ“ä½œç³»ç»Ÿä¸‹çš„ç”Ÿå‘½å‘¨æœŸä¸åŒ



æ³¨æ„ï¼š

- ARPåè®®æ˜¯é€æ®µé“¾è·¯è¿›è¡Œçš„ï¼Œä¸èƒ½è·¨ç½‘ç»œ
- ç”±äºARPæ²¡æœ‰è®¤è¯æœºåˆ¶ï¼Œæ‰€ä»¥å­˜åœ¨ARPæ¬ºéª—æˆ–æ”»å‡»é—®é¢˜

---

## 3.8 é›†çº¿å™¨å’Œäº¤æ¢æœºçš„åŒºåˆ«

- ä½¿ç”¨åŒç»çº¿å’Œé›†çº¿å™¨HUBçš„æ˜Ÿå‹ä»¥å¤ªç½‘
	>- ä½¿ç”¨é›†çº¿å™¨çš„ä»¥å¤ªç½‘åœ¨é€»è¾‘ä¸Šä¾ç„¶æ˜¯ä¸€ä¸ªæ€»çº¿ç½‘ï¼Œå„ç«™ç‚¹å…±äº«æ€»çº¿èµ„æºï¼Œä½¿ç”¨ CSMA/CDåè®®
	>- é›†çº¿å™¨ä¹‹å·¥ä½œåœ¨ç‰©ç†å±‚ï¼Œæ¯ä¸ªæ¥å£ä»…ä»…ç®€å•çš„è½¬å‘æ¯”ç‰¹ï¼Œä¸è¿›è¡Œç¢°æ’æ£€æµ‹
	>- é›†çº¿å™¨æœ‰å°‘é‡çš„å®¹é”™èƒ½åŠ›å’Œç½‘ç»œç®¡ç†åŠŸèƒ½

- ä½¿ç”¨HUBåœ¨ç‰©ç†å±‚æ‰©å±•ä»¥å¤ªç½‘
	>HUBè¿æ¥HUB
	>
	>A ç»™ B å‘æ•°æ®ï¼ŒC ä¹Ÿèƒ½æ”¶åˆ°ï¼ˆè™½ç„¶ä¸æ˜¯ç»™å®ƒçš„ï¼‰ï¼›å¦‚æœ B å’Œ C åŒæ—¶å‘ï¼Œä¼šâ€œæ’è½¦â€

- ä»¥å¤ªç½‘äº¤æ¢æœº
	>SWITCHï¼ŒA ç»™ B å‘ï¼Œåªæœ‰ B æ”¶åˆ°ï¼›C å®Œå…¨ä¸çŸ¥é“è¿™ä»¶äº‹ï¼Œå¤§å®¶å„èµ°å„è·¯ï¼Œäº’ä¸å¹²æ‰°

	- ä»¥å¤ªç½‘äº¤æ¢æœºé€šå¸¸æœ‰å¤šä¸ªæ¥å£ï¼Œæ¯ä¸ªæ¥å£éƒ½å¯ä»¥ç›´æ¥ä¸ä¸€å°ä¸»æœºæˆ–å¦ä¸€ä¸ªä»¥å¤ªç½‘äº¤æ¢æœºç›¸è¿ï¼Œä¸€èˆ¬éƒ½å·¥ä½œåœ¨å…¨åŒå·¥æ–¹å¼
	- ä»¥å¤ªç½‘äº¤æ¢æœºæœ‰å¹¶è¡Œæ€§ï¼Œèƒ½åŒæ—¶è¿é€šå¤šå¯¹æ¥å£ï¼Œä½¿å¤šå¯¹ä¸»æœºèƒ½åŒæ—¶é€šä¿¡ï¼Œæ— ç¢°æ’ï¼ˆä¸ä½¿ç”¨CSMA/CDåè®®ï¼‰
	- ä»¥å¤ªç½‘äº¤æ¢æœºä¸€èˆ¬æœ‰å¤šç§é€Ÿç‡çš„æ¥å£
	- SWITCHå·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆä¹ŸåŒ…æ‹¬ç‰©ç†å±‚ï¼‰ï¼Œæ”¶åˆ°å¸§åï¼Œåœ¨å¸§äº¤æ¢è¡¨ä¸­æŸ¥æ‰¾å¸§çš„ç›®çš„MACåœ°å€æ‰€å¯¹åº”çš„æ¥å£å·ï¼Œç„¶åé€šè¿‡è¯¥æ¥å£è½¬å‘å¸§
	- æ˜¯ä¸€ç§å³æ’å³ç”¨è®¾å¤‡ï¼Œå†…éƒ¨çš„å¸§äº¤æ¢è¡¨æ˜¯é€šè¿‡è‡ªå­¦ä¹ ç®—æ³•è‡ªåŠ¨åœ°å»ºç«‹èµ·æ¥çš„
	- å¸§çš„ä¸¤ç§è½¬å‘æ–¹å¼ï¼š
		- å­˜å‚¨è½¬å‘
		- ç›´é€šäº¤æ¢ï¼šé‡‡ç”¨åŸºäºç¡¬ä»¶çš„äº¤å‰çŸ©é˜µï¼ˆäº¤æ¢æ—¶å»¶å¾ˆå°ï¼Œä¸æ£€æŸ¥æ˜¯å¦æœ‰å·®é”™ï¼‰

| é¡¹ç›®         | é›†çº¿å™¨ Hub               | äº¤æ¢æœº Switch                  |
| ------------ | ------------------------ | ------------------------------ |
| å·¥ä½œå±‚æ¬¡     | ç‰©ç†å±‚ï¼ˆç¬¬1å±‚ï¼‰          | æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬2å±‚ï¼‰            |
| æ•°æ®è½¬å‘æ–¹å¼ | å¹¿æ’­ï¼ˆè°éƒ½èƒ½å¬è§ï¼‰       | å®šå‘è½¬å‘ï¼ˆåªå‘ç»™ç›®æ ‡ï¼‰         |
| MACåœ°å€è¡¨    | âŒ æ— ï¼ˆä¸è®°åœ°å€ï¼‰         | âœ… æœ‰ï¼ˆå­¦ä¹ +å­˜å‚¨MACåœ°å€ï¼‰       |
| æ€§èƒ½         | å·®ï¼Œå®¹æ˜“å†²çªï¼ˆå…±äº«å¸¦å®½ï¼‰ | å¥½ï¼Œæ¯ç«¯å£ç‹¬äº«å¸¦å®½ï¼Œæ”¯æŒå…¨åŒå·¥ |
| æ˜¯å¦æ™ºèƒ½     | ä½ï¼ˆå°±æ˜¯ä¸ªç”µçº¿åˆ†æµå™¨ï¼‰   | é«˜ï¼ˆå¯å­¦ä¹ MACï¼Œåˆ¤æ–­è½¬å‘è·¯å¾„ï¼‰  |
| å…¸å‹åº”ç”¨åœºæ™¯ | è€å¼å°å‹å±€åŸŸç½‘           | å‡ ä¹æ‰€æœ‰ç°ä»£ä»¥å¤ªç½‘             |

- ä½¿ç”¨äº¤æ¢æœºå¯ä»¥æ‰©å¤§å¹¿æ’­åŸŸï¼Œ==éš”ç¦»ç¢°æ’åŸŸ==
- é›†çº¿å™¨æ‰©å¤§å¹¿æ’­åŸŸåŒæ—¶æ‰©å¤§ç¢°æ’åŸŸ

---

## 3.9 ä»¥å¤ªç½‘äº¤æ¢æœºè‡ªå­¦ä¹ å’Œè½¬å‘å¸§çš„æµç¨‹

ä»¥å¤ªç½‘äº¤æ¢æœºæ˜¯ä¸€ç§**å·¥ä½œåœ¨æ•°æ®é“¾è·¯å±‚ï¼ˆç¬¬äºŒå±‚ï¼‰**çš„ç½‘ç»œè®¾å¤‡ï¼Œå…¶æ ¸å¿ƒåŠŸèƒ½åŒ…æ‹¬ï¼š**è‡ªå­¦ä¹  MAC åœ°å€è¡¨**ä¸åŸºäº MAC åœ°å€çš„å¸§è½¬å‘ã€‚å…¶ä¸»è¦ç›®çš„æ˜¯å®ç°é«˜æ•ˆã€å®šå‘çš„æ•°æ®å¸§è½¬å‘ï¼Œå‡å°‘å¹¿æ’­ï¼Œæé«˜å±€åŸŸç½‘é€šä¿¡æ•ˆç‡ã€‚

------

### ä¸€ã€MACåœ°å€è¡¨ä¸è‡ªå­¦ä¹ æœºåˆ¶

äº¤æ¢æœºå†…éƒ¨ç»´æŠ¤ä¸€å¼ **MACåœ°å€è½¬å‘è¡¨**ï¼ˆMAC Address Tableï¼‰ï¼Œç”¨äºè®°å½•å„è®¾å¤‡çš„ MAC åœ°å€ä¸å…¶æ‰€è¿æ¥çš„äº¤æ¢æœºç«¯å£ä¹‹é—´çš„å¯¹åº”å…³ç³»ã€‚

#### åœ°å€å­¦ä¹ è¿‡ç¨‹

å½“äº¤æ¢æœºæ¥æ”¶åˆ°ä¸€å¸§æ•°æ®æ—¶ï¼Œé¦–å…ˆä¼šæ£€æŸ¥è¯¥å¸§çš„**æº MAC åœ°å€**å’Œ**æ¥æ”¶ç«¯å£**ï¼š

- è‹¥è¯¥æº MAC åœ°å€å°šæœªåœ¨ MAC è¡¨ä¸­è®°å½•ï¼Œäº¤æ¢æœºä¼šå°†è¯¥åœ°å€ä¸æ¥æ”¶ç«¯å£ç»‘å®šï¼Œå¹¶åŠ å…¥ MAC è¡¨ï¼›
- è‹¥è¯¥åœ°å€å·²å­˜åœ¨äºè¡¨ä¸­ä½†ç»‘å®šç«¯å£ä¸åŒï¼Œåˆ™äº¤æ¢æœºä¼š**æ›´æ–°ç»‘å®šç«¯å£**ï¼›
- æ­¤è¿‡ç¨‹ç§°ä¸º **åœ°å€å­¦ä¹ ï¼ˆMAC Learningï¼‰**ã€‚

##### ç¤ºä¾‹

è‹¥ä¸»æœº Aï¼ˆMAC_Aï¼‰é€šè¿‡ç«¯å£1å‘äº¤æ¢æœºå‘é€æ•°æ®å¸§ï¼Œäº¤æ¢æœºå°†è®°å½•ï¼š

```nginx
MAC_A â†’ ç«¯å£1
```

------

### äºŒã€åŸºäºç›®çš„åœ°å€çš„å¸§è½¬å‘

å®Œæˆåœ°å€å­¦ä¹ åï¼Œäº¤æ¢æœºæ ¹æ®æ•°æ®å¸§çš„**ç›®çš„ MAC åœ°å€**è¿›è¡ŒæŸ¥è¡¨ä¸è½¬å‘ã€‚

#### ï¼ˆä¸€ï¼‰æŸ¥è¡¨è½¬å‘é€»è¾‘

1. **æŸ¥æ‰¾ç›®çš„ MAC åœ°å€æ˜¯å¦å­˜åœ¨äº MAC è¡¨ä¸­**ï¼›
2. è‹¥æ‰¾åˆ°åŒ¹é…é¡¹ï¼š
	- å°†è¯¥æ•°æ®å¸§**ä»…è½¬å‘è‡³å¯¹åº”ç«¯å£**ï¼ˆ**å®šå‘è½¬å‘**ï¼‰ï¼›
3. è‹¥æœªæ‰¾åˆ°åŒ¹é…é¡¹ï¼š
	- æ‰§è¡Œ**æ³›æ´ªæ“ä½œï¼ˆFloodingï¼‰**ï¼Œå³å°†å¸§å¹¿æ’­è‡³é™¤æ¥æ”¶ç«¯å£å¤–çš„æ‰€æœ‰ç«¯å£ï¼›
	- é€šå¸¸å‘ç”Ÿåœ¨ç½‘ç»œåˆå§‹é˜¶æ®µæˆ–ç›®æ ‡ä¸»æœºå°šæœªå‘äº¤æ¢æœºå‘é€è¿‡æ•°æ®ã€‚

------

### ä¸‰ã€MACåœ°å€è¡¨çš„è€åŒ–æœºåˆ¶

ä¸ºäº†ä¿è¯ MAC è¡¨çš„å®æ—¶æ€§ä¸å‡†ç¡®æ€§ï¼Œäº¤æ¢æœºé€šå¸¸å¯¹è¡¨é¡¹è®¾ç½®è€åŒ–å®šæ—¶å™¨ï¼š

- è‹¥æŸä¸ªåœ°å€åœ¨ä¸€æ®µæ—¶é—´ï¼ˆå¦‚300ç§’ï¼‰å†…æœªå†æ¬¡å‡ºç°ï¼Œç³»ç»Ÿå°†è‡ªåŠ¨æ¸…é™¤è¯¥è®°å½•ï¼›
- è¯¥æœºåˆ¶æœ‰åŠ©äºåº”å¯¹ä¸»æœºè¿ç§»æˆ–ç½‘ç»œç»“æ„å˜æ›´

------

### å››ã€å¹¿æ’­ä¸æ³›æ´ªçš„åŒºåˆ«

- **å¹¿æ’­å¸§ï¼ˆBroadcast Frameï¼‰**ï¼šç›®æ ‡åœ°å€ä¸º `FF:FF:FF:FF:FF:FF`ï¼Œä»£è¡¨ç½‘ç»œå†…æ‰€æœ‰ä¸»æœºï¼›
- **æ³›æ´ªï¼ˆFloodingï¼‰**ï¼šæ˜¯äº¤æ¢æœºå¯¹æœªçŸ¥ç›®çš„åœ°å€çš„åº”æ€¥å¤„ç†æ–¹å¼ï¼Œå³å°†å¸§å‘é€è‡³é™¤æ¥æ”¶ç«¯å£å¤–çš„æ‰€æœ‰ç«¯å£ï¼Œä½†ä¸æ”¹å˜å¸§çš„ç›®æ ‡åœ°å€ï¼›
- æ³›æ´ªæ“ä½œåœ¨æŸäº›æƒ…å†µä¸‹å¯èƒ½å¯¼è‡´å¹¿æ’­é£æš´ï¼Œå› æ­¤äº¤æ¢æœºåœ°å€å­¦ä¹ èƒ½åŠ›è‡³å…³é‡è¦ã€‚

---

## 3.10 ä»¥å¤ªç½‘äº¤æ¢æœºçš„ç”Ÿæˆæ ‘åè®®STP

- å¦‚ä½•æé«˜ä»¥å¤ªç½‘çš„å¯é æ€§ï¼Ÿ
	>**å†—ä½™é“¾è·¯**
	>
	>ä½†æ˜¯ä¼šå¸¦æ¥è´Ÿé¢æ•ˆåº”â€”â€”å½¢æˆç½‘ç»œç¯è·¯
	>
	>ç½‘ç»œç¯è·¯ä¼šå¸¦æ¥ä»¥ä¸‹é—®é¢˜ï¼š
	>
	>1. å¹¿æ’­é£æš´
	>	å¤§é‡æ¶ˆè€—ç½‘ç»œèµ„æºï¼Œæ˜¯çš„ç½‘ç»œæ— æ³•æ­£å¸¸è½¬å‘å…¶ä»–æ•°æ®å¸§
	>2. ä¸»æœºæ”¶åˆ°é‡å¤çš„å¹¿æ’­å¸§
	>3. äº¤æ¢æœºçš„å¸§äº¤æ¢è¡¨éœ‡è¡ï¼ˆæ¼‚ç§»ï¼‰
	>	ç”±äºé‡å¤æ”¶åˆ°ï¼Œé”™è¯¯è®°å½•ä¼šåå¤éœ‡è¡

- è€Œä½¿ç”¨ç”Ÿæˆæ ‘åè®®ï¼ˆSpanning Tree Protocolï¼‰å¯ä»¥å†å¢åŠ å†—ä½™é“¾è·¯çš„åŒæ—¶é¿å…ç½‘ç»œç¯è·¯å¸¦æ¥çš„é—®é¢˜
	>- ä¸ç®¡äº¤æ¢æœºé‡‡ç”¨æ€æ ·çš„ç‰©ç†è¿æ¥ï¼Œäº¤æ¢æœºéƒ½èƒ½è‡ªåŠ¨è®¡ç®—å¹¶æ„å»ºä¸€ä¸ªé€»è¾‘ä¸Šæ²¡æœ‰ç¯è·¯çš„ç½‘ç»œï¼Œå…¶é€»è¾‘æ‹“æ‰‘ç»“æ„å¿…é¡»æ˜¯æ ‘å½¢çš„ï¼ˆ==æ²¡æœ‰é€»è¾‘ç¯è·¯==ï¼‰
	>- æœ€ç»ˆç”Ÿæˆçš„æ ‘å½¢é€»è¾‘æ‹“æ‰‘è¦ç¡®ä¿è”é€šæ•´ä¸ªç½‘ç»œ
	>- å½“é¦–æ¬¡è¿æ¥äº¤æ¢æœºæˆ–è€…ç½‘ç»œæ‹“æ‰‘å‘ç”Ÿå˜åŒ–æ—¶ï¼Œäº¤æ¢æœºéƒ½ä¼šè¿›è¡Œç”Ÿæˆæ ‘çš„é‡æ–°è®¡ç®—

## 3.11 VLAN

### 3.11.1 è™šæ‹Ÿå±€åŸŸç½‘VLANæ¦‚è¿°

å·¨å¤§çš„å¹¿æ’­åŸŸä¼šæœ‰å¾ˆå¤šå¼Šç«¯ï¼š

1. å¹¿æ’­é£æš´
2. éš¾ä»¥ç®¡ç†å’Œç»´æŠ¤
3. æ½œåœ¨çš„å®‰å…¨é—®é¢˜



åˆ†å‰²å¹¿æ’­åŸŸçš„æ–¹æ³•ï¼š

1. router
	>æˆæœ¬é«˜

2. VLANï¼ˆvirtual local area networkï¼‰
	>ä¸€ç§å°†å±€åŸŸç½‘å†…çš„è®¾å¤‡åˆ’åˆ†æˆä¸ç‰©ç†ä½ç½®æ— å…³çš„é€»è¾‘ç»„çš„æŠ€æœ¯ï¼Œè¿™äº›é€»è¾‘ç»„æœ‰æŸäº›å…±åŒçš„éœ€æ±‚

### 3.11.2 VLANçš„å®ç°æœºåˆ¶

#### IEEE 802.1Qå¸§

- å¯¹ä»¥å¤ªç½‘çš„MACå¸§è¿›è¡Œäº†æ‹“å±•ï¼Œ==æ’å…¥äº†å››ä¸ªå­—èŠ‚çš„VLANæ ‡è®°==

- VLANæ ‡è®°çš„æœ€ååäºŒæ¯”ç‰¹ç§°ä¸º==VLANæ ‡è¯†ç¬¦VID==ï¼Œå®ƒå”¯ä¸€çš„è¡¨ç¤ºäº†ä»¥å¤ªç½‘å¸§å±äºå“ªä¸€ä¸ªVLAN
	>- VIDå–å€¼èŒƒå›´ï¼š0-$2^{12}-1$
	>	æœ‰æ•ˆå–å€¼èŒƒå›´1-4094
	>
	>- 802.1Qå¸§æ˜¯ç”±switchæ¥å¤„ç†ï¼Œè€Œä¸æ˜¯ç”¨æˆ·ä¸»æœºæ¥å¤„ç†
	>
	>- å½“äº¤æ¢æœºæ”¶åˆ°æ™®é€šçš„ä»¥å¤ªç½‘å¸§æ—¶ï¼Œä¼šæ’å…¥å››å­—èŠ‚çš„VLANæ ‡è®°è½¬æ¢ä¸º802.1Qå¸§ï¼Œç®€ç§°â€œæ‰“æ ‡ç­¾â€
	>- å½“äº¤æ¢æœºè½¬å‘802.1Qå¸§æ—¶ï¼Œå¯èƒ½ä¼šåˆ é™¤VLANæ ‡è®°è½¬å˜ä¸ºæ™®é€šä»¥å¤ªç½‘å¸§ï¼Œç®€ç§°â€œå»æ ‡ç­¾â€



#### äº¤æ¢æœºçš„ç«¯å£ç±»å‹

- Access
	>- ä¸€èˆ¬ç”¨äºè¿æ¥ç”¨æˆ·è®¡ç®—æœº
	>- **åªèƒ½å±äºä¸€ä¸ªVLAN**
	>- ç«¯å£çš„PVIDå€¼ä¸ç«¯å£æ‰€å±VLANçš„IDç›¸åŒï¼Œé»˜è®¤ä¸º1
	>- æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šä¸€èˆ¬åªæ¥å—æ²¡æœ‰æ‰“æ ‡ç­¾çš„æ™®é€šMACå¸§ï¼Œæ ¹æ®æ¥æ”¶å¸§çš„PVIDç»™å¸§â€œæ‰“æ ‡ç­¾â€ï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDç›¸åŒ
	>- å‘é€å¤„ç†æ–¹æ³•ï¼šè‹¥å¸§ä¸­çš„VIDå’Œç«¯å£çš„PVIDç›¸ç­‰ï¼Œåˆ™â€œå»æ ‡ç­¾â€å¹¶è½¬å‘è¯¥å¸§ï¼Œå¦åˆ™ä¸è½¬å‘

- Trunk
	>- ä¸€èˆ¬ç”¨äºswitchä¹‹é—´æˆ–è€…switchå’Œrouterä¹‹é—´çš„äº’è¿
	>- å¯ä»¥å±äºå¤šä¸ªVLAN
	>- ç”¨æˆ·å¯ä»¥è®¾ç½®Trunkç«¯å£çš„PVIDå€¼ï¼Œé»˜è®¤å€¼ä¸º1
	>- å‘é€å¤„ç†æ–¹æ³•ï¼šå¯¹äºVIDç­‰äºPVIDçš„å¸§ï¼Œå»æ ‡ç­¾å†è½¬å‘
	>	VIDä¸ç­‰äºPVIDçš„å¸§ç›´æ¥è½¬å‘
	>- æ¥æ”¶å¤„ç†æ–¹æ³•ï¼šæ¥æ”¶æ²¡æœ‰æ‰“æ ‡ç­¾çš„å¸§ï¼Œæ ¹æ®æ¥å—å¸§çš„ç«¯å£çš„PVIDç»™å¸§æ‰“æ ‡ç­¾ï¼Œå­—æ®µä¸­çš„VIDå–å€¼ä¸ç«¯å£çš„PVIDä¸€è‡´
	>	æ¥æ”¶å·²æ‰“æ ‡ç­¾çš„å¸§

- Hybrid
	>ç›¸å½“äºAccess+Trunk
	>
	>- å‘é€æ–¹æ³•ï¼šæŸ¥çœ‹å¸§çš„VIDæ˜¯å¦å†ç«¯å£çš„â€œå»æ ‡ç­¾â€åˆ—è¡¨ä¸­
	>	- åœ¨ï¼Œåˆ™â€œå»æ ‡ç­¾â€è½¬å‘
	>	- ä¸åœ¨ï¼Œç›´æ¥è½¬å‘
	>- æ¥æ”¶æ–¹æ³•
	>	- æ¥æ”¶å·²ç»æ‰“äº†æ ‡ç­¾çš„å¸§
	>	- æ¥æ”¶æ²¡æœ‰æ‰“æ ‡ç­¾çš„å¸§ï¼Œæ‰“ä¸Šè‡ªå·±çš„æ ‡ç­¾

## 3.12 è®¡ç®—é¢˜

- 3-24 å‡å®šç«™ç‚¹Aå’ŒBåœ¨åŒä¸€ä¸ª10 Mbit/sä»¥å¤ªç½‘ç½‘æ®µä¸Šã€‚è¿™ä¸¤ä¸ªç«™ç‚¹ä¹‹é—´çš„ä¼ æ’­æ—¶å»¶ä¸º225æ¯”ç‰¹æ—¶é—´ã€‚ç°å‡å®šAå¼€å§‹å‘é€ä¸€å¸§ï¼Œå¹¶ä¸”åœ¨Aå‘é€ç»“æŸä¹‹å‰Bä¹Ÿå‘é€ä¸€å¸§ã€‚å¦‚æœAå‘é€çš„æ˜¯ä»¥å¤ªç½‘æ‰€å®¹è®¸çš„æœ€çŸ­çš„å¸§ï¼Œé‚£ä¹ˆAåœ¨æ£€æµ‹åˆ°å’ŒBå‘ç”Ÿç¢°æ’ä¹‹å‰èƒ½å¦æŠŠè‡ªå·±çš„æ•°æ®å‘é€å®Œæ¯•ï¼Ÿæ¢è¨€ä¹‹ï¼Œå¦‚æœAåœ¨å‘é€å®Œæ¯•ä¹‹å‰å¹¶æ²¡æœ‰æ£€æµ‹åˆ°ç¢°æ’ï¼Œé‚£ä¹ˆèƒ½å¦è‚¯å®šAæ‰€å‘é€çš„å¸§ä¸ä¼šå’ŒBå‘é€çš„å¸§å‘ç”Ÿç¢°æ’ï¼Ÿï¼ˆæç¤ºï¼šåœ¨è®¡ç®—æ—¶åº”å½“è€ƒè™‘åˆ°æ¯ä¸€ä¸ªä»¥å¤ªç½‘å¸§åœ¨å‘é€åˆ°ä¿¡é“ä¸Šæ—¶ï¼Œåœ¨MACå¸§å‰é¢è¿˜è¦å¢åŠ è‹¥å¹²å­—èŠ‚çš„å‰åŒæ­¥ç å’Œå¸§å®šç•Œç¬¦ã€‚

- 3-25 ä¸Šé¢˜ä¸­çš„ç«™ç‚¹Aå’ŒBåœ¨t=0æ—¶åŒæ—¶å‘é€äº†æ•°æ®å¸§ã€‚å½“t=225æ¯”ç‰¹æ—¶é—´æ—¶ï¼ŒAå’Œ BåŒæ—¶æ£€æµ‹åˆ°å‘ç”Ÿäº†ç¢°æ’ï¼Œå¹¶ä¸”åœ¨-225+48=273 æ¯”ç‰¹æ—¶é—´æ—¶å®Œæˆäº†å¹²æ‰°ä¿¡å·çš„ä¼ è¾“ã€‚Aå’ŒBåœ¨CSMA/CDç®—æ³•ä¸­é€‰æ‹©ä¸åŒçš„rå€¼é€€é¿ã€‚å‡å®šAå’ŒBé€‰æ‹©çš„éšæœºæ•°åˆ†åˆ«æ˜¯r=0å’ŒrB=1ã€‚è¯•é—®Aå’ŒBå„åœ¨ä»€ä¹ˆæ—¶é—´å¼€å§‹é‡ä¼ å…¶æ•°æ®å¸§?Aé‡ä¼ çš„æ•°æ®å¸§åœ¨ä»€ä¹ˆæ—¶é—´åˆ°è¾¾B?Aé‡ä¼ çš„æ•°æ®ä¼šä¸ä¼šå’ŒBé‡ä¼ çš„æ•°æ®å†æ¬¡å‘ç”Ÿç¢°æ’?Bä¼šä¸ä¼šåœ¨é¢„å®šçš„é‡ä¼ æ—¶é—´åœæ­¢å‘é€æ•°æ®?

---

# å››ã€ç½‘ç»œå±‚

## 4.1 æ¦‚è¿°

- ç½‘ç»œå±‚çš„ä¸»è¦ä»»åŠ¡æ˜¯==å®ç°ç½‘ç»œäº’è¿==ï¼Œè¿›è€Œå®ç°==æ•°æ®åŒ…åœ¨å„ç½‘ç»œä¹‹é—´çš„ä¼ è¾“==
- éœ€è¦è§£å†³é—®é¢˜ï¼š
	- ç½‘ç»œå±‚å‘è¿è¾“å±‚æä¾›æ€æ ·çš„æœåŠ¡ï¼ˆå¯é ä¼ è¾“orä¸å¯é ä¼ è¾“ï¼‰
	- ç½‘ç»œå±‚å¯»å€é—®é¢˜
	- è·¯ç”±é€‰æ‹©é—®é¢˜
- Internet æ˜¯ç”¨æˆ·æœ€å¤šçš„äº’è”ç½‘ï¼Œä½¿ç”¨TCP/IPåè®®æ ˆ
- ç”±äºTCP/IPåè®®æ ˆçš„ç½‘ç»œå±‚ä½¿ç”¨ç½‘é™…åè®®IPï¼Œå®ƒæ˜¯æ•´ä¸ªåè®®æ ˆçš„æ ¸å¿ƒåè®®ï¼Œå› æ­¤åœ¨TCP/IPåè®®æ ˆä¸­ç½‘ç»œå±‚å¸¸ç§°ä¸ºç½‘é™…å±‚

## 4.2 ç½‘ç»œå±‚æä¾›çš„ä¸¤ç§æœåŠ¡

### 4.2.1 é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡

- ==å¯é é€šä¿¡åº”è¯¥ç”±ç½‘ç»œæ¥ä¿è¯==
- å¿…é¡»å»ºç«‹ç½‘ç»œå±‚çš„è¿æ¥â€“è™šç”µè·¯VCï¼ˆvirtual circuitï¼‰
- é€šä¿¡åŒæ–¹æ²¿ç€å·²å»ºç«‹çš„è™šç”µè·¯å‘é€åˆ†ç»„
- ç›®çš„ä¸»æœºçš„åœ°å€ä»…éœ€åœ¨è¿æ¥å»ºç«‹é˜¶æ®µä½¿ç”¨ï¼Œä¹‹åæ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨åªéœ€è¦æºå¸¦ä¸€æ¡è™šç”µè·¯çš„ç¼–å·
- è¿™ç§é€šä¿¡æ–¹å¼å¦‚æœå†ä½¿ç”¨å¯é ä¼ è¾“çš„ç½‘ç»œåè®®ï¼Œå°±å¯ä½¿æ‰€å‘é€çš„åˆ†ç»„æœ€ç»ˆæ­£ç¡®åˆ°è¾¾æ¥æ”¶æ–¹ï¼ˆæ— å·®é”™æŒ‰åºåˆ°è¾¾ã€ä¸ä¸¢ä¸é‡å¤ï¼‰
- é€šä¿¡ç»“æŸåï¼Œéœ€è¦é‡Šæ”¾ä¹‹å‰å»ºç«‹çš„è™šç”µè·¯

åº”ç”¨ä¸¾ä¾‹

- **ATMï¼ˆå¼‚æ­¥ä¼ è¾“æ¨¡å¼ï¼‰ç½‘ç»œ**
- **X.25**ã€**å¸§ä¸­ç»§ï¼ˆFrame Relayï¼‰**
- **MPLSï¼ˆå¤šåè®®æ ‡ç­¾äº¤æ¢ï¼‰** â€”â€” å®é™…ä¸Šä¹Ÿæ˜¯è™šç”µè·¯æ€è·¯çš„ä¸€ç§ç°ä»£æ‰©å±•

### 4.2.2 æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡

- å¯é é€šä¿¡åº”è¯¥ç”±ç”¨æˆ·ä¸»æœºæ¥ä¿è¯
- ä¸éœ€è¦å»ºç«‹ç½‘ç»œå±‚è¿æ¥
- æ¯ä¸ªåˆ†ç»„å¯ä»¥èµ°ä¸åŒçš„è·¯å¾„
- æ¯ä¸ªåˆ†ç»„çš„é¦–éƒ¨å¿…é¡»æºå¸¦ç›®çš„ä¸»æœºçš„å®Œæ•´åœ°å€
- è¿™ç§é€šä¿¡æ–¹å¼æ‰€æºå¸¦çš„åˆ†ç»„å¯èƒ½è¯¯ç ã€ä¸¢å¤±ã€é‡å¤å’Œå¤±åº
- ç”±äºç½‘ç»œæœ¬èº«ä¸æä¾›ç«¯åˆ°ç«¯çš„å¯é ä¼ è¾“æœåŠ¡ï¼Œè¿™å°±ä½¿å¾—ç½‘ç»œä¸­çš„è·¯ç”±å™¨å¯ä»¥æ¯”è¾ƒç®€å•ï¼Œä»·æ ¼ä½å»‰ï¼ˆä¸ç”µä¿¡ç½‘ç»œçš„switchç›¸æ¯”ï¼‰

| æ¯”è¾ƒé¡¹ç›®                 | æ— è¿æ¥çš„æ•°æ®æŠ¥æœåŠ¡ï¼ˆDatagram Serviceï¼‰ | é¢å‘è¿æ¥çš„è™šç”µè·¯æœåŠ¡ï¼ˆVirtual Circuit Serviceï¼‰ |
| ------------------------ | -------------------------------------- | ----------------------------------------------- |
| **æ˜¯å¦å»ºç«‹è¿æ¥**         | å¦ï¼Œç›´æ¥å‘é€                           | æ˜¯ï¼Œéœ€å…ˆå»ºç«‹è™šç”µè·¯                              |
| **åˆ†ç»„å¤„ç†æ–¹å¼**         | æ¯ä¸ªåˆ†ç»„ç‹¬ç«‹å¤„ç†                       | åˆ†ç»„æŒ‰è¿æ¥çŠ¶æ€å¤„ç†ï¼Œè·¯å¾„å›ºå®š                    |
| **æ¯åŒ…æ˜¯å¦ç‹¬ç«‹è·¯ç”±**     | æ˜¯ï¼Œé€è·³æŸ¥æ‰¾è·¯ç”±                       | å¦ï¼Œè·¯ç”±æå‰å»ºç«‹ï¼Œæ¯è·³æŸ¥è™šç”µè·¯å·                |
| **æ˜¯å¦æŒ‰é¡ºåºåˆ°è¾¾**       | å¦ï¼Œé¡ºåºä¸ä¿è¯                         | æ˜¯ï¼Œå¤©ç„¶æœ‰åº                                    |
| **æ˜¯å¦ä¿è¯å¯é æ€§**       | å¦ï¼Œéœ€ä¸Šå±‚åè®®å¦‚TCPä¿è¯                | åŸºæœ¬ä¿è¯é¡ºåºä¸æœ‰åºäº¤ä»˜ï¼Œå¯æ›´æ˜“å®ç°å¯é æ€§        |
| **ä¸­é—´è·¯ç”±å™¨æ˜¯å¦ä¿çŠ¶æ€** | å¦ï¼Œæ— éœ€ä¿å­˜è¿æ¥ä¿¡æ¯                   | æ˜¯ï¼Œä¿å­˜è™šç”µè·¯è¡¨ï¼Œç»´æŠ¤è¿æ¥çŠ¶æ€                  |
| **é€‚ç”¨åè®®æˆ–å®ä¾‹**       | IP åè®®ã€UDP                           | ATMã€å¸§ä¸­ç»§ã€MPLSã€X.25 ç­‰                      |
| **èµ„æºå¼€é”€**             | å°ï¼ˆè½»é‡çº§ï¼‰                           | å¤§ï¼ˆéœ€ç»´æŠ¤çŠ¶æ€ï¼‰                                |
| **çµæ´»æ€§**               | é«˜ï¼Œé€‚åˆåŠ¨æ€ã€å¤æ‚çš„ç½‘ç»œ               | ä½ï¼Œè¿æ¥ä¸€æ—¦å»ºç«‹è·¯å¾„å›ºå®š                        |
| **é€‚ç”¨åœºæ™¯ç±»æ¯”**         | å¯„æ˜ä¿¡ç‰‡ï¼Œæ¯å¼ ç‹¬ç«‹ï¼Œæœ‰å¯èƒ½ä¸¢/ä¹±åº      | æ‰“ç”µè¯ï¼Œå…ˆæ‹¨å·ï¼Œå»ºç«‹è¿æ¥åå¯¹è¯æœ‰åº              |

## 4.3 IPv4åœ°å€

### 4.3.1 Ipv4åœ°å€æ¦‚è¿°

- IPv4åœ°å€å°±æ˜¯ç»™Intenetä¸Šçš„æ¯ä¸€å°ä¸»æœºï¼ˆæˆ–routerï¼‰çš„æ¯ä¸€ä¸ªæ¥å£åˆ†é…ä¸€ä¸ªåœ¨å…¨ä¸–ç•ŒèŒƒå›´å”¯ä¸€çš„32bitçš„æ ‡è¯†ç¬¦
	>- IPv4åœ°å€é•¿åº¦ï¼š**32ä½ï¼ˆäºŒè¿›åˆ¶ï¼‰**
	>
	>- é€šå¸¸ç”¨ **ç‚¹åˆ†åè¿›åˆ¶** è¡¨ç¤ºï¼Œå¦‚ï¼š`192.168.1.1`
	>	>æ¯8ä¸ªbitä¸€ç»„ï¼Œå¯¹åº”è½¬æ¢æˆåè¿›åˆ¶æ•°
	>
	>- æ¯ä¸ªIPv4åœ°å€å¯å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ¥å£

### 4.3.2 åˆ†ç±»ç¼–å€çš„Ipv4åœ°å€

|      | ç½‘ç»œå·                     | ä¸»æœºå· |
| ---- | -------------------------- | ------ |
| A    | 8ä½ï¼ˆå¼€å¤´0ï¼‰               | 24ä½   |
| B    | 16ï¼ˆå¼€å¤´10ï¼‰               | 16     |
| C    | 24ï¼ˆå¼€å¤´110ï¼‰              | 8      |
| D    | å¤šæ’­åœ°å€ï¼ˆå¼€å¤´1110ï¼‰       |        |
| E    | ä¿ç•™ä¸ºä»¥åä½¿ç”¨ï¼ˆå¼€å¤´1111ï¼‰ |        |

æ³¨æ„

- åªæœ‰ABCç±»åœ°å€å¯ä»¥åˆ†é…ç»™ç½‘ç»œä¸­çš„ä¸»æœºæˆ–è·¯ç”±å™¨çš„å„ä¸ªæ¥å£
- ä¸»æœºå·ä¸º==â€œå…¨0â€çš„åœ°å€æ˜¯ç½‘ç»œåœ°å€==ï¼Œä¸èƒ½åˆ†é…ç»™ä¸»æœºæˆ–è·¯ç”±å™¨çš„å„æ¥å£
- ä¸»æœºå·ä¸º==â€œå…¨1â€çš„åœ°å€æ˜¯å¹¿æ’­åœ°å€==ã€‚ä¸èƒ½åˆ†é…ç»™ä¸»æœºæˆ–è·¯ç”±å™¨çš„å„æ¥å£



A

>æœ€å°ç½‘ç»œå·0ï¼Œä¿ç•™ä¸æŒ‡æ´¾
>
>ç¬¬ä¸€ä¸ªå¯ä»¥æŒ‡æ´¾çš„ç½‘ç»œå·1ï¼Œç½‘ç»œåœ°å€1.0.0.0
>
>æœ€å¤§ç½‘ç»œå·127ï¼Œä½œä¸ºæœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ï¼Œä¸æŒ‡æ´¾
>>æœ€å°çš„æœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ 127.0.0.1
>>
>>æœ€å¤§çš„æœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ 127.255.255.254ï¼ˆå…¨0å…¨1æœ‰ç‰¹æ®Šç”¨é€”ï¼‰
>
>æœ€åä¸€ä¸ªå¯ä»¥æŒ‡æ´¾çš„ç½‘ç»œå·126ï¼Œç½‘ç»œåœ°å€ 126.0.0.0
>
>å¯æŒ‡æ´¾çš„ç½‘ç»œæ•°é‡ 126($2^{8-1}$å»æ‰0å’Œ127)
>
>æ¯ä¸ªç½‘ç»œä¸­å¯ä»¥æŒ‡æ´¾çš„ç½‘ç»œæ•°é‡ $2^{24}$-2=16777214



B
>æœ€å°ç½‘ç»œå·128.0ï¼Œç½‘ç»œåœ°å€128.0.0.0
>
>æœ€å¤§ç½‘ç»œå· 191.255ï¼Œç½‘ç»œåœ°å€191.255.0.0
>
>å¯æŒ‡æ´¾çš„ç½‘ç»œæ•°é‡ $2^{16-2}$=16384
>
>æ¯ä¸ªç½‘ç»œå¯ä»¥åˆ†é…çš„IPåœ°å€ $2^{16}-2$=16384



C
>æœ€å°ç½‘ç»œå· 192.0.0 ç½‘ç»œåœ°å€192.0.0.0
>
>æœ€å¤§ç½‘ç»œå·233.255.255 ç½‘ç»œåœ°å€ 233.255.255.0
>
>å¯æŒ‡æ´¾çš„ç½‘ç»œæ•°é‡ $2^{24-3}$= 2097152
>
>æ¯ä¸ªç½‘ç»œå¯ä»¥åˆ†é…çš„IPåœ°å€ $2^{8}$-2 = 254

![](../images/è®¡ç½‘å›¾14.jpg)

æ³¨æ„

- åœ°å€ 0.0.0.0 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Ipv4åœ°å€ï¼Œåªèƒ½ä½œä¸ºæºåœ°å€ä½¿ç”¨ï¼Œè¡¨ç¤ºâ€œåœ¨æœ¬ç½‘ç»œä¸Šçš„æœ¬ä¸»æœºâ€
- 255.255.255.255 æ˜¯ä¸€ä¸ªç‰¹æ®Šçš„Ipv4åœ°å€ï¼Œåªèƒ½ä½œä¸ºç›®çš„åœ°å€ä½¿ç”¨ï¼Œè¡¨ç¤ºâ€œåªåœ¨æœ¬ç½‘ç»œä¸Šè¿›è¡Œå¹¿æ’­â€ï¼ˆå„è·¯ç”±å™¨ä¸è½¬å‘ï¼‰

### 4.3.3 åˆ’åˆ†å­ç½‘çš„Ipv4åœ°å€

- 32bitçš„å­ç½‘æ©ç å¯ä»¥è¡¨æ˜åˆ†ç±»IPåœ°å€çš„ä¸»æœºå·éƒ¨åˆ†è¢«å€Ÿç”¨äº†å‡ ä¸ªä½œä¸ºå­ç½‘å·
	- subnet maskä½¿ç”¨è¿ç»­çš„bit1æ¥å¯¹åº”ç½‘ç»œå·å’Œå­ç½‘å·
	- subnet maskä½¿ç”¨è¿ç»­çš„bit0æ¥å¯¹åº”ä¸»æœºå·
	- æŠŠåˆ’åˆ†å­ç½‘çš„Ipv4åœ°å€ä¸å…¶å¯¹åº”çš„å­ç½‘æ©ç è¿›è¡Œé€»è¾‘ä¸è¿ç®—ä¹‹åå¯ä»¥å¾—åˆ°Ipv4åœ°å€æ‰€åœ¨å­ç½‘çš„ç½‘ç»œåœ°å€

#### CIDRè¡¨ç¤ºæ³•

> CIDRï¼ˆæ— ç±»åŸŸé—´è·¯ç”±ï¼‰ä½¿ç”¨æ–œæ ååŠ æ•°å­—çš„æ–¹å¼è¡¨ç¤ºå­ç½‘æ©ç é•¿åº¦ã€‚

ä¾‹å¦‚ï¼š

- `192.168.1.0/24` â†’ å­ç½‘æ©ç ä¸º `255.255.255.0`ï¼ˆç½‘ç»œå· 24 ä½ï¼‰
- `10.0.0.0/8` â†’ å­ç½‘æ©ç ä¸º `255.0.0.0`ï¼ˆç½‘ç»œå· 8 ä½ï¼‰



#### å¦‚ä½•åˆ’åˆ†å­ç½‘



 æ­¥éª¤å¦‚ä¸‹ï¼š

- **ç¡®å®šåŸç½‘ç»œåœ°å€å’Œå­ç½‘æ©ç **
- **å†³å®šåˆ’åˆ†å‡ ä¸ªå­ç½‘ï¼ˆå€Ÿå‡ ä½ä¸»æœºä½ï¼‰**
- **è®¡ç®—æ¯ä¸ªå­ç½‘çš„å¤§å°ã€ç½‘ç»œåœ°å€ã€å¹¿æ’­åœ°å€ã€å¯ç”¨åœ°å€èŒƒå›´**

#### é»˜è®¤å­ç½‘æ©ç 

æ˜¯æŒ‡åœ¨æ²¡æœ‰åˆ’åˆ†å­ç½‘çš„æƒ…å†µä¸‹ä½¿ç”¨çš„å­ç½‘æ©ç 

A 255.0.0.0

B 255.255.0.0

C 255.255.255.0

### 4.3.4 æ— åˆ†ç±»çš„Ipv4åœ°å€

#### CIDR

éšç€äº’è”ç½‘å‘å±•ï¼Œ**åœ°å€èµ„æºç´§å¼ **ï¼Œä»¥å‰é‚£ç§æ­»æ¿çš„A/B/Cç±»å¤ªæµªè´¹äº†ï¼š

- Aç±»ä¸€ä¸ªç½‘ç»œ = 1600ä¸‡ä¸ªä¸»æœºï¼Ÿæ ¹æœ¬ç”¨ä¸å®Œ
- Cç±»ä¸€ä¸ªç½‘ç»œ = 256ä¸ªä¸»æœºï¼Ÿå¤ªå°‘äº†

äºæ˜¯ï¼Œ1993å¹´å¼•å…¥äº†**CIDRï¼ˆClassless Inter-Domain Routingï¼‰**æœºåˆ¶â€”â€”ä¹Ÿå°±æ˜¯â€œæ— ç±»åˆ«åŸŸé—´è·¯ç”±é€‰æ‹©â€ï¼Œè§£å†³äº†åœ°å€æµªè´¹ä¸è·¯ç”±è¡¨è†¨èƒ€çš„é—®é¢˜

- CIDRæ¶ˆé™¤äº†ä¼ ç»Ÿçš„A,B,Cç±»åœ°å€ä»¥åŠåˆ’åˆ†å­ç½‘çš„æ¦‚å¿µ
- å¯ä»¥æ›´åŠ æœ‰æ•ˆåˆ†é…Ipv4çš„åœ°å€ç©ºé—´ï¼Œå¹¶ä¸”å¯ä»¥åœ¨æ–°çš„Ipv6ä½¿ç”¨ä¹‹å‰å…è®¸å› ç‰¹ç½‘çš„è§„æ¨¡æŒç»­å¢é•¿

`172.16.0.0/20`

- å‰20ä½æ˜¯ç½‘ç»œå·ï¼Œå12ä½æ˜¯ä¸»æœºå·ï¼Œæœ€å¤šæ”¯æŒ 2^12 = 4096 ä¸ªä¸»æœºã€‚

- å®ƒè·¨äº†å¥½å‡ ä¸ªåŸæœ¬çš„Cç±»

![](../images/è®¡ç½‘å›¾15.jpg)

#### è·¯ç”±èšåˆï¼ˆæ„é€ è¶…ç½‘ï¼‰



æ¯”å¦‚ä¸‹é¢è¿™ 4 ä¸ªç½‘ç»œï¼š

```lua
192.168.0.0/24
192.168.1.0/24
192.168.2.0/24
192.168.3.0/24
```

â†’ éƒ½å¯ä»¥åˆå¹¶æˆï¼š

```kotlin
192.168.0.0/22
```

ä¹Ÿå°±æ˜¯æ‰¾å…±åŒå‰ç¼€

- ä¸éš¾çœ‹å‡ºï¼Œç½‘ç»œå‰ç¼€è¶Šé•¿ï¼Œåœ°å€å—è¶Šå°ï¼Œè·¯ç”±è¶Šå…·ä½“
- è‹¥è·¯ç”±å™¨è½¬å‘åˆ†ç»„æ—¶å‘ç°æœ‰å¤šæ¡è·¯ç”±å¯ä»¥é€‰ï¼Œåˆ™é€‰æ‹©ç½‘ç»œå‰ç¼€æœ€é•¿çš„é‚£æ¡ï¼Œè¿™ç§°ä¸º==æœ€é•¿å‰ç¼€åŒ¹é…==ï¼Œå› ä¸ºè¿™æ ·çš„è·¯ç”±æ›´å…·ä½“

### 4.3.5 IPv4åœ°å€çš„åº”ç”¨è§„åˆ’

#### å®šé•¿çš„å­ç½‘æ©ç FLSM

fixed length subnet mask

- ä½¿ç”¨åŒä¸€ä¸ªå­ç½‘æ©ç æ¥åˆ’åˆ†å­ç½‘
- æ¯ä¸€ä¸ªå­ç½‘åˆ†é…çš„IPåœ°å€æ•°é‡ç›¸åŒï¼Œé€ æˆIPåœ°å€çš„æµªè´¹

![](../images/è®¡ç½‘å›¾16.jpg)



#### ä¸å®šé•¿çš„å­ç½‘æ©ç VLSM

variable length subnet mask

- ä½¿ç”¨ä¸å®šé•¿çš„å­ç½‘æ©ç æ¥åˆ’åˆ†å­ç½‘
- æ¯ä¸ªå­ç½‘æ‰€åˆ†é…çš„IPåœ°å€æ•°é‡å¯ä»¥ä¸åŒï¼Œå°½å¯èƒ½å‡å°‘å¯¹IPåœ°å€çš„æµªè´¹

---

## 4.4 IPæ•°æ®æŠ¥çš„å‘é€å’Œè½¬å‘è¿‡ç¨‹

åŒ…å«ï¼š

- ä¸»æœºå‘é€IPæ•°æ®
- routerè½¬å‘IPæ•°æ®

å‡è®¾ä½ è®¿é—®ä¸€ä¸ªç½‘ç«™ï¼Œç›®æ ‡ IP æ˜¯ `203.0.113.1`

æºä¸»æœºå‘é€æ­¥éª¤ï¼š

1. åº”ç”¨å±‚ç”Ÿæˆæ•°æ®ï¼ˆå¦‚ HTTP è¯·æ±‚ï¼‰
2. ä¼ è¾“å±‚å°è£…ä¸º TCP æŠ¥æ–‡æ®µï¼ˆåŠ ç«¯å£å·ï¼‰
3. ç½‘ç»œå±‚å°è£…ä¸º IP æ•°æ®æŠ¥ï¼š
	- æºIPï¼šè‡ªå·±æœºå™¨çš„IPï¼Œæ¯”å¦‚ `192.168.1.100`
	- ç›®çš„IPï¼š`203.0.113.1`
4. æ£€æŸ¥ç›®æ ‡IPæ˜¯ä¸æ˜¯æœ¬åœ°ç½‘ç»œï¼š
	- æ˜¯ â†’ æŸ¥ ARP å¾—åˆ°ç›®æ ‡ MAC åœ°å€
	- å¦ â†’ æŸ¥ **é»˜è®¤ç½‘å…³ IP** çš„ MAC åœ°å€ï¼ˆä¸‹ä¸€è·³ï¼‰ï¼Œä¼ è¾“ç»™é»˜è®¤ç½‘å…³ï¼Œç”±é»˜è®¤ç½‘å…³å¸®å¿™è½¬å‘
5. é“¾è·¯å±‚å°è£…æˆä»¥å¤ªç½‘å¸§ï¼ˆåŠ  MAC åœ°å€ï¼‰ï¼Œå‘é€å‡ºå»



è·¯ç”±å™¨è½¬å‘ï¼ˆ==è·¯ç”±å™¨éš”ç¦»å¹¿æ’­åŸŸ==ï¼‰

æ¯ç»è¿‡ä¸€ä¸ªè·¯ç”±å™¨ï¼Œéƒ½ä¼šåšè¿™äº›ï¼š

1. **è§£å°é“¾è·¯å±‚å¸§** â†’ å¾—åˆ° IP æ•°æ®æŠ¥ï¼Œ==æ£€æŸ¥IPæ•°æ®æŠ¥æ˜¯å¦å‡ºé”™==ï¼Œè‹¥å‡ºé”™åˆ™ä¸¢å¼ƒè¯¥IPæ•°æ®æŠ¥å¹¶é€šçŸ¥æºä¸»æœº
2. **æŸ¥çœ‹ç›®æ ‡IP** â†’ æŸ¥è·¯ç”±è¡¨ï¼Œç¡®å®šä¸‹ä¸€è·³
3. **TTL å‡ 1**ï¼š
	- è‹¥ TTL = 0 â†’ ä¸¢å¼ƒï¼Œè¿”å› ICMP è¶…æ—¶æŠ¥æ–‡ï¼ˆç”¨äº tracerouteï¼‰
4. **é‡æ–°å°è£…ä¸ºå¸§**ï¼Œæ›´æ–° **ç›®æ ‡ MAC åœ°å€** ä¸ºä¸‹ä¸€è·³çš„ MACï¼Œå‘å‡ºå»

æ¯ä¸€è·³éƒ½åªç®¡â€œä¸‹ä¸€è·³â€ï¼Œ**ä¸å˜çš„åªæœ‰ç›®æ ‡IP**ï¼Œå…¶ä½™éƒ½å¯èƒ½å˜

---

## 4.5 é™æ€è·¯ç”±é…ç½®åŠå…¶å¯èƒ½äº§ç”Ÿçš„è·¯ç”±ç¯è·¯é—®é¢˜

- é™æ€è·¯ç”±é…ç½®æ˜¯æŒ‡ç”¨æˆ·æˆ–ç½‘ç»œç®¡ç†å‘˜ä½¿ç”¨è·¯ç”±å™¨ç›¸å…³çš„å‘½ä»¤ç»™è·¯ç”±å™¨äººå·¥é…ç½®è·¯ç”±è¡¨
	- è¿™ç§äººå·¥é…ç½®æ–¹å¼ç®€å•ã€å¼€é”€å°ï¼Œä½†æ˜¯ä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€ï¼ˆæµé‡ã€æ‹“æ‰‘ç­‰ï¼‰çš„å˜åŒ–
	- ä¸€èˆ¬åªåœ¨å°è§„æ¨¡ç½‘ç»œä¸­é‡‡ç”¨
- ä½¿ç”¨é™æ€è·¯ç”±é…ç½®å¯èƒ½å‡ºç°ä»¥ä¸‹åŸå› å¯¼è‡´çš„è·¯ç”±ç¯è·¯çš„é”™è¯¯
	- é…ç½®é”™è¯¯
	- èšåˆäº†ä¸å­˜åœ¨çš„ç½‘ç»œ
	- ç½‘ç»œæ•…éšœ
- è·¯ç”±æ¡ç›®çš„ç±»å‹
	- ç›´è¿ç½‘ç»œ
	- é™æ€è·¯ç”±ï¼ˆäººå·¥é…ç½®ï¼‰
	- åŠ¨æ€è·¯ç”±ï¼ˆè·¯ç”±é€‰æ‹©åè®®ï¼‰
- ç‰¹æ®Šçš„é™æ€è·¯ç”±æ¡ç›®
	- é»˜è®¤è·¯ç”±ï¼ˆç›®çš„ç½‘ç»œä¸º0.0.0.0 åœ°å€æ©ç ä¸º0.0.0.0ï¼‰
	- ç‰¹å®šä¸»æœºè·¯ç”±ï¼ˆç›®çš„ç½‘ç»œä¸ºç‰¹å®šä¸»æœºçš„IPåœ°å€ï¼Œåœ°å€æ©ç ä¸º255.255.255.255ï¼‰
	- é»‘æ´è·¯ç”±ï¼ˆä¸‹ä¸€è·³ä¸ºnull0ï¼‰



## 4.6 è·¯ç”±é€‰æ‹©åè®®

### 4.6.1 è·¯ç”±é€‰æ‹©åè®®æ¦‚è¿°

#### é™æ€è·¯ç”±é€‰æ‹©

- ç”±**äººå·¥é…ç½®**çš„ç½‘ç»œè·¯ç”±ã€é»˜è®¤è·¯ç”±ã€ç‰¹å®šä¸»æœºè·¯ç”±ã€é»‘æ´è·¯ç”±ç­‰éƒ½å±äºé™æ€è·¯ç”±
- è¿™ç§äººå·¥é…ç½®æ–¹å¼ç®€å•ã€å¼€é”€å°ï¼Œä½†æ˜¯**ä¸èƒ½åŠæ—¶é€‚åº”ç½‘ç»œçŠ¶æ€ï¼ˆæµé‡ã€æ‹“æ‰‘ç­‰ï¼‰çš„å˜åŒ–**
- ä¸€èˆ¬åªåœ¨**å°è§„æ¨¡ç½‘ç»œ**ä¸­é‡‡ç”¨

#### åŠ¨æ€è·¯ç”±é€‰æ‹©

- è·¯ç”±å™¨é€šè¿‡è·¯ç”±é€‰æ‹©åè®®è‡ªåŠ¨è·å–è·¯ç”±ä¿¡æ¯
- æ¯”è¾ƒå¤æ‚ã€å¼€é”€æ¯”è¾ƒå¤§ï¼Œ**èƒ½è¾ƒå¥½é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–**
- é€‚ç”¨äº**å¤§è§„æ¨¡ç½‘ç»œ**



#### å› ç‰¹ç½‘é‡‡ç”¨çš„è·¯ç”±é€‰æ‹©åè®®çš„ä¸»è¦ç‰¹ç‚¹

- è‡ªé€‚åº”
	åŠ¨æ€è·¯ç”±é€‰æ‹©ï¼Œèƒ½è¾ƒå¥½çš„é€‚åº”ç½‘ç»œçŠ¶æ€çš„å˜åŒ–
- åˆ†å¸ƒå¼
	è·¯ç”±å™¨ä¹‹é—´äº¤æ¢è·¯ç”±ä¿¡æ¯
- åˆ†å±‚æ¬¡
	å°†æ•´ä¸ªå› ç‰¹ç½‘åˆ’åˆ†ä¸ºè®¸å¤šè¾ƒå°çš„è‡ªæ²»ç³»ç»ŸASï¼ˆautonomous systemï¼‰



å› ç‰¹ç½‘é‡‡ç”¨åˆ†å±‚æ¬¡çš„è·¯ç”±é€‰æ‹©åè®®

- ä¸åŒASä¹‹é—´ åŸŸé—´è·¯ç”±é€‰æ‹©  å¤–éƒ¨ç½‘å…³åè®®EGP
- åŒä¸€ä¸ªASå†… åŸŸå†…è·¯ç”±é€‰æ‹©  å†…éƒ¨ç½‘å…³åè®®IGP

#### å¸¸è§çš„è·¯ç”±é€‰æ‹©åè®®

- å†…éƒ¨ç½‘å…³åè®®IGP
	>- è·¯ç”±ä¿¡æ¯åè®® RIP
	>	åœ¨å› ç‰¹ç½‘ä¸Šæœ€æ—©ä½¿ç”¨
	>- å†…éƒ¨ç½‘å…³è·¯ç”±åè®® IGRP
	>	ä¸RIPéƒ½æ˜¯åŸºäº**è·ç¦»å‘é‡**
	>- å¢å¼ºå‹å†…éƒ¨ç½‘å…³è·¯ç”±åè®® EIGRP
	>- å¼€æ”¾å¼æœ€çŸ­è·¯å¾„ä¼˜å…ˆ OSPF
	>	åœ¨å„ç§ç½‘ç»œä¸Šå¹¿æ³›ä½¿ç”¨
	>- ä¸­é—´ç³»ç»Ÿåˆ°ä¸­é—´ç³»ç»Ÿ IS-IS
	>	ä¸OSPFéƒ½æ˜¯åŸºäº**é“¾è·¯çŠ¶æ€**

- å¤–éƒ¨ç½‘å…³åè®®EGP
	>è¾¹ç•Œç½‘å…³åè®® BGP



#### è·¯ç”±å™¨çš„åŸºæœ¬ç»“æ„

![](../images/è®¡ç½‘å›¾17.jpg)

### 4.6.2 è·¯ç”±ä¿¡æ¯åè®®RIPçš„åŸºæœ¬å·¥ä½œåŸç†

- RIPæ˜¯æœ€å…ˆå¾—åˆ°å¹¿æ³›ä½¿ç”¨çš„åè®®ä¹‹ä¸€
- RIPè¦æ±‚ASå†…çš„æ¯ä¸€ä¸ªrouteréƒ½è¦ç»´æŠ¤ä»å®ƒè‡ªå·±åˆ°ASå†…å…¶ä»–æ¯ä¸€ä¸ªç½‘ç»œçš„è·ç¦»è®°å½•ï¼Œç§°ä¸º**è·ç¦»å‘é‡ï¼ˆDistance-Vectorï¼‰**
- RIPä½¿ç”¨**è·³æ•°ï¼ˆhop countï¼‰**æ¥**è¡¡é‡åˆ°è¾¾ç›®çš„ç½‘ç»œçš„è·ç¦»**
	- routeråˆ°ç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸º1
	- routeråˆ°éç›´è¿ç½‘ç»œçš„è·ç¦»å®šä¹‰ä¸ºæ‰€ç»è¿‡çš„routeræ•°é‡+1
	- å…è®¸ä¸€å°è·¯å¾„æœ€å¤šåªèƒ½åŒ…å«15ä¸ªrouterï¼Œè·ç¦»ç­‰äº**16æ—¶ä¸å¯è¾¾**ï¼Œå¯è§RIPåªé€‚ç”¨äºå°å‹ç½‘ç»œ

- RIPè®¤ä¸ºå¥½çš„è·¯ç”±å°±æ˜¯DVçŸ­çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯ç»è¿‡routerå°‘
- å½“åˆ°è¾¾åŒä¸€ç›®çš„ç½‘ç»œæœ‰å¤šä¸ªè·ç¦»ç›¸ç­‰çš„è·¯ç”±æ—¶ï¼Œå¯ä»¥è¿›è¡Œ**ç­‰ä»·è´Ÿè½½å‡è¡¡**ï¼ˆä¹Ÿå°±æ˜¯å°†é€šä¿¡é‡å‡è¡¡çš„åˆ†ä¸åˆ°å¤šæ¡ç­‰ä»·çš„è·¯ç”±ä¸Šï¼‰



- RIPè¦ç‚¹
	- å’Œè°äº¤æ¢ä¿¡æ¯
		ä»…å’Œç›¸é‚»routeräº¤æ¢
	- äº¤æ¢ä»€ä¹ˆä¿¡æ¯
		è‡ªå·±çš„è·¯ç”±è¡¨
	- ä½•æ—¶äº¤æ¢ä¿¡æ¯
		å‘¨æœŸæ€§äº¤æ¢ï¼ˆæ¯”å¦‚æ¯30sï¼‰



RIPçš„åŸºæœ¬å·¥ä½œæµç¨‹

![](../images/è®¡ç½‘å›¾18.jpg)



RIPæ›´æ–°çš„è§„åˆ™

![](../images/è®¡ç½‘å›¾19.jpg)

RIPå­˜åœ¨çš„é—®é¢˜

- æ…¢æ”¶æ•›
	å¦‚æœä¸€æ¡è·¯å¾„å¤±æ•ˆäº†ï¼Œéœ€è¦ä¸‹ä¸€æ¬¡ 30 ç§’æ›´æ–°æ‰èƒ½ä¼ æ’­å‡ºå»ï¼Œæ›´æ–°è¿‡ç¨‹æ…¢
- è·¯ç”±ç¯è·¯
	å…¸å‹ä¾‹å­ï¼šç½‘ç»œå®•æ‰ï¼ŒæŸä¸ªè·¯ç”±å™¨è¿˜æ²¡å­¦åˆ°ï¼Œå°±æŠŠåŸæ¥çš„è·¯å¾„ç»§ç»­ä¼ ä¸‹å»ï¼Œå½¢æˆâ€œä½ è¯´èƒ½é€šæˆ‘ä¿¡äº†ä½ ï¼Œç»“æœæˆ‘ä¹Ÿè¯´èƒ½é€šâ€çš„å¾ªç¯

åæ¶ˆæ¯ä¼ çš„æ…¢ä¾‹é¢˜

![](../images/è®¡ç½‘å›¾20.jpg)

### 4.6.3 å¼€æ”¾æœ€çŸ­è·¯å¾„ä¼˜å…ˆOSPFçš„åŸºæœ¬å·¥ä½œåŸç†

>open shortest path first ï¼Œæ˜¯ä¸ºå…‹æœRIPçš„ç¼ºç‚¹åœ¨1989å¼€å‘å‡ºæ¥çš„
>
>- å¼€æ”¾ï¼šå…¶æ˜¯å…¬å¼€å‘è¡¨çš„
>- æœ€çŸ­è·¯å¾„ä¼˜å…ˆï¼šä½¿ç”¨äº†æœ€çŸ­è·¯å¾„ç®—æ³•SPFï¼ˆæ²Ÿæ§½çš„`Dijkstra`è¿˜åœ¨è¿½ï¼‰

- OSPFæ˜¯**åŸºäºé“¾è·¯çŠ¶æ€**çš„ï¼Œè€Œä¸æ˜¯åŸºäºè·ç¦»å‘é‡çš„
- é‡‡ç”¨SPFç®—æ³•è®¡ç®—è·¯ç”±ï¼Œä¿è¯äº†ä¸ä¼šäº§ç”Ÿç¯è·¯
- ä¸é™åˆ¶ç½‘ç»œè§„æ¨¡ï¼Œæ›´æ–°æ•ˆç‡é«˜ï¼Œæ”¶æ•›é€Ÿåº¦å¿«
- é“¾è·¯çŠ¶æ€æ˜¯æŒ‡è·¯ç”±å™¨éƒ½å’Œé‚£äº›è·¯ç”±å™¨ç›¸é‚»ï¼Œä»¥åŠç›¸åº”é“¾è·¯çš„costï¼ˆå°±æ˜¯å›¾é‡Œé¢çš„weightï¼‰
	- costè¡¨ç¤ºè´¹ç”¨ã€è·ç¦»ã€æ—¶å»¶ã€å¸¦å®½ç­‰ç­‰ï¼Œéƒ½æ˜¯ç”±ç½‘ç»œç®¡ç†äººå‘˜æ¥å†³å®š



å½¢è±¡ç†è§£å·¥ä½œåŸç†

ä½ æ˜¯è·¯ç”±å™¨R1ï¼Œåˆšæ¥å…¥ç½‘ç»œï¼ŒOSPF ä¼šè¿™ä¹ˆåšï¼š

1. â€œä½ å¥½ï¼Œæˆ‘æ˜¯è°ï¼Œæœ‰æ²¡æœ‰é‚»å±…â€ â€”â€” å‘é€ Helloï¼›

2. â€œå“¦ï¼Œæœ‰é‚»å±…ï¼æˆ‘å°±é€‰ DR å§â€ â€”â€” é€‰ä¸¾ DR/BDRï¼›
	>designated router
	>
	>backup designated router
	>
	>- æ‰€æœ‰çš„éDR/BDRåªä¸DR/BDRå»ºç«‹é‚»å±…å…³ç³»
	>	è¿™æ ·é‚»å±…å…³ç³»æ•°é‡ $2(n-2)+1$
	>- éBR/BDRä¹‹é—´é€šè¿‡DR/BDRäº¤æ¢ä¿¡æ¯

3. â€œæˆ‘è¿äº† Aã€Bã€Cï¼Œæˆæœ¬æ˜¯å¤šå°‘â€ â€”â€” å‘ LSAï¼›

4. â€œè®©æˆ‘çœ‹çœ‹å¤§å®¶éƒ½è¿äº†è°â€ â€”â€” å»º LSDBï¼›

5. â€œæˆ‘ä»æˆ‘å‡ºå‘åˆ°æ¯ä¸ªåœ°æ–¹çš„æœ€çŸ­è·¯å¾„æ˜¯â€¦â€¦â€ â€”â€” SPF ç®—æ³•ï¼›

6. â€œå¾—å˜ï¼Œè¿™å°±æ˜¯æˆ‘æ›´æ–°çš„è·¯ç”±è¡¨â€



- é€šè¿‡äº¤äº’helloåˆ†ç»„ï¼Œå»ºç«‹å’Œç»´æŠ¤é‚»å±…å…³ç³»
	- helloåˆ†ç»„å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­ï¼Œå‘å¾€ç»„æ’­åœ°å€244.0.0.5
	- å‘é€å‘¨æœŸä¸º10s
	- 40sæœªæ”¶åˆ°æ¥è‡ªé‚»å±…è·¯ç”±å™¨çš„helloåˆ†ç»„ï¼Œåˆ™è®¤ä¸ºè¯¥é‚»å±…è·¯ç”±å™¨ä¸å¯è¾¾





- ä½¿ç”¨OSPFçš„æ¯ä¸ªè·¯ç”±å™¨éƒ½ä¼šäº§ç”Ÿé“¾è·¯çŠ¶æ€é€šå‘ŠLSAï¼ŒåŒ…å«ä»¥ä¸‹å†…å®¹
	- ç›´è¿ç½‘ç»œçš„é“¾è·¯çŠ¶æ€ä¿¡æ¯
	- é‚»å±…è·¯ç”±å™¨çš„é“¾è·¯çŠ¶æ€ä¿¡æ¯
- LSAè¢«å°è£…åœ¨é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„LSUä¸­ï¼Œé‡‡ç”¨æ³›æ´ªæ³•å‘é€
- æ¯ä¸€ä¸ªè·¯ç”±å™¨éƒ½æœ‰é“¾è·¯çŠ¶æ€æ•°æ®åº“LSDBï¼Œç”¨äºå­˜å‚¨LSA
- é€šè¿‡å„è·¯ç”±å™¨æ³›æ´ªå‘é€å°è£…æœ‰è‡ªå·±LSAçš„LSUåˆ†ç»„ï¼Œå„è·¯ç”±å™¨çš„LSDBæœ€ç»ˆå°†è¾¾åˆ°ä¸€è‡´
- åŸºäºLSDBè¿›è¡ŒSPFè®¡ç®—ï¼Œæ„å»ºå„è‡ªåˆ°è¾¾å…¶ä»–è·¯ç”±å™¨çš„æœ€çŸ­è·¯å¾„ï¼Œä¹Ÿå°±æ˜¯æ„å»ºå„è‡ªçš„è·¯ç”±è¡¨



- OSPFæœ‰ä»¥ä¸‹åˆ†ç»„

	- helloåˆ†ç»„ï¼Œå‘ç°å’Œç»´æŠ¤é‚»å±…è·¯ç”±å™¨çš„å¯è¾¾æ€§
	- æ•°æ®åº“æè¿°åˆ†ç»„ï¼Œå‘é‚»å±…è·¯ç”±å™¨ç»™å‡ºè‡ªå·±çš„é“¾è·¯çŠ¶æ€æ•°æ®åº“ä¸­æ‰€æœ‰çš„é“¾è·¯çŠ¶æ€é¡¹ç›®çš„æ‘˜è¦ä¿¡æ¯
	- é“¾è·¯çŠ¶æ€è¯·æ±‚åˆ†ç»„ï¼Œå‘é‚»å±…è·¯ç”±å™¨è¯·æ±‚å‘é€æŸäº›é“¾è·¯çŠ¶æ€é¡¹ç›®çš„è¯¦ç»†ä¿¡æ¯
	- é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„ï¼Œä½¿ç”¨è¿™ç§åˆ†ç»„å°†é“¾è·¯çŠ¶æ€æ³›æ´ªå‘é€
	- é“¾è·¯çŠ¶æ€ç¡®è®¤åˆ†ç»„ï¼Œå¯¹é“¾è·¯çŠ¶æ€æ›´æ–°åˆ†ç»„çš„ç¡®è®¤åˆ†ç»„

	

- ä¸ºäº†ä½¿OSSPFèƒ½å¤Ÿç”¨äºè§„æ¨¡å¾ˆå¤§çš„ç½‘ç»œï¼ŒOSPFæŠŠä¸€ä¸ªASå†åˆ’åˆ†ä¸ºè‹¥å¹²ä¸ªæ›´å°çš„èŒƒå›´ï¼Œç§°ä¸ºarea



### 4.6.4 è¾¹ç•Œç½‘å…³åè®®BGPçš„åŸºæœ¬å·¥ä½œåŸç†

#### å®šä¹‰

> BGPï¼Œå…¨ç§°æ˜¯ **Border Gateway Protocolï¼ˆè¾¹ç•Œç½‘å…³åè®®ï¼‰**ï¼Œæ˜¯**äº’è”ç½‘çš„æ ¸å¿ƒè·¯ç”±åè®®**ã€‚

- å±äº **è·¯å¾„å‘é‡åè®®ï¼ˆPath Vector Protocolï¼‰**ï¼›
- æ˜¯ä¸€ç§ **å¤–éƒ¨ç½‘å…³åè®®ï¼ˆEGPï¼‰**ï¼Œç”¨äº**è‡ªæ²»ç³»ç»Ÿï¼ˆASï¼‰ä¹‹é—´**çš„è·¯ç”±äº¤æ¢ï¼›
- å½“å‰ç‰ˆæœ¬æ˜¯ BGP-4ï¼Œæ”¯æŒ **CIDR** å’Œ **è·¯ç”±èšåˆ**

#### ç›¸å…³æœ¯è¯­

eBGP ä¸åŒASä¹‹é—´

iBGP åŒä¸€ä¸ªASå†…éƒ¨

| æ¦‚å¿µ              | å«ä¹‰                                                         |
| ----------------- | ------------------------------------------------------------ |
| ASï¼ˆè‡ªæ²»ç³»ç»Ÿï¼‰    | è‡ªæ²»ç³»ç»Ÿæ˜¯ä¸€ç»„ä½¿ç”¨åŒä¸€å†…éƒ¨ç­–ç•¥ã€å¯¹å¤–ç»Ÿä¸€å¯¹ç­‰çš„ç½‘ç»œç³»ç»Ÿï¼ˆå¦‚æŸä¸ªISPã€æŸä¸ªé«˜æ ¡ï¼‰ |
| ASNï¼ˆè‡ªæ²»ç³»ç»Ÿå·ï¼‰ | æ¯ä¸ª AS éƒ½æœ‰å…¨çƒå”¯ä¸€ç¼–å·ï¼Œåƒèº«ä»½è¯                           |
| eBGPï¼ˆå¤–éƒ¨BGPï¼‰   | ä¸åŒ AS ä¹‹é—´çš„ BGP è·¯ç”±å™¨äº¤æ¢è·¯ç”±                            |
| iBGPï¼ˆå†…éƒ¨BGPï¼‰   | åŒä¸€ä¸ª AS å†…éƒ¨çš„ BGP è·¯ç”±å™¨äº¤æ¢è·¯ç”±                          |
| Path Vector       | æ¯æ¡è·¯ç”±åŒ…å«è·¯å¾„ä¸Šæ‰€æœ‰ç»è¿‡çš„ ASï¼ˆè·¯å¾„è®°å½•ï¼‰                  |
| è·¯å¾„å±æ€§          | æ¯æ¡è·¯ç”±éƒ½æœ‰é™„å¸¦å±æ€§ï¼Œå¦‚ AS_PATHã€NEXT_HOPã€LOCAL_PREFã€MED ç­‰ï¼Œç”¨äºå†³ç­–è·¯ç”±ä¼˜åŠ£ |

#### BGPä¸å‰é¢å‡ ä¸ªåŒºåˆ«

- åœ¨ä¸åŒASä¹‹é—´ï¼Œåº¦é‡è·¯ç”±çš„costå¯èƒ½ä¸ä¸€æ ·ï¼ˆå¸¦å®½ã€è·ç¦»è´¹ç”¨ç­‰ï¼‰ï¼Œå› æ­¤ï¼Œå¯¹äºè·¯ç”±ä¹‹é—´çš„è·¯ç”±é€‰æ‹©ä¸èƒ½ä½¿ç”¨cost
- ASä¹‹é—´çš„è·¯ç”±é€‰æ‹©å¿…é¡»è€ƒè™‘ç›¸å…³ç­–ç•¥ï¼ˆæ”¿æ²»ã€ç»æµã€å®‰å…¨ç­‰ï¼‰
- BGPç”¨äºé€‰æ‹©ä¸€æ¡æ¯”è¾ƒå¥½çš„è·¯ç”±ï¼Œå¹¶éæ‰¾å‡ºä¸€æ¡æœ€ä½³è·¯ç”±

#### å·¥ä½œè¿‡ç¨‹

- åœ¨é…ç½®BGPæ—¶ï¼Œæ¯ä¸ªASçš„ç®¡ç†å‘˜è¦è‡³å°‘é€‰æ‹©ä¸€ä¸ªrouterä½œä¸ºè¯¥ASçš„â€œBGPå‘è¨€äººâ€
- ä¸åŒASçš„BGPå‘è¨€äººè¦äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼Œé¦–å…ˆå¿…é¡»å»ºç«‹TCPè¿æ¥ï¼Œç«¯å£å·ä¸º179
	- åœ¨æ­¤TCPè¿æ¥ä¸Šäº¤æ¢BGPæŠ¥æ–‡ä»¥å»ºç«‹BGPä¼šè¯
	- åˆ©ç”¨BGPä¼šè¯äº¤æ¢è·¯ç”±ä¿¡æ¯ï¼ˆæ¯”å¦‚å¢åŠ æ–°çš„è·¯ç”±ï¼Œæ’¤é”€è¿‡æ—¶çš„è·¯ç”±ï¼Œä»¥åŠæŠ¥å‘Šå‡ºé”™çš„æƒ…å†µç­‰ï¼‰
	- ä½¿ç”¨TCPè¿æ¥äº¤æ¢è·¯ç”±ä¿¡æ¯çš„ä¸¤ä¸ªBGPå‘è¨€äººï¼Œå½¼æ­¤ç§°ä¸ºå¯¹æ–¹çš„neighbor or peer
- BGPå‘è¨€äººé™¤äº†è¿è¡ŒBGPå¤–ï¼Œè¿˜å¿…é¡»è¿è¡Œè‡ªå·±æ‰€åœ¨ASæ‰€ä½¿ç”¨çš„å†…éƒ¨ç½‘å…³åè®®IGPæ¯”å¦‚ï¼ˆOSPF RIPï¼‰
- BGPå‘è¨€äººäº¤æ¢ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯ï¼ˆè¦åˆ°è¾¾æŸä¸ªç½‘ç»œæ‰€è¦ç»è¿‡çš„ä¸€ç³»åˆ—è‡ªæ²»ç³»ç»Ÿï¼‰
- å½“BGPå‘è¨€äººäº’ç›¸äº¤æ¢äº†ç½‘ç»œå¯è¾¾æ€§çš„ä¿¡æ¯åï¼Œå„BGPå‘è¨€äººå°±æ ¹æ®æ‰€é‡‡ç”¨çš„ç­–ç•¥ä»æ”¶åˆ°çš„è·¯ç”±ä¿¡æ¯ä¸­æ‰¾å‡ºåˆ°è¾¾å„ASçš„è¾ƒå¥½çš„è·¯ç”±ï¼Œä¹Ÿå°±æ˜¯æ„é€ å‡ºæ ‘å½¢ç»“æ„ï¼Œä¸å­˜åœ¨å›è·¯çš„ASè¿é€šå›¾



#### åŒ…å«çš„æŠ¥æ–‡ç±»å‹

- OPENæŠ¥æ–‡
	ç”¨æ¥ä¸ç›¸é‚»çš„å¦ä¸€ä¸ªBGPå‘è¨€äººå»ºç«‹è”ç³»ï¼Œä½¿é€šä¿¡åˆå§‹åŒ–
- UPDATEæŠ¥æ–‡
	ç”¨æ¥é€šå‘ŠæŸä¸€è·¯ç”±çš„ä¿¡æ¯ï¼Œä»¥åŠåˆ—å‡ºè¦æ’¤é”€çš„å¤šæ¡è·¯ç”±
- KEEPALIVEæŠ¥æ–‡
	ç”¨æ¥å‘¨æœŸæ€§åœ°è¯å®neighborçš„è¿é€šæ€§
- NOTIFICATIONæŠ¥æ–‡
	ç”¨æ¥å‘é€æ£€æµ‹åˆ°çš„å·®é”™

![](../images/è®¡ç½‘å›¾21.jpg)

---

## 4.7 IPv4æ•°æ®æŠ¥çš„é¦–éƒ¨æ ¼å¼

![](../images/è®¡ç½‘å›¾22.jpg)

| å­—æ®µ                      | é•¿åº¦     | ä½œç”¨                                                         |
| ------------------------- | -------- | ------------------------------------------------------------ |
| **Version**               | 4ä½      | IP åè®®ç‰ˆæœ¬ï¼ŒIPv4 ä¸º `0100`                                  |
| **IHLï¼ˆHeader Lengthï¼‰**  | 4ä½      | é¦–éƒ¨é•¿åº¦ï¼Œå•ä½æ˜¯ 4 å­—èŠ‚ï¼Œæœ€å°å€¼ä¸º 5ï¼ˆå³ 20 å­—èŠ‚ï¼‰æœ€å¤§15ï¼ˆ60å­—èŠ‚ï¼Œ20å›ºå®š+40å¯å˜ï¼‰ |
| **Type of Service (ToS)** | 8ä½      | åŒºåˆ†æœåŠ¡ï¼šç”¨äºåŒºåˆ†ä¼˜å…ˆçº§ã€ä½å»¶è¿Ÿ/é«˜ååç­‰ï¼Œä¸€èˆ¬ä¸ä½¿ç”¨        |
| **Total Length**          | 16ä½     | æ•°æ®æŠ¥æ€»é•¿åº¦ï¼ˆé¦–éƒ¨ + æ•°æ®ï¼‰ï¼Œæœ€å¤§ä¸º 65535 å­—èŠ‚               |
| **Identification**        | 16ä½     | å”¯ä¸€æ ‡è¯†ä¸€ä¸ªæ•°æ®æŠ¥ï¼Œç”¨äºåˆ†ç‰‡é‡ç»„ï¼Œå­ç‰‡çš„ä¸æ¯ç‰‡çš„ä¸€æ ·         |
| **Flags**                 | 3ä½      | åˆ†ç‰‡æ ‡å¿—ï¼šDFï¼ˆ1è¡¨ç¤ºä¸å…è®¸åˆ†ç‰‡0è¡¨ç¤ºå…è®¸åˆ†ç‰‡ï¼‰ã€MFï¼ˆ1è¡¨ç¤ºåé¢è¿˜æœ‰åˆ†ç‰‡0è¡¨ç¤ºåé¢æ²¡äº†ï¼‰ |
| **Fragment Offset**       | 13ä½     | è¡¨ç¤ºå½“å‰åˆ†ç‰‡åœ¨åŸå§‹æ•°æ®æŠ¥ä¸­çš„åç§»ä½ç½®ï¼ˆå•ä½8å­—èŠ‚ï¼‰            |
| **Time to Live (TTL)**    | 8ä½      | ç”Ÿå­˜æ—¶é—´ï¼Œ==é˜²æ­¢æ•°æ®åŒ…åœ¨ç½‘ç»œä¸­æ— é™å¾ªç¯==ï¼Œä»¥è·³æ•°ä¸ºå•ä½ï¼Œrouterè½¬å‘IPæ•°æ®æŠ¥æ—¶ï¼Œå°†è¯¥å­—æ®µçš„å€¼å‡1ï¼Œè‹¥ä¸ä¸º0åˆ™è½¬å‘åä¹‹ä¸¢å¼ƒ |
| **Protocol**              | 8ä½      | æŒ‡å®šæ•°æ®éƒ¨åˆ†æ˜¯ä½•ç§åè®®æ•°æ®å•å…ƒï¼ˆå¯¹åº”å…³ç³»è§ä¸‹ï¼‰               |
| **Header Checksum**       | 16ä½     | æ ¡éªŒ IPv4 é¦–éƒ¨æ˜¯å¦å‡ºé”™ï¼ˆæ³¨æ„ï¼šåªæ ¡éªŒé¦–éƒ¨ï¼Œä¸æ ¡éªŒæ•°æ®ï¼‰æ¯”CRCæ ¡éªŒç ç®€å•ï¼Œç§°ä¸ºå› ç‰¹ç½‘æ ¡éªŒå’Œï¼Œæ•°æ®æŠ¥æ¯ç»è¿‡ä¸€ä¸ªrouteréƒ½è¦é‡æ–°è®¡ç®— |
| **Source Address**        | 32ä½     | æºIPåœ°å€                                                     |
| **Destination Address**   | 32ä½     | ç›®çš„IPåœ°å€                                                   |
| **Optionsï¼ˆå¯é€‰ï¼‰**       | å¯å˜é•¿   | ä¸€äº›ç‰¹æ®ŠåŠŸèƒ½ï¼ˆå¦‚è®°å½•è·¯ç”±ã€ä¸¥æ ¼æºè·¯ç”±ï¼‰ï¼ŒåŒæ—¶ä¹Ÿä½¿å¾—é¦–éƒ¨é•¿åº¦å¯å˜ï¼Œå¾ˆå°‘ç”¨ |
| **Paddingï¼ˆå¯é€‰ï¼‰**       | è¡¥é½å­—èŠ‚ | ä½¿é¦–éƒ¨é•¿åº¦ä¸º4å­—èŠ‚æ•´æ•°å€ï¼Œå…¨0å¡«å……                             |

å¯¹IPæ•°æ®æŠ¥åˆ†ç‰‡

![](../images/è®¡ç½‘å›¾23.jpg)

protocol

| åè®®åç§° | åè®®å­—æ®µå€¼ |
| -------- | ---------- |
| ICMP     | 1          |
| IGMP     | 2          |
| TCP      | 6          |
| UDP      | 17         |
| IPv6     | 41         |
| OSPF     | 89         |

åˆ‡ç‰‡ä¾‹å­

![](../images/è®¡ç½‘å›¾24.jpg)

æ€ä¹ˆè®¡ç®—é¦–éƒ¨æ£€éªŒå’Œ

**Checksum = ~ (H1 + H2 + ... + Hn)**
 ï¼ˆå…¶ä¸­ H1~Hn æ˜¯ IP å¤´éƒ¨æŒ‰ 16 ä½åˆ‡å‰²çš„å„æ®µï¼ŒåŠ æ³•ä¸ºå¸¦è¿›ä½åŠ æ³•ï¼‰

`åå…­è¿›åˆ¶ï¼š 0 1 2 3 4 5 6 7 8 9 A  B  C  D  E  F`
`åè¿›åˆ¶ï¼š   0 1 2 3 4 5 6 7 8 9 10 11 12 13 14 15`



å¯¹äºåˆ†æ´¾å‰ç¼€çš„é—®é¢˜

 æ­¥éª¤ 1ï¼š**ç¡®å®šæ€»åœ°å€èŒƒå›´**

`30.138.118.0/23` è¡¨ç¤ºçš„æ˜¯ï¼š

- **èµ·å§‹åœ°å€**ï¼š30.138.118.0

- **æ©ç **ï¼š23 ä½ï¼Œå³ `255.255.254.0`ï¼Œä¹Ÿå°±æ˜¯å—å¤§å°ä¸ºï¼š

	232âˆ’23=29=512 ä¸ªåœ°å€2^{32-23} = 2^9 = 512 \text{ ä¸ªåœ°å€}232âˆ’23=29=512 ä¸ªåœ°å€

- æ‰€ä»¥å¯ç”¨åœ°å€èŒƒå›´æ˜¯ï¼š

	- **èµ·å§‹åœ°å€**ï¼š30.138.118.0
	- **ç»“æŸåœ°å€**ï¼š30.138.119.255

------

æ­¥éª¤ 2ï¼š**æ•´ç†æ¯ä¸ª LAN çš„ä¸»æœºæ•°ï¼Œå¹¶æ’åºï¼ˆä»å¤§åˆ°å°ï¼‰**

| LANç¼–å· | ä¸»æœºæ•°é‡                  |
| ------- | ------------------------- |
| LAN3    | 150                       |
| LAN2    | 91                        |
| LAN5    | 15                        |
| LAN4    | 3                         |
| LAN1    | ?ï¼ˆå›¾ç‰‡ä¸­æœªæ ‡æ˜ï¼Œéœ€è¡¥å……ï¼‰ |

------

 æ­¥éª¤ 3ï¼š**ä¸ºæ¯ä¸ª LAN åˆ†é…è¶³å¤Ÿå¤§çš„åœ°å€å—**

å› ä¸ºæ¯ä¸ªå­ç½‘å¿…é¡»ç•™å‡º **2 ä¸ªåœ°å€**ï¼ˆç½‘ç»œåœ°å€å’Œå¹¿æ’­åœ°å€ï¼‰ï¼Œæ‰€ä»¥**æœ€å°å­ç½‘å¤§å° = ä¸»æœºæ•° + 2**ï¼Œå†å‘ä¸Šå– 2 çš„å¹‚å¾—åˆ°åœ°å€å—å¤§å°ã€‚

ä¾‹å¦‚ï¼š

- 150 ä¸»æœº â‡’ éœ€è¦ 152 åœ°å€ â‡’ `2^8 = 256` â‡’ ä½¿ç”¨ `/24`
- 91 ä¸»æœº â‡’ éœ€è¦ 93 åœ°å€ â‡’ `2^7 = 128` â‡’ ä½¿ç”¨ `/25`
- 15 ä¸»æœº â‡’ éœ€è¦ 17 åœ°å€ â‡’ `2^5 = 32` â‡’ ä½¿ç”¨ `/27`
- 3 ä¸»æœº â‡’ éœ€è¦ 5 åœ°å€ â‡’ `2^3 = 8` â‡’ ä½¿ç”¨ `/29`

æ­¥éª¤ 4ï¼š**ä»èµ·å§‹åœ°å€èµ·ï¼ŒæŒ‰åœ°å€å¯¹é½æ–¹å¼ä¾æ¬¡åˆ†é…**

æ¯ç§å­ç½‘æ©ç ä¸‹ï¼Œåœ°å€è¦**å¯¹é½åˆ°è¯¥å—çš„èµ·å§‹ä½ç½®**ï¼ˆå³å—å¤§å°çš„æ•´æ•°å€èµ·å§‹ï¼‰ã€‚

- `/24`ï¼šå—å¤§å° 256 â‡’ èµ·å§‹åœ°å€å¿…é¡»æ˜¯ `...xxx.0`
- `/25`ï¼šå—å¤§å° 128 â‡’ å¿…é¡»æ˜¯ `...xxx.0` æˆ– `...xxx.128`
- `/27`ï¼šå—å¤§å° 32 â‡’ å¿…é¡»æ˜¯ `...xxx.0`ã€`...xxx.32`ã€`...xxx.64` ç­‰
- `/29`ï¼šå—å¤§å° 8 â‡’ å¯¹é½ `...xxx.0`ã€`...xxx.8`ã€`...xxx.16` ...

## 4.8 ç½‘é™…æ§åˆ¶æŠ¥æ–‡åè®®ICMP

>Internet Control Message Protocol
>
>ä¸»æœºæˆ–è·¯ç”±å™¨ä½¿ç”¨ICMPæ¥å‘é€å·®é”™æŠ¥å‘ŠæŠ¥æ–‡å’Œè¯¢é—®æŠ¥æ–‡
>
>ICMPæŠ¥æ–‡è¢«å°è£…åœ¨IPæ•°æ®æŠ¥ä¸­å‘é€



### 4.8.1 åˆ†ç±»

- ç»ˆç‚¹ä¸å¯è¾¾
	>- routeræˆ–hostä¸èƒ½äº¤ä»˜æ•°æ®æŠ¥æ—¶å‘é€ï¼›å…·ä½“è¿˜å¯ä»¥åˆ†ç›®çš„ä¸»æœºã€ç«¯å£ã€åè®®ä¸å¯è¾¾ç­‰13ç§

- æºç‚¹æŠ‘åˆ¶
	>å½“routeræˆ–hostç”±äºæ‹¥å¡è€Œä¸¢å¼ƒæ•°æ®æŠ¥æ—¶ï¼Œå‘æºç‚¹å‘é€ï¼Œä½¿å¾—æºç‚¹æ¸…æ¥šåº”å½“æ”¾æ…¢å‘é€æ•°æ®æŠ¥çš„é€Ÿåº¦

- æ—¶é—´è¶…è¿‡
	>routeræŠŠTTLå‡åˆ°0ä¹‹åï¼Œé™¤äº†ä¸¢å¼ƒæ•°æ®æŠ¥ä¹‹å¤–ï¼Œè¿˜å‘æºç‚¹å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡
	>
	>å¦å¤–ï¼Œå½“ç»ˆç‚¹åœ¨é¢„å…ˆè§„å®šçš„æ—¶é—´å†…æ²¡æœ‰æ”¶åˆ°ä¸€ä¸ªæ•°æ®æŠ¥çš„æ‰€æœ‰æ•°æ®æŠ¥ç‰‡æ—¶ï¼Œä¸¢å¼ƒå·²ç»æ”¶åˆ°çš„æŠ¥ç‰‡ã€‚å‘é€æ—¶é—´è¶…è¿‡æŠ¥æ–‡

- å‚æ•°é—®é¢˜
	>å½“routeræˆ–hostæ”¶åˆ°IPæ•°æ®æŠ¥åï¼Œæ ¹æ®é¦–éƒ¨ä¸­çš„header checksumå‘ç°ä¼ è¾“è¿‡ç¨‹ä¸­å‡ºç°è¯¯ç ï¼Œå°±ä¸¢å¼ƒè¯¥æ•°æ®æŠ¥ï¼Œå‘æºç‚¹å‘é€å‚æ•°é—®é¢˜æŠ¥æ–‡

- é‡å®šå‘ï¼ˆæ”¹å˜è·¯ç”±ï¼‰
	>routeræŠŠæ”¹å˜è·¯ç”±æŠ¥æ–‡å‘é€ç»™ä¸»æœºï¼Œè®©ä¸»æœºçŸ¥é“ä¸‹æ¬¡åº”è¯¥å°†æ•°æ®æŠ¥å‘ç»™å…¶ä»–çš„router



### 4.8.2 ä¸åº”è¯¥å‘é€ICMPæŠ¥æ–‡çš„æƒ…å†µ

- å¯¹ICMPæŠ¥æ–‡ä¸å†å‘é€ICMPæŠ¥æ–‡ï¼ˆæŠ¥é”™ä¿¡æ¯å‡ºé”™äº†ä¹‹åä¸å¥—å¨ƒï¼‰
- å¯¹ä¸€ä¸ªåˆ†ç‰‡çš„æ•°æ®æŠ¥ç‰‡çš„æ‰€æœ‰åç»­æ•°æ®æŠ¥ç‰‡éƒ½ä¸å‘é€
- å¯¹å…·æœ‰å¤šæ’­åœ°å€çš„æ•°æ®æŠ¥éƒ½ä¸å‘é€ICMPå·®é”™æŠ¥æ–‡
- å¯¹å…·æœ‰ç‰¹æ®Šåœ°å€ï¼ˆ127.0.0.0ï¼ˆæœ¬åœ°ç¯å›æµ‹è¯•åœ°å€ï¼‰æˆ–0.0.0.0ï¼‰çš„æ•°æ®æŠ¥ä¸å‘é€ 



### 4.8.3 å¸¸è§çš„ICMPè¯¢é—®æŠ¥æ–‡

- **å›é€è¯·æ±‚å’Œå›ç­”**
	ICMPå›é€è¯·æ±‚æŠ¥æ–‡æ˜¯ç”±ä¸»æœºæˆ–routerå‘ä¸€ä¸ªç‰¹å®šçš„ç›®çš„ä¸»æœºå‘å‡ºçš„è¯¢é—®
	æ”¶åˆ°æ­¤æŠ¥æ–‡çš„ä¸»æœºå¿…é¡»ç»™æºä¸»æœºå‘é€ICMPå›é€å›ç­”æŠ¥æ–‡
	ç”¨æ¥**æµ‹è¯•ç›®çš„ç«™æ˜¯å¦å¯è¾¾**ä»¥åŠäº†è§£å…¶æœ‰å…³çŠ¶æ€
- **æ—¶é—´æˆ³è¯·æ±‚å’Œå›ç­”**
	æ˜¯è¯·æ±‚æŸä¸ªä¸»æœºæˆ–è€…routerå›ç­”å½“å‰çš„æ—¥æœŸå’Œæ—¶é—´
	å…¶ä¸­æœ‰ä¸€ä¸ª32bitçš„å­—æ®µï¼Œå…¶ä¸­å†™å…¥çš„æ•´æ•°ä»£è¡¨ä»1900.1.1èµ·åˆ°ç°åœ¨å¤šå°‘ç§’
	ç”¨æ¥è¿›è¡Œ**æ—¶é’ŸåŒæ­¥**å’Œ**æµ‹é‡æ—¶é—´**





### 4.8.4 åº”ç”¨ä¾‹å­

#### åˆ†ç»„ç½‘é—´æ¢æµ‹PING

>Packet InterNet Groper

- ç”¨æ¥æµ‹è¯•ä¸»æœºæˆ–routerä¹‹é—´çš„è¿é€šæ€§
- åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚çš„ICMPï¼ˆæ²¡æœ‰é€šè¿‡è¿è¾“å±‚çš„TCPæˆ–UDPï¼‰
- ä½¿ç”¨çš„ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡

#### è·Ÿè¸ªè·¯ç”±traceroute

- ç”¨æ¥æµ‹è¯•IPæ•°æ®æŠ¥ä»æºä¸»æœºåˆ°ç›®çš„ä¸»æœºè¦ç»è¿‡å“ªäº›router
- Windowsç‰ˆæœ¬
	- tracertå‘½ä»¤
	- åº”ç”¨å±‚ç›´æ¥ä½¿ç”¨ç½‘é™…å±‚ICMP
	- ä½¿ç”¨äº†ICMPå›é€è¯·æ±‚å’Œå›ç­”æŠ¥æ–‡ä»¥åŠå·®é”™æŠ¥å‘ŠæŠ¥æ–‡



---

## 4.9 è™šæ‹Ÿä¸“ç”¨ç½‘VPNå’Œç½‘ç»œåœ°å€è½¬æ¢NAT

### 4.9.1 VPN

å®šä¹‰
>æ˜¯ä¸€ç§åœ¨å…¬ç”¨ç½‘ç»œï¼ˆå¦‚ Internetï¼‰ä¸Šæ„å»º**åŠ å¯†çš„ã€ä¸“å±çš„ã€é€»è¾‘ä¸Šçš„ç§æœ‰ç½‘ç»œ**æŠ€æœ¯

ä½œç”¨
>è®©è¿œç¨‹ç”¨æˆ·åƒåœ¨å…¬å¸/æ ¡å›­/å±€åŸŸç½‘é‡Œä¸€æ ·å®‰å…¨è®¿é—®å†…ç½‘èµ„æº



| æŠ€æœ¯                      | è¯´æ˜                                         |
| ------------------------- | -------------------------------------------- |
| **éš§é“æŠ€æœ¯ï¼ˆTunnelingï¼‰** | æŠŠç§æœ‰æ•°æ®æ‰“åŒ…æˆå…¬å…±ç½‘ç»œå¯è¯†åˆ«çš„æ•°æ®åŒ…       |
| **åŠ å¯†æŠ€æœ¯**              | ä¿æŠ¤æ•°æ®ä¸è¢«çªƒå¬ï¼ˆIPsecã€OpenVPNã€SSLç­‰ï¼‰    |
| **èº«ä»½éªŒè¯**              | éªŒè¯ç”¨æˆ·åˆæ³•æ€§ï¼ˆç”¨æˆ·åå¯†ç ã€è¯ä¹¦ã€åŒå› ç´ ç­‰ï¼‰ |

- åŒä¸€æœºæ„ä¸åŒéƒ¨é—¨çš„å†…éƒ¨ç½‘ç»œæ‰€æ„æˆçš„VPNåˆç§°ä¸ºå†…è”ç½‘VPN
- æœ‰æ—¶ä¸€ä¸ªæœºæ„çš„VPNéœ€è¦æŸäº›å¤–éƒ¨æœºæ„å‚åŠ ï¼Œè¿™æ ·çš„VPNå°±ç§°ä¸ºå¤–è”ç½‘VPN



### 4.9.2 NAT

network address translation

NAT æ˜¯ä¸€ç§**åœ¨è·¯ç”±å™¨/é˜²ç«å¢™ä¸Šè¿›è¡Œçš„ IP åœ°å€è½¬æ¢æœºåˆ¶**ï¼Œä¸»è¦è§£å†³ï¼š

- **IPv4 åœ°å€ä¸å¤Ÿç”¨**ï¼›
- å†…ç½‘è®¾å¤‡ä¸èƒ½ç›´æ¥è®¿é—®å…¬ç½‘çš„é—®é¢˜



> è®©å¤šä¸ªå†…ç½‘ä¸»æœºå…±äº«ä¸€ä¸ªå…¬ç½‘ IP å‡ºå»ä¸Šç½‘ï¼Œå‡ºé—¨å¸¦â€œé©¬ç”²â€ï¼Œå›å®¶é â€œè®°å¿†â€

å®é™…ç”¨é€”

- å®¶ç”¨è·¯ç”±å™¨èƒ½è®©å…¨å®¶è®¾å¤‡å…±äº«ä¸€ä¸ªå…¬ç½‘ IP
- é˜²æ­¢å…¬ç½‘ç›´æ¥è®¿é—®å†…ç½‘ï¼Œæå‡ä¸€å®šå®‰å…¨æ€§
- **ç»•è¿‡ IPv4 åœ°å€çŸ­ç¼ºé—®é¢˜**ï¼ˆNAT çš„æœ€å¤§åŠŸåŠ³ï¼‰

å­˜åœ¨ä¸€ä¸ªé—®é¢˜ï¼šå¦‚æœNATrouterå…·æœ‰Nä¸ªå…¨çƒIPåœ°å€ï¼Œé‚£ä¹ˆè‡³å¤šåªèƒ½æœ‰Nä¸ªå†…ç½‘ä¸»æœºèƒ½åŒæ—¶å’Œå› ç‰¹ç½‘ä¸Šçš„ä¸»æœºé€šä¿¡



å¤–ç½‘ä¸»æœºä¸å¯ä»¥é¦–å…ˆå‘èµ·é€šä¿¡ï¼Œå†…ç½‘ä¸»æœºä¸èƒ½ç›´æ¥å……å½“å› ç‰¹ç½‘æœåŠ¡å™¨

---

# äº”ã€è¿è¾“å±‚

## 5.1 æ¦‚è¿°

- æ­¤å‰å®ç°äº†ä¸»æœºåˆ°ä¸»æœºçš„é€šä¿¡
- ä½†å®é™…ä¸Šï¼Œè®¡ç½‘ä¸­é€šä¿¡çš„çœŸæ­£å®ä½“æ˜¯ä½äºé€šä¿¡ä¸¤æ®µä¸»æœºçš„è¿›ç¨‹
- å¦‚ä½•ä¸ºè¿è¡Œåœ¨ä¸åŒä¸»æœºä¸Šçš„åº”ç”¨è¿›ç¨‹æä¾›ç›´æ¥çš„é€šä¿¡æœåŠ¡æ˜¯è¿è¾“å±‚çš„ä»»åŠ¡ï¼Œè¿è¾“å±‚åè®®åˆç§°ä¸º==ç«¯åˆ°ç«¯åè®®==
- è¿è¾“å±‚ç›´æ¥ä¸ºåº”ç”¨è¿›ç¨‹é—´çš„é€»è¾‘é€šä¿¡æä¾›æœåŠ¡
- æ ¹æ®åº”ç”¨éœ€æ±‚çš„ä¸åŒï¼Œåˆ†ä¸º**é¢å‘è¿æ¥çš„TCP**å’Œ**æ— è¿æ¥çš„UDP**



## 5.2 è¿è¾“å±‚ç«¯å£å·ã€å¤ç”¨å’Œåˆ†ç”¨çš„æ¦‚å¿µ

>å¦‚æœ IP åœ°å€æ˜¯ä½ å®¶åœ°å€ï¼Œç«¯å£å·å°±æ˜¯ä½ å®¶æ¯ä¸ªæˆ¿é—´çš„é—¨ç‰Œå·ã€‚
>
>- æœ‰äº† IP åªèƒ½é€åˆ°æ¥¼ä¸‹ï¼›
>- æœ‰äº†ç«¯å£å·æ‰èƒ½é€åˆ°ä½ æ‰‹ä¸Šï¼ˆå¯¹åº”ç¨‹åºï¼‰

- è¿è¡Œåœ¨è®¡ç®—æœºä¸Šçš„è¿›ç¨‹ä½¿ç”¨**è¿›ç¨‹æ ‡è¯†ç¬¦PID**æ¥è¡¨ç¤º
- ä¸åŒOSé‡‡ç”¨ä¸åŒæ ¼å¼çš„PID
- ä¸ºäº†ä½¿å¾—ä¸åŒOSçš„åº”ç”¨è¿›ç¨‹èƒ½å¤Ÿé€šä¿¡ï¼Œæ‰€ä»¥å¿…é¡»è¦ä½¿ç”¨**ç»Ÿä¸€çš„æ–¹æ³•å¯¹TCP/IPä½“ç³»çš„åº”ç”¨è¿›ç¨‹è¿›è¡Œæ ‡è¯†**
- TCP/IPä½“ç³»çš„è¿è¾“å±‚ä½¿ç”¨==ç«¯å£å·==æ¥åŒºåˆ†åº”ç”¨å±‚çš„ä¸åŒå¼•ç”¨è¿›ç¨‹



### 5.2.1 ç«¯å£å·

- ä½¿ç”¨16bitè¡¨ç¤ºï¼ŒèŒƒå›´0-65535
- 0â€“1023ï¼š**çŸ¥åç«¯å£**ï¼ˆå¦‚HTTP: 80, HTTPS: 443, FTP: 21, DNS: 53ï¼‰
- 1024â€“49151ï¼š**æ³¨å†Œç«¯å£**ï¼ˆå¸¸ç”±ç”¨æˆ·ç¨‹åºæˆ–ç¬¬ä¸‰æ–¹æœåŠ¡ä½¿ç”¨ï¼‰
	ä¸ºæ²¡æœ‰ç†ŸçŸ¥ç«¯å£å·çš„åº”ç”¨ç¨‹åºä½¿ç”¨ï¼Œå¿…é¡»ç™»è®°é˜²æ­¢é‡å¤
- 49152â€“65535ï¼š**çŸ­æš‚ç«¯å£**ï¼ˆæ“ä½œç³»ç»Ÿä¸´æ—¶åˆ†é…ï¼‰



**æ³¨æ„ï¼šç«¯å£å·åªæœ‰æœ¬åœ°æ„ä¹‰ï¼Œåªæ˜¯ä¸ºäº†æ ‡è¯†è®¡ç®—æœºåº”ç”¨å±‚ä¸­çš„å„ä¸ªè¿›ç¨‹ï¼Œä¸åŒä¸»æœºçš„ç›¸åŒç«¯å£å·æ²¡æœ‰è”ç³»**

### 5.2.2 å¤ç”¨

> å¤šä¸ªåº”ç”¨ç¨‹åºï¼ˆè¿›ç¨‹ï¼‰**å…±äº«ä¸€ä¸ªè¿è¾“å±‚åè®®ï¼ˆå¦‚TCPæˆ–UDPï¼‰**ï¼Œé€šè¿‡ç«¯å£å·æ¥åŒºåˆ†æ•°æ®ã€‚

>ä¾‹å¦‚ï¼šä½ ç”µè„‘åŒæ—¶æ‰“å¼€äº†ï¼š
>
>- å¾®ä¿¡ç½‘é¡µç‰ˆï¼ˆä½¿ç”¨443ç«¯å£ï¼‰
>- ç½‘é¡µæµè§ˆå™¨è®¿é—®åšå®¢ï¼ˆä½¿ç”¨80ç«¯å£ï¼‰
>- ä¸‹è½½å™¨åœ¨è¿è¡Œï¼ˆç”¨ä¸€ä¸ªè‡ªå®šä¹‰ç«¯å£ï¼‰
>
>è¿™äº›ä¸åŒåº”ç”¨éƒ½é€šè¿‡ä¸€ä¸ª TCP æ¨¡å—æŠŠæ•°æ®å‘å‡ºå»ï¼Œå¤ç”¨çš„æ˜¯åŒä¸€ä¸ª TCP åè®®ï¼Œ**ä½†ç«¯å£å·ä¸åŒ**ï¼Œæ•°æ®æ‰“ä¸Šâ€œæ ‡ç­¾â€ä¸€èµ·é€åˆ°ç½‘ç»œå±‚

### 5.2.3 åˆ†ç”¨

>è¿è¾“å±‚æ ¹æ®æ¥æ”¶åˆ°çš„æ•°æ®ä¸­çš„ç«¯å£å·ï¼ŒæŠŠæ•°æ®é€åˆ°æ­£ç¡®çš„è¿›ç¨‹

>ä¾‹å¦‚ï¼šæ•°æ®åŒ…åˆ°è¾¾ä½ çš„è®¡ç®—æœºï¼›
>
>æ“ä½œç³»ç»Ÿå‘ç°å®ƒçš„ç›®çš„ç«¯å£æ˜¯ 80ï¼Œå°±æŠŠå®ƒäº¤ç»™ç›‘å¬ 80 ç«¯å£çš„ Web æœåŠ¡å™¨ç¨‹åºï¼›
>
>å¦‚æœæ˜¯ç«¯å£ 443ï¼Œå°±äº¤ç»™ HTTPS æœåŠ¡ï¼›
>
>æ²¡æœ‰è¿›ç¨‹ç›‘å¬å¯¹åº”ç«¯å£ï¼Ÿâ€”â€”ç³»ç»Ÿè¿”å›ä¸€ä¸ª â€œç«¯å£ä¸å¯è¾¾â€ çš„ ICMP æŠ¥æ–‡

å¸¸ç”¨åè®®æ‰€ä½¿ç”¨çš„ç«¯å£å·

![](../images/è®¡ç½‘å›¾24.png)

## 5.3 UDPå’ŒTCPçš„å¯¹æ¯”

UDP User Datagram Protocol

TCP Transmission Control Protocol

| æ¯”è¾ƒé¡¹   | TCP                                                          | UDP                    |
| -------- | ------------------------------------------------------------ | ---------------------- |
| æ˜¯å¦è¿æ¥ | **é¢å‘è¿æ¥**ï¼ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹ï¼‰<br />å››æŠ¥æ–‡æŒ¥æ‰‹é‡Šæ”¾è¿æ¥ï¼ˆé€»è¾‘é“¾æ¥ï¼‰ | **æ— è¿æ¥**ï¼ˆå‘é€å³èµ°ï¼‰ |

- UDPæ”¯æŒå•æ’­ã€å¤šæ’­ä»¥åŠå¹¿æ’­
- TCPé¦–å…ˆéœ€è¦ä¸‰æ¬¡æ¡æ‰‹å»ºç«‹è¿æ¥ï¼Œä»…æ”¯æŒå•æ’­

| æ¯”è¾ƒé¡¹   | TCP                                          | UDP                                              |
| -------- | -------------------------------------------- | ------------------------------------------------ |
| æ˜¯å¦å¯é  | **å¯é ä¼ è¾“**ï¼ˆä¸¢åŒ…é‡ä¼ ã€æ•°æ®æ ¡éªŒã€é¡ºåºä¿è¯ï¼‰ | **ä¸å¯é ä¼ è¾“**ï¼ˆä¸ä¿è¯æ˜¯å¦é€è¾¾æˆ–é¡ºåºï¼‰           |
| æ•°æ®é‡æ’ | æ”¯æŒï¼ŒæŒ‰åºåˆ°è¾¾                               | ä¸æ”¯æŒï¼Œå¯èƒ½ä¹±åº                                 |
| å¤„ç†     | ==é¢å‘å­—èŠ‚æµ==æœ‰ç¡®è®¤ACKå’Œé‡ä¼ æœºåˆ¶            | æ—¢ä¸åˆå¹¶ï¼Œä¹Ÿä¸æ‹†åˆ†ï¼Œ==é¢å‘åº”ç”¨æŠ¥æ–‡==æ²¡æœ‰ä¸¢åŒ…å¤„ç† |
| ç”¨ä¸ªæ¯”å–» | é¡ºä¸°å¿«é€’ + æŸ¥è¯¢ç‰©æµ                          | å–·æ³‰æ´’æ°´å™¨ï¼Œæ°´æµä¸åœå–·å‡ºå»                       |

| æ¯”è¾ƒé¡¹   | TCP                        | UDP                  |
| -------- | -------------------------- | -------------------- |
| ä¼ è¾“å•ä½ | å­—èŠ‚æµï¼ˆstreamï¼‰           | æ•°æ®æŠ¥ï¼ˆdatagramï¼‰   |
| è¾¹ç•Œå¤„ç† | æ²¡æœ‰è¾¹ç•Œï¼Œå¼€å‘è€…éœ€è‡ªå·±åˆ’åˆ† | æœ‰æ˜ç¡®çš„æ¶ˆæ¯è¾¹ç•Œ     |
| ç¤ºä¾‹     | æ‹†æˆä¸€å¤§ä¸²æ•°æ®æµ           | ä¸€æ¡ä¸€æ¡çš„çŸ­ä¿¡åŒ…å‘é€ |

![](../images/è®¡ç½‘å›¾25.jpg)

äºŒè€…é¦–éƒ¨å¯¹æ¯”

![](../images/è®¡ç½‘å›¾26.jpg)

## 5.4 TCPçš„æµé‡æ§åˆ¶

**æµé‡æ§åˆ¶**ï¼šæ˜¯ TCP åè®®ä¸­ç”¨äºæ§åˆ¶æ•°æ®å‘é€é€Ÿç‡çš„ä¸€ç§æœºåˆ¶ï¼Œç¡®ä¿**å‘é€æ–¹å‘é€çš„æ•°æ®ä¸ä¼šè¶…è¿‡æ¥æ”¶æ–¹çš„å¤„ç†èƒ½åŠ›**

TCP çš„æµé‡æ§åˆ¶æ˜¯é€šè¿‡**æ¥æ”¶çª—å£ï¼ˆReceive Windowï¼‰**æ¥å®ç°çš„ï¼Œæ¥æ”¶çª—å£å¤§å°ç”±æ¥æ”¶æ–¹ç»´æŠ¤ï¼Œå¹¶åœ¨æ¯ä¸ª TCP æŠ¥æ–‡ä¸­é€šè¿‡é¦–éƒ¨çš„ `window` å­—æ®µå‘ŠçŸ¥å‘é€æ–¹

ä¾‹å­ï¼š

1. **è¿æ¥å»ºç«‹æ—¶ï¼š**
	 æ¥æ”¶æ–¹å‘Šè¯‰å‘é€æ–¹ï¼šâ€œæˆ‘ç°åœ¨çš„çª—å£å¤§å°æ˜¯ `10KB`â€
2. **å‘é€æ–¹æ ¹æ®çª—å£å¤§å°æ§åˆ¶å‘é€é‡ï¼š**
	 å®ƒæœ€å¤šåªèƒ½å‘é€ `10KB` çš„æ•°æ®ï¼Œå‘å¤šäº†å°±å¾—ç­‰
3. **æ¥æ”¶æ–¹å¤„ç†åæ›´æ–°çª—å£ï¼š**
	 å‡è®¾æ¥æ”¶æ–¹å¤„ç†äº† 4KB æ•°æ®ï¼Œå®ƒä¼šå‘Šè¯‰å‘é€æ–¹ï¼šâ€œæˆ‘ç°åœ¨åˆç©ºå‡ºäº† 4KB çš„çª—å£â€
4. **å‘é€æ–¹ç»§ç»­å‘é€æ–°çš„æ•°æ®**



é’ˆå¯¹å…¶ä¸­çš„ç‰¹æ®Šæƒ…å†µï¼šæ¥æ”¶æ–¹åœ¨ç­‰å¾…å‘é€æ–¹å‘é€æ•°æ®ï¼Œå‘é€æ–¹åœ¨ç­‰å¾…æ¥æ”¶æ–¹çš„ackï¼ˆäº§ç”ŸåŸå› æ˜¯æ¥æ”¶æ–¹å‘é€çš„ACKä¸¢å¤±äº†ï¼‰ï¼Œä¸ºäº†é¿å…è¿™ç§æ­»é”ï¼Œä¼šè¿›è¡Œé›¶çª—å£æ¢æµ‹

>TCPå‘é€æ–¹æ”¶åˆ°æ¥æ”¶æ–¹çš„é›¶çª—å£é€šçŸ¥åï¼Œå¯åŠ¨æŒç»­è®¡æ—¶å™¨ï¼ŒæŒç»­è®¡æ—¶å™¨è¶…æ—¶åï¼Œå‘æ¥æ”¶æ–¹å‘é€é›¶çª—å£æ¢æµ‹æŠ¥æ–‡

## 5.5 TCPçš„æ‹¥å¡æ§åˆ¶

**æ‹¥å¡æ§åˆ¶**æ˜¯ TCP ç”¨æ¥æ§åˆ¶**æ•°æ®å‘é€é€Ÿç‡**çš„æœºåˆ¶ï¼Œç›®çš„æ˜¯ï¼š

> é˜²æ­¢ **å¯¹ç½‘ç»œä¸­æŸä¸€èµ„æºçš„éœ€æ±‚è¶…è¿‡äº†èµ„æºæ‰€èƒ½æä¾›çš„å¯ç”¨éƒ¨åˆ†ï¼Œç½‘ç»œæ€§èƒ½å˜å**æ‰€è°“ç½‘ç»œèµ„æºï¼Œæ¯”å¦‚è´·æ¬¾ã€äº¤æ¢èŠ‚ç‚¹çš„ç¼“å­˜å’Œå¤„ç†æœºåˆ¶ç­‰
>
> å¦‚æœå‡ºç°æ‹¥å¡è€Œä¸æ§åˆ¶ï¼Œæ•´ä¸ªç½‘ç»œçš„**ååé‡å°†éšç€è´Ÿè·çš„å¢å¤§è€Œä¸‹é™**

TCP å‘é€æ–¹ä¼š**åŠ¨æ€æ„ŸçŸ¥ç½‘ç»œæ˜¯å¦æ‹¥å¡**ï¼Œå¹¶æ®æ­¤**è°ƒæ•´å‘é€çª—å£**ï¼ˆå«åšâ€œæ‹¥å¡çª—å£â€ï¼Œ`cwnd`ï¼‰



![](../images/è®¡ç½‘å›¾27.jpg)

### 5.5.1 æ‹¥å¡æ§åˆ¶çš„å››å¤§ç®—æ³•

å‘é€æ–¹ç»´æŠ¤ä¸€ä¸ªç§°ä¸º**æ‹¥å¡çª—å£cwnd**çš„çŠ¶æ€å˜é‡ï¼Œå…¶å€¼å–å†³äºç½‘ç»œçš„æ‹¥å¡ç¨‹åº¦ï¼Œå¹¶ä¸”åŠ¨æ€å˜åŒ–

- `cwmd`çš„ç»´æŠ¤åŸåˆ™ï¼šåªè¦ç½‘ç»œæ²¡æœ‰å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å†å¢å¤§ä¸€äº›ï¼›ä½†åªè¦å‡ºç°æ‹¥å¡ï¼Œæ‹¥å¡çª—å£å°±å‡å°
- åˆ¤æ–­å‡ºç°æ‹¥å¡çš„ä¾æ®ï¼šæ²¡æœ‰æŒ‰æ—¶æ”¶åˆ°åº”å½“åˆ°è¾¾çš„ç¡®è®¤æŠ¥æ–‡ï¼ˆå³å‘ç”Ÿè¶…æ—¶é‡ä¼ ï¼‰
- å‘é€æ–¹å°†æ‹¥å¡çª—å£ä½œä¸ºå‘é€çª—å£ `swnd`,å³ `swnd`= `cwnd`
- ç»´æŠ¤ä¸€ä¸ªæ…¢å¼€å§‹é—¨é™ `ssthresh`çŠ¶æ€å˜é‡
	- å½“ `cwnd`< `ssthresh`æ—¶ï¼Œä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•
	- å½“ `cwnd`> `ssthresh`æ—¶ï¼Œåœæ­¢ä½¿ç”¨æ…¢å¼€å§‹ç®—æ³•è€Œé‡‡ç”¨æ‹¥å¡é¿å…ç®—æ³•
	- ç›¸ç­‰æ—¶ï¼Œæ…¢å¼€å§‹å’Œæ‹¥å¡é¿å…ç®—æ³•éƒ½å¯ä»¥

#### æ…¢å¼€å§‹slow-start

- åˆå§‹æ—¶ `cwnd` å¾ˆå°ï¼ˆé€šå¸¸æ˜¯1~2ä¸ª MSSï¼‰
- æ¯æ”¶åˆ°ä¸€ä¸ª ACKï¼Œ`cwnd` å¢åŠ  **1 ä¸ª MSS**
- æ¯ä¸€è½® RTT `cwnd` å˜æˆåŸæ¥ 2 å€ï¼Œ**æŒ‡æ•°å¢é•¿**
- å¢é•¿åˆ° `ssthresh`æ—¶ï¼Œæ”¹ç”¨æ‹¥å¡é¿å…ç®—æ³•

#### æ‹¥å¡é¿å…congestion avoidance

- å½“ `cwnd` è¾¾åˆ°ä¸€ä¸ªé˜ˆå€¼ï¼ˆ`ssthresh`ï¼‰ï¼Œè¿›å…¥æ­¤é˜¶æ®µ
- ä¸å†æŒ‡æ•°å¢é•¿ï¼Œè€Œæ˜¯**çº¿æ€§å¢é•¿**ï¼ˆæ¯ RTT å¢åŠ  1 MSSï¼‰

> - å½“é‡ä¼ è®¡æ—¶å™¨è¶…æ—¶ï¼Œå‘é€æ–¹åˆ¤æ–­ç½‘ç»œå¾ˆæœ‰å¯èƒ½äº§ç”Ÿäº†æ‹¥å¡ï¼Œäºæ˜¯æŠŠ `sshresh`æ›´æ–°ä¸ºå‘ç”Ÿæ‹¥å¡æ—¶ `cwnd`çš„ä¸€åŠ
> - æŠŠ `cwnd`å‡å°ä¸º1ï¼Œé‡æ–°å¼€å§‹æ…¢å¼€å§‹ç®—æ³•

#### å¿«é‡ä¼ fast retransmit

> æœ‰æ—¶å€™ï¼Œä¸ªåˆ«æŠ¥æ–‡æ®µä¼šåœ¨ç½‘ç»œä¸¢å¤±ï¼Œä½†æ˜¯å®é™…ä¸Šæ²¡æœ‰å‘ç”Ÿæ‹¥å¡ï¼Œè¿™å°†å¯¼è‡´å‘é€æ–¹è¶…æ—¶é‡ä¼ ï¼Œå¹¶ä¸”è¯¯è®¤ä¸ºç½‘ç»œå‘ç”Ÿäº†æ‹¥å¡ï¼Œè¿™å°†é™ä½ä¼ è¾“æ•ˆç‡

- é‡‡ç”¨å¿«é‡ä¼ å¯ä»¥**å°½æ—©è®©å‘é€æ–¹å¾—çŸ¥å‘ç”Ÿäº†ä¸ªåˆ«æŠ¥æ–‡æ®µçš„ä¸¢å¤±**





- è¦æ±‚æ¥æ”¶æ–¹ä¸è¦åœ¨ç­‰å¾…è‡ªå·±å‘é€æ•°æ®æ—¶æå¸¦ç¡®è®¤ï¼Œè¦ç«‹å³å‘é€ç¡®è®¤
- å³ä½¿æ”¶åˆ°äº†å¤±åºçš„æŠ¥æ–‡æ®µä¹Ÿè¦ç«‹å³å¯¹å·²ç»æ”¶åˆ°çš„æŠ¥æ–‡æ®µé‡å¤ç¡®è®¤
- å‘é€æ–¹ä¸€æ—¦æ”¶åˆ°**è¿ç»­ä¸‰ä¸ªé‡å¤ ACK**ï¼ˆè¡¨ç¤ºæŸä¸ªåŒ…æ²¡åˆ°ï¼‰
- ä¸ç­‰è¶…æ—¶ï¼Œç«‹åˆ»é‡ä¼ é‚£ä¸ªä¸¢å¤±çš„æ•°æ®åŒ…

#### å¿«æ¢å¤ fast recovery

- åœ¨å¿«é‡ä¼ åï¼Œä¸å›åˆ°æ…¢å¼€å§‹åˆå§‹é˜¶æ®µ
- å°† `ssthresh` å’Œ `cwnd` å‡åŠï¼Œç„¶åä»â€œæ‹¥å¡é¿å…â€é˜¶æ®µç»§ç»­å¢é•¿

ä¾‹å­ï¼š

![](../images/è®¡ç½‘å›¾28.jpg)

## 5.6 TCPè¶…æ—¶é‡ä¼ æ—¶é—´çš„é€‰æ‹©

### ä»€ä¹ˆæ˜¯è¶…æ—¶é‡ä¼ 

åœ¨ TCP ä¸­ï¼Œæ¯å½“å‘é€æ–¹å‘é€äº†ä¸€ä¸ªæ•°æ®æ®µï¼Œå®ƒä¼šå¯åŠ¨ä¸€ä¸ª**å®šæ—¶å™¨**

- å¦‚æœåœ¨è®¡æ—¶å™¨åˆ°æœŸå‰æ”¶åˆ°äº†è¯¥æ®µçš„ **ACK**ï¼Œè¯´æ˜ä¼ è¾“äº†æˆåŠŸï¼Œå®šæ—¶å™¨å–æ¶ˆã€‚
- å¦‚æœåœ¨è¶…æ—¶æ—¶é—´ï¼ˆRTOï¼‰å†… **æ²¡ç­‰åˆ° ACK**ï¼ŒTCP å°±ä¼š**é‡å‘è¿™ä¸ªæ•°æ®æ®µ**ã€‚

æ‰€ä»¥ **è¶…æ—¶é‡ä¼  = æœ€åçš„å…œåº•æœºåˆ¶**ï¼Œä¸€æ—¦å…¶ä»–æœºåˆ¶ï¼ˆå¦‚å¿«é‡ä¼ ï¼‰æœªè§¦å‘ï¼Œé å®ƒä¿è¯å¯é æ€§

### RTO

RTO å¤ªçŸ­ â†’ **å®¹æ˜“è¯¯åˆ¤ä¸¢åŒ…**ï¼Œå¯¼è‡´**ä¸å¿…è¦çš„é‡ä¼ **å’Œç½‘ç»œæ‹¥å µã€‚
 RTO å¤ªé•¿ â†’ **å“åº”æ…¢**ï¼Œæ•°æ®çœŸçš„ä¸¢äº†å´ç­‰åŠå¤©æ‰é‡å‘ã€‚

æ‰€ä»¥ï¼š**RTO å¿…é¡»è‡ªé€‚åº”åœ°è°ƒæ•´ï¼**

### è®¡ç®—æ–¹æ³•

| ç¬¦å·   | å«ä¹‰                                         |
| ------ | -------------------------------------------- |
| RTT    | ä¸€ä¸ªæ•°æ®åŒ…ä»å‘é€åˆ°æ”¶åˆ° ACK çš„å¾€è¿”æ—¶é—´        |
| RTT~s~ | å¹³æ»‘çš„ RTTï¼ˆSmoothed RTTï¼‰ï¼ŒåŠ æƒå¹³å‡å¾€è¿”æ—¶é—´ |
| RTTVAR | RTT çš„åå·®ï¼ˆVarianceï¼‰                       |
| RTO    | æœ€ç»ˆçš„è¶…æ—¶é‡ä¼ æ—¶é—´                           |

æ–°çš„RTT~s~ = $(1-Î±)âœ–ï¸æ—§çš„RTTs+Î±âœ–ï¸æ–°çš„RTTæ ·æœ¬$

Î±è¶Šå¤§ï¼Œæ–°çš„æ ·æœ¬å¯¹å…¶å½±å“è¶Šå¤§

æ¨èå€¼ä¸º0.125

![](../images/è®¡ç½‘å›¾29.jpg)

## 5.7 TCPå¯é ä¼ è¾“çš„å®ç°

- TCPåŸºäºä»¥å­—èŠ‚ä¸ºå•ä½çš„æ»‘åŠ¨çª—å£æ¥å®ç°å¯é ä¼ è¾“
- æ€æ ·æè¿°å‘é€çª—å£çš„çŠ¶æ€
	ä½¿ç”¨ä¸‰ä¸ªæŒ‡é’ˆ p1,p2,p3åˆ†åˆ«æŒ‡å‘ç›¸åº”çš„å­—èŠ‚åºå·
	- å°äºp1çš„æ˜¯å·²ç»å‘é€å¹¶ä¸”æ”¶åˆ°ç¡®è®¤çš„éƒ¨åˆ†
	- å¤§äºp3çš„æ˜¯ä¸å…è®¸å‘é€çš„éƒ¨åˆ†
	- p3-p1å°±æ˜¯çª—å£å°ºå¯¸
	- p2-p1å°±æ˜¯å·²ç»å‘é€ä½†æ˜¯æ²¡æœ‰æ”¶åˆ°ç¡®è®¤çš„å­—èŠ‚æ•°
	- p3-p2å°±æ˜¯è¿è¡Œå‘é€ä½†æ˜¯å°šæœªå‘é€çš„å­—èŠ‚æ•°ï¼ˆå¯ç”¨çª—å£ã€æœ‰ç”¨çª—å£ï¼‰



- è™½ç„¶å‘é€æ–¹çš„å‘é€çª—å£æ˜¯æ ¹æ®æ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£è®¾ç½®çš„ï¼Œä½†æ˜¯åœ¨åŒä¸€æ—¶åˆ»ï¼Œå‘é€æ–¹çš„å‘é€çª—å£å¹¶ä¸æ€»æ˜¯å’Œæ¥æ”¶æ–¹çš„æ¥æ”¶çª—å£ä¸€æ ·å¤§
- å¯¹äºä¸æŒ‰åºåˆ°è¾¾çš„æ•°æ®å¦‚ä½•å¤„ç†ï¼ŒTCPæ²¡æœ‰æ˜ç¡®è§„å®š
- TCPè¦æ±‚æ¥æ”¶æ–¹å¿…é¡»æœ‰ç´¯ç§¯ç¡®è®¤å’Œæå¸¦ç¡®è®¤æœºåˆ¶ï¼Œè¿™æ ·å¯ä»¥å‡å°ä¼ è¾“å¼€é”€ï¼Œæ¥æ”¶æ–¹å¯ä»¥åœ¨åˆé€‚çš„æ—¶å€™å‘é€ç¡®è®¤ï¼Œä¹Ÿå¯ä»¥åœ¨è‡ªå·±æœ‰æ•°æ®è¦å‘é€çš„æ—¶å€™æŠŠç¡®è®¤ä¿¡æ¯æå¸¦å‘é€
- TCPçš„é€šä¿¡æ˜¯å…¨åŒå·¥é€šä¿¡

## 5.8 TCPçš„è¿è¾“è¿æ¥ç®¡ç†

### 5.8.1 TCPè¿æ¥ï¼šä¸‰æ¬¡æ¡æ‰‹ï¼ˆThree-Way Handshakeï¼‰

**åœºæ™¯**ï¼šå®¢æˆ·ç«¯ï¼ˆClientï¼‰å’ŒæœåŠ¡å™¨ï¼ˆServerï¼‰åƒä¸¤ä¸ªé™Œç”Ÿäººå»ºç«‹ä¿¡ä»»å…³ç³»

1. **ç¬¬ä¸€æ¬¡æ¡æ‰‹ï¼šSYNï¼ˆåŒæ­¥è¯·æ±‚ï¼‰**
	â†’ **å®¢æˆ·ç«¯**å‘é€ `SYN=1 + seq=x`ï¼ˆéšæœºåºå·ï¼‰
	â†’ **æ½œå°è¯**ï¼šâ€å—¨ï¼æˆ‘æƒ³å’Œä½ é€šè¯ï¼Œæˆ‘çš„æš—å·æ˜¯xï¼Œèƒ½å¬åˆ°å—ï¼Ÿâ€œ
	â†’ **å®¢æˆ·ç«¯çŠ¶æ€**ï¼š`SYN_SENT`ï¼ˆç­‰å¾…ç¡®è®¤ä¸­ï¼‰
2. **ç¬¬äºŒæ¬¡æ¡æ‰‹ï¼šSYN+ACKï¼ˆåŒæ­¥å“åº”ï¼‰**
	â† **æœåŠ¡å™¨**å›å¤ `SYN=1 + ACK=1 + ack=x+1 + seq=y`ï¼ˆæ–°åºå·ï¼‰
	â† **æ½œå°è¯**ï¼šâ€æ”¶åˆ°ä½ çš„xäº†ï¼æˆ‘ä¹Ÿæ„¿æ„è¿æ¥ï¼Œæˆ‘çš„æš—å·æ˜¯yï¼â€œ
	â†’ **æœåŠ¡å™¨çŠ¶æ€**ï¼š`SYN_RECEIVED`
3. **ç¬¬ä¸‰æ¬¡æ¡æ‰‹ï¼šACKï¼ˆæœ€ç»ˆç¡®è®¤ï¼‰**
	â†’ **å®¢æˆ·ç«¯**å‘é€ `ACK=1 + ack=y+1`
	â†’ **æ½œå°è¯**ï¼šâ€ç¡®è®¤æ”¶åˆ°ä½ çš„yï¼ç°åœ¨æ­£å¼é€šè¯å§~â€œ
	â†’ **åŒæ–¹çŠ¶æ€**ï¼š`ESTABLISHED`ï¼ˆè¿æ¥æˆåŠŸï¼ï¼‰

âœ… **çµé­‚æ‹·é—®ï¼šä¸ºä»€ä¹ˆå¿…é¡»ä¸‰æ¬¡ï¼Ÿ**

> ä¸¤æ¬¡ä¸å¤Ÿï¼šæœåŠ¡å™¨æ— æ³•ç¡®è®¤å®¢æˆ·ç«¯èƒ½æ¥æ”¶æ¶ˆæ¯ï¼ˆå•ç›¸æ€é£é™©ï¼‰
> å››æ¬¡å¤šä½™ï¼šç¬¬ä¸‰æ¬¡æ¡æ‰‹å·²èƒ½ç¡®ä¿åŒå‘é€šä¿¡èƒ½åŠ›ï¼ˆé«˜æ•ˆå¯é ï¼‰

### 5.8.2 TCPé‡Šæ”¾ï¼šå››æ¬¡æŒ¥æ‰‹ï¼ˆFour-Way Handshakeï¼‰

**åœºæ™¯**ï¼šå®¢æˆ·ç«¯ä¸»åŠ¨å‘Šåˆ«ï¼ˆå…¨åŒå·¥é€šä¿¡éœ€åŒå‘å…³é—­ï¼‰

1. **ç¬¬ä¸€æ¬¡æŒ¥æ‰‹ï¼šFINï¼ˆç»“æŸè¯·æ±‚ï¼‰**
	â†’ **å®¢æˆ·ç«¯**å‘é€ `FIN=1 + seq=u`
	â†’ **æ½œå°è¯**ï¼šâ€æˆ‘è¯´å®Œäº†ï¼Œå‡†å¤‡æŒ‚æ–­ï¼ˆä½†è¿˜èƒ½å¬ä½ è®²ï¼‰â€œ
	â†’ **å®¢æˆ·ç«¯çŠ¶æ€**ï¼š`FIN_WAIT_1`
2. **ç¬¬äºŒæ¬¡æŒ¥æ‰‹ï¼šACKï¼ˆåˆæ­¥ç¡®è®¤ï¼‰**
	â† **æœåŠ¡å™¨**å›å¤ `ACK=1 + ack=u+1`
	â† **æ½œå°è¯**ï¼šâ€æ”¶åˆ°ç»“æŸè¯·æ±‚ï¼ä½†æˆ‘è¿˜æœ‰è¯è¦è¯´â€¦â€œ
	â†’ **æœåŠ¡å™¨çŠ¶æ€**ï¼š`CLOSE_WAIT`
	â†’ **å®¢æˆ·ç«¯çŠ¶æ€**ï¼š`FIN_WAIT_2`ï¼ˆåŠå…³é—­ï¼‰
3. **ç¬¬ä¸‰æ¬¡æŒ¥æ‰‹ï¼šFINï¼ˆç»“æŸå“åº”ï¼‰**
	â† **æœåŠ¡å™¨**å‘é€ `FIN=1 + seq=v`
	â† **æ½œå°è¯**ï¼šâ€æˆ‘ä¹Ÿè¯´å®Œäº†ï¼Œä¸€èµ·å…³é—­å§ï¼â€œ
	â†’ **æœåŠ¡å™¨çŠ¶æ€**ï¼š`LAST_ACK`
4. **ç¬¬å››æ¬¡æŒ¥æ‰‹ï¼šACKï¼ˆæœ€ç»ˆç¡®è®¤ï¼‰**
	â†’ **å®¢æˆ·ç«¯**å›å¤ `ACK=1 + ack=v+1`
	â†’ **æ½œå°è¯**ï¼šâ€æ”¶åˆ°ï¼æ­£å¼å†è§ğŸ‘‹â€œ
	â†’ **å®¢æˆ·ç«¯çŠ¶æ€**ï¼š`TIME_WAIT` â†’ ç­‰å¾… **2MSL**ï¼ˆæœ€é•¿æŠ¥æ–‡å¯¿å‘½ï¼‰å `CLOSED`
	â†’ **æœåŠ¡å™¨çŠ¶æ€**ï¼šæ”¶åˆ°ACKç«‹å³ `CLOSED`

âœ… **å…³é”®è®¾è®¡è§£æ**

> **ä¸ºä»€ä¹ˆæŒ¥æ‰‹è¦å››æ¬¡ï¼Ÿ**
>
> - TCPæ˜¯å…¨åŒå·¥é€šé“ï¼ˆåŒå‘ç‹¬ç«‹ï¼‰ï¼Œéœ€åˆ†åˆ«å…³é—­å‘é€é€šé“
> - ç¬¬äºŒæ¬¡æŒ¥æ‰‹åï¼šæœåŠ¡å™¨å¯èƒ½ä»éœ€ä¼ è¾“å‰©ä½™æ•°æ®

> **TIME_WAITçš„å¦™ç”¨**
>
> - ä¿åº•æœºåˆ¶ï¼šç¡®ä¿æœ€åä¸€ä¸ªACKé€è¾¾ï¼ˆè‹¥ä¸¢å¤±ï¼ŒæœåŠ¡å™¨ä¼šé‡å‘FINï¼‰
> - æ¸…åœºä½œç”¨ï¼šè®©ç½‘ç»œä¸­æ—§æ•°æ®åŒ…å¤±æ•ˆï¼ˆé¿å…æ±¡æŸ“æ–°è¿æ¥ï¼‰



---

# å…­ã€åº”ç”¨å±‚

## 6.1 æ¦‚è¿°

è§£å†³é€šè¿‡åº”ç”¨è¿›ç¨‹çš„äº¤äº’æ¥å®ç°ç‰¹å®šç½‘ç»œçš„é—®é¢˜

- æ˜¯æœ€é¡¶å±‚ï¼Œæ˜¯è®¾è®¡å’Œå»ºç«‹è®¡ç®—æœºç½‘ç»œçš„æœ€ç»ˆç›®çš„
	- www
	- DNSåŸŸåç³»ç»Ÿ
	- DHCPåŠ¨æ€ä¸»æœºé…ç½®
	- ç”µå­é‚®ä»¶
	- æ–‡ä»¶ä¼ é€FTPå’ŒP2Pæ–‡ä»¶å…±äº«
	- å¤šåª’ä½“ç½‘ç»œåº”ç”¨

## 6.2 C/Sæ–¹å¼å’ŒP2Pæ–¹å¼

å¼€å‘ç½‘ç»œåº”ç”¨é¦–å…ˆè¦è€ƒè™‘ç½‘ç»œåº”ç”¨ç¨‹åºåœ¨å„ç§ç«¯ç³»ç»Ÿä¸Šçš„ç»„ç»‡æ–¹å¼å’Œå®ƒä»¬ä¹‹é—´çš„å…³ç³»

### C/Sæ–¹å¼

- clientå’Œserveræ˜¯æŒ‡é€šä¿¡ä¸­æ‰€æ¶‰åŠçš„ä¸¤ä¸ªåº”ç”¨è¿›ç¨‹
- C/Sæ–¹å¼æè¿°çš„æ˜¯è¿›ç¨‹ä¹‹é—´æœåŠ¡å’Œè¢«æœåŠ¡çš„å…³ç³»
- clientæ˜¯æœåŠ¡è¯·æ±‚æ–¹ï¼Œserveræ˜¯æœåŠ¡æä¾›æ–¹
- serveræ€»æ˜¯å¤„äºè¿è¡ŒçŠ¶æ€ï¼Œå¹¶ç­‰å¾…clientçš„æœåŠ¡è¯·æ±‚ã€‚serverå…·æœ‰å›ºå®šç«¯å£å·ï¼ˆå¦‚HTTPæœå™¨çš„é»˜è®¤ç«¯å£å·æ˜¯80ï¼‰ï¼Œè¿è¡ŒæœåŠ¡å™¨çš„ä¸»æœºä¹Ÿæœ‰å›ºå®šçš„IPåœ°å€

- é€šå¸¸æ˜¯==æœåŠ¡é›†ä¸­å‹==çš„ï¼Œå³åº”ç”¨æœåŠ¡é›†ä¸­åœ¨ç½‘ç»œä¸­æ¯”å®¢æˆ·è®¡ç®—æœºå°‘çš„å¤šçš„æœåŠ¡å™¨è®¡ç®—æœºä¸Š
	- WWW,emailï¼ŒFTPç­‰
- ç”±äºä¸€ä¸ªserverè¦å‘å¤šä¸ªclientæä¾›æœåŠ¡ï¼Œå°å°å‡ºç°æœåŠ¡å™¨è®¡ç®—æœºæ•°é‡ä¸å¤Ÿçš„æƒ…å†µ
- ä¸ºæ­¤ï¼Œå¸¸ç”¨è®¡ç®—æœºç¾¤é›†ï¼ˆæœåŠ¡å™¨åœºï¼‰æ„å»ºä¸€ä¸ªå¼ºå¤§çš„è™šæ‹ŸæœåŠ¡å™¨

### P2Pæ–¹å¼

peer to peer

- æ²¡æœ‰å›ºå®šçš„æœåŠ¡è¯·æ±‚è€…å’ŒæœåŠ¡æä¾›è€…ï¼Œç›¸äº’å¯¹ç­‰ï¼Œæ¯ä¸ªå¯¹ç­‰æ–¹åŒæ—¶æ˜¯æœåŠ¡çš„è¯·æ±‚è€…å’Œæä¾›è€…
- P2Pæ–‡ä»¶å…±äº«ã€å³æ—¶é€šä¿¡ã€P2Pæµåª’ä½“ã€åˆ†å¸ƒå¼å­˜å‚¨ç­‰
- ==æœåŠ¡åˆ†æ•£å‹==ï¼Œåˆ†æ•£åœ¨å¤§é‡çš„å¯¹ç­‰è®¡ç®—æœºä¸­
- ==å¯æ‰©å±•æ€§==ï¼Œç³»ç»Ÿæ€§èƒ½ä¸ä¼šå› ä¸ºè§„æ¨¡å¢å¤§è€Œé™ä½
- æœ‰æˆæœ¬ä¸Šçš„ä¼˜åŠ¿ï¼Œä¸éœ€è¦åºå¤§çš„æœåŠ¡å™¨è®¾æ–½å’ŒæœåŠ¡å™¨å¸¦å®½



## 6.3 åŠ¨æ€ä¸»æœºé…ç½®DHCP

**æ ¸å¿ƒåŠŸèƒ½**ï¼šè‡ªåŠ¨ä¸ºè®¾å¤‡åˆ†é…IPåœ°å€ã€å­ç½‘æ©ç ã€ç½‘å…³ã€DNSç­‰ç½‘ç»œå‚æ•°ï¼Œå‘Šåˆ«æ‰‹åŠ¨é…ç½®ï¼
**æ ¸å¿ƒè§’è‰²**ï¼š

- **DHCPå®¢æˆ·ç«¯**ï¼šéœ€è¦è”ç½‘çš„è®¾å¤‡ï¼ˆæ‰‹æœº/ç”µè„‘ï¼‰
- **DHCPæœåŠ¡å™¨**ï¼šç®¡ç†IPåœ°å€æ± çš„â€œæˆ¿ä¸œâ€
- **ä¸­ç»§ä»£ç†**ï¼ˆå¯é€‰ï¼‰ï¼šè·¨ç½‘æ®µè½¬å‘è¯·æ±‚çš„â€œå¿«é€’å‘˜â€

>  **ç±»æ¯”ç§Ÿæˆ¿**ï¼š
>
> - **å®¢æˆ·ç«¯** â‰ˆ ç§Ÿå®¢ï¼ˆâ€œæˆ‘è¦ç§Ÿæˆ¿ï¼â€ï¼‰
> - **æœåŠ¡å™¨** â‰ˆ æˆ¿ä¸œï¼ˆâ€œæœ‰ç©ºæˆ¿ï¼ç§ŸæœŸ1å¤©~8å¤©ï¼â€ï¼‰
> - **IPåœ°å€** â‰ˆ æˆ¿å­ï¼ˆåŠ¨æ€åˆ†é…ï¼Œåˆ°æœŸå›æ”¶ï¼‰

### å·¥ä½œè¿‡ç¨‹

**â–Œ ç¬¬ä¸€æ­¥ï¼šDiscoverï¼ˆå®¢æˆ·ç«¯å¹¿æ’­æ‰¾æœåŠ¡å™¨ï¼‰**
â†’ å®¢æˆ·ç«¯å‘é€ **`DHCP DISCOVER`** å¹¿æ’­åŒ…ï¼ˆç›®æ ‡IPï¼š`255.255.255.255`ï¼Œæºåœ°å€ `0.0.0.0`ï¼‰
â†’ **æ½œå°è¯**ï¼šâ€æœ‰æ²¡æœ‰DHCPæœåŠ¡å™¨ï¼Ÿæˆ‘è¦ç§Ÿä¸ªIPåœ°å€ï¼â€œ

**â–Œ ç¬¬äºŒæ­¥ï¼šOfferï¼ˆæœåŠ¡å™¨å“åº”æŠ¥ä»·ï¼‰**
â† æœåŠ¡å™¨å›å¤ **`DHCP OFFER`** å¹¿æ’­åŒ…ï¼ˆå®¢æˆ·ä¸»æœºæ­¤æ—¶æ²¡æœ‰IPåœ°å€ï¼Œåªèƒ½ä½¿ç”¨å¹¿æ’­æ‰èƒ½æ”¶åˆ°ï¼ŒåŒ…å«**æ¨èIP**ã€å­ç½‘æ©ç ã€åœ°å€ç§ŸæœŸé»˜è®¤ç½‘å…³ç­‰ï¼Œå½“ç„¶éœ€è¦ä½¿ç”¨ARPåˆ¤æ–­æ˜¯å¦è¢«ä½¿ç”¨ï¼‰
â† **æ½œå°è¯**ï¼šâ€æˆ‘è¿™æœ‰ç©ºIPï¼ˆå¦‚192.168.1.100ï¼‰ï¼Œç§Ÿä½ 3å¤©ï¼Œè¦å—ï¼Ÿâ€œ

**â–Œ ç¬¬ä¸‰æ­¥ï¼šRequestï¼ˆå®¢æˆ·ç«¯ç¡®è®¤ç§Ÿæˆ¿ï¼‰**
â†’ å®¢æˆ·ç«¯å‘é€ **`DHCP REQUEST`** å¹¿æ’­åŒ…ï¼ˆå£°æ˜æ¥å—è¯¥IPï¼‰
â†’ **æ½œå°è¯**ï¼šâ€æˆ‘è¦ç§Ÿ192.168.1.100ï¼å…¶ä»–æœåŠ¡å™¨ä¸ç”¨æŠ¥ä»·äº†~â€œ

**â–Œ ç¬¬å››æ­¥ï¼šAcknowledgeï¼ˆæœåŠ¡å™¨æœ€ç»ˆç¡®è®¤ï¼‰**
â† æœåŠ¡å™¨å›å¤ **`DHCP ACK`** å¹¿æ’­åŒ…ï¼ˆæ­£å¼åˆ†é…IPï¼Œè®°å½•ç§Ÿçº¦ï¼‰
â† **æ½œå°è¯**ï¼šâ€æˆäº¤ï¼è¿™æ˜¯é’¥åŒ™ï¼ˆIPå‚æ•°ï¼‰ï¼Œç§ŸæœŸä»æ­¤åˆ»è®¡ç®—ï¼â€œ

> **ç‰¹æ®Šåœºæ™¯**ï¼š
>
> - è‹¥æœåŠ¡å™¨æ‹’ç»åˆ†é… â†’ å›å¤ **`DHCP NAK`**ï¼ˆå¦‚IPå·²è¢«å ç”¨ï¼‰
> - å®¢æˆ·ç«¯é‡å¯æ—¶ â†’ ç›´æ¥å¹¿æ’­ **`DHCP REQUEST`** è¯·æ±‚ç»­ç§ŸåŸIP
> - ç§ŸæœŸè¾¾åˆ°ä¸€åŠæ—¶ï¼Œå®¢æˆ·è¯·æ±‚æ›´æ–°ç§Ÿç”¨æœŸï¼Œæºåœ°å€ä¸ºç§Ÿåˆ°çš„åœ°å€
> 	è‹¥åŒæ„ï¼Œåˆ™å‘é€ç¡®è®¤æŠ¥æ–‡ACK
> 	å¦åˆ™å‘é€ NACK
> - å®¢æˆ·å¯ä»¥éšæ—¶ç»ˆæ­¢ç§Ÿç”¨ï¼Œåªéœ€å‘é€`RELEASE`æŠ¥æ–‡æ®µå³å¯



DHCPä¸­ç»§ä»£ç†

åœ¨è·¯ç”±å™¨ä¸Šé…ç½®DHCPçš„æœåŠ¡å™¨IPåœ°å€å³å¯ï¼Œä¸éœ€è¦åœ¨æ¯ä¸ªç½‘ç»œéƒ½é…ç½®DHCPæœåŠ¡å™¨



## 6.4 åŸŸåç³»ç»ŸDNSï¼ˆdomin name systemï¼‰

ä½œç”¨ï¼šå°†domin nameç¿»è¯‘ä¸º IPåœ°å€

**æ ¸å¿ƒä½œç”¨**ï¼šå°†äººç±»å¯è¯»çš„**åŸŸå**ï¼ˆå¦‚ `www.baidu.com`ï¼‰è½¬æ¢ä¸ºæœºå™¨å¯è¯†åˆ«çš„**IPåœ°å€**ï¼ˆå¦‚ `180.101.49.12`ï¼‰ã€‚
**æ ¸å¿ƒä»·å€¼**ï¼š

>  **ä¸ç”¨è®°IP**ï¼šè®°ä½ `taobao.com` æ¯”è®° `121.18.239.154` ç®€å•å¤šäº†ï¼
> **è´Ÿè½½å‡è¡¡**ï¼šä¸€ä¸ªåŸŸåå¯å¯¹åº”å¤šä¸ªIPï¼ˆå¦‚è®¿é—®æ·˜å®æ—¶åˆ†é…ä¸åŒæœåŠ¡å™¨ï¼‰
> **çµæ´»æ€§**ï¼šIPå˜æ›´æ—¶åªéœ€ä¿®æ”¹DNSè®°å½•ï¼Œç”¨æˆ·æ— æ„ŸçŸ¥



é‡‡ç”¨**å±‚æ¬¡æ ‘çŠ¶ç»“æ„çš„åŸŸåç»“æ„**

- ç”±è‹¥å¹²ä¸ªåˆ†é‡ç»„æˆï¼Œåˆ†é‡ä¹‹é—´ç”¨ ç‚¹ éš”å¼€ï¼Œä»£è¡¨ä¸åŒçº§åˆ«çš„åŸŸå

`xxx.ä¸‰çº§åŸŸå.äºŒçº§åŸŸå.é¡¶çº§åŸŸå`

- æ¯ä¸€çº§åŸŸåéƒ½ç”±è‹±æ–‡å­—æ¯+æ•°å­—ï¼Œä¸è¶…è¿‡63å­—ç¬¦ï¼Œä¸åŒºåˆ†å¤§å°å†™
- çº§åˆ«æœ€ä½çš„åŸŸåå†™åœ¨æœ€å·¦ï¼Œé¡¶çº§åŸŸåæœ€å³
- å®Œæ•´çš„åŸŸåä¸è¶…è¿‡255å­—ç¬¦
- å„çº§åŸŸåç”±ä¸Šä¸€çº§çš„åŸŸåç®¡ç†ï¼Œæœ€é«˜çº§çš„é¡¶çº§åŸŸåç”±ICANNç®¡ç†

`www.tjuï¼ˆä¸‰çº§åŸŸåï¼‰.eduï¼ˆäºŒçº§åŸŸåï¼‰.cnï¼ˆé¡¶çº§åŸŸåï¼‰`



é¡¶çº§åŸŸåtop level dominåˆ†ä¸ºï¼š

- å›½å®¶é¡¶çº§åŸŸå nTLD
- é€šç”¨é¡¶çº§åŸŸå gTLD
	`com`ä¼ä¸š   `net`ç½‘ç»œæœåŠ¡æœºæ„  `org`éè¥åˆ©ç»„ç»‡ `int`å›½é™…ç»„ç»‡ `edu`
- åå‘åŸŸ `arpa0` ç”¨äºåå‘åŸŸåè§£æï¼Œå³IPåœ°å€åå‘è§£æä¸ºåŸŸå



- åœ¨å›½å®¶é¡¶çº§åŸŸåä¸‹æ³¨å†Œçš„äºŒçº§åŸŸåç”±å›½å®¶è‡ªè¡Œç¡®å®š
- æˆ‘å›½
	- `ac`ç§‘ç ”æœºæ„
		`com` å·¥å•†é‡‘èç­‰ä¼ä¸š
		`edu`æ•™è‚²æœºæ„
		`gov`æ”¿åºœéƒ¨é—¨
		`net`æä¾›ç½‘ç»œæœåŠ¡çš„æœºæ„
		`mil`å†›äº‹æœºæ„
		`org`éè¥åˆ©ç»„ç»‡
- ==åå­—ç›¸åŒç­‰çº§æœªå¿…ç›¸åŒ==





åŸŸåå’ŒIPçš„æ˜ å°„å…³ç³»å¿…é¡»ä¿å­˜åœ¨åŸŸåæœåŠ¡å™¨ï¼Œä»¥ä¾›æŸ¥è¯¢

DNSä½¿ç”¨åˆ†å¸ƒåœ¨å„åœ°çš„åŸŸåæœåŠ¡å™¨æ¥å®ç°åŸŸååˆ°IPçš„è½¬æ¢

å…·ä½“æ­¥éª¤

1. **æœ¬åœ°æŸ¥è¯¢**ï¼ˆç§’çº§å“åº”ï¼‰
	â†’ æŸ¥ **æµè§ˆå™¨ç¼“å­˜** â†’ **ç³»ç»Ÿç¼“å­˜**ï¼ˆå¦‚hostsæ–‡ä»¶ï¼‰â†’ **è·¯ç”±å™¨ç¼“å­˜**
	â†’ å‘½ä¸­åˆ™ç›´æ¥è¿”å›IPï¼
2. **é€’å½’æŸ¥è¯¢**ï¼ˆå‘æœ¬åœ°DNSæœåŠ¡å™¨æ±‚åŠ©ï¼‰
	â†’ ç”µè„‘é—® **æœ¬åœ°DNS**ï¼ˆå¦‚è¿è¥å•†`114.114.114.114`ï¼‰ï¼šâ€`www.taobao.com`çš„IPæ˜¯å•¥ï¼Ÿâ€œ
	â†’ æœ¬åœ°DNSè‹¥**æ— ç¼“å­˜**ï¼Œåˆ™å¼€å¯**è¿­ä»£æŸ¥è¯¢**ï¼š
3. **è¿­ä»£æŸ¥è¯¢**ï¼ˆæœ¬åœ°DNSå…¨çƒå¥”æ³¢ï¼‰
	(1) é—® **æ ¹åŸŸåæœåŠ¡å™¨**ï¼šâ€`.com` è¯¥æ‰¾è°ï¼Ÿâ€œ
	â† å›å¤ï¼šâ€å»é—® `.com` é¡¶çº§åŸŸæœåŠ¡å™¨ï¼ˆå¦‚ `a.gtld-servers.net`ï¼‰â€œ
	(2) é—® **é¡¶çº§åŸŸæœåŠ¡å™¨**ï¼šâ€`taobao.com` çš„IPè°ç®¡ï¼Ÿâ€œ
	â† å›å¤ï¼šâ€è´Ÿè´£ `taobao.com` çš„æƒå¨æœåŠ¡å™¨æ˜¯ `ns1.taobao.com`â€œ
	(3) é—® **æƒå¨DNSæœåŠ¡å™¨**ï¼ˆåŸŸåæ‰€æœ‰è€…ç®¡ç†ï¼‰ï¼šâ€`www.taobao.com` çš„IPæ˜¯å•¥ï¼Ÿâ€œ
	â† å›å¤ï¼šâ€`180.101.49.12`â€œ
4. **ç»“æœè¿”å›**
	â†’ æœ¬åœ°DNSç¼“å­˜IPï¼Œå¹¶å›å¤ç”µè„‘
	â†’ ç”µè„‘ç¼“å­˜IPï¼Œå‘èµ·è¿æ¥ï¼

- ä¸ºäº†æé«˜DNSçš„æŸ¥è¯¢æ•ˆç‡ï¼Œå‡è½»æ ¹åŸŸåæœåŠ¡å™¨çš„è´Ÿè·å’Œå‡å°‘å› ç‰¹ç½‘ä¸Šçš„DNSæŸ¥è¯¢æŠ¥æ–‡æ•°é‡ï¼Œåœ¨åŸŸåæœåŠ¡å™¨ä½¿ç”¨ **é«˜é€Ÿç¼“å­˜**,ç”¨äºå­˜æ”¾æœ€è¿‘æŸ¥è¯¢è¿‡çš„åŸŸåä»¥åŠä»ä½•å¤„è·å¾—åŸŸåæ˜ å°„ä¿¡æ¯çš„è®°å½•
- æ˜ å°„å…³ç³»æ˜¯å¯èƒ½å˜åŠ¨çš„ï¼Œæ‰€ä»¥åŸŸåæœåŠ¡å™¨åº”è¯¥ä¸ºæ¯é¡¹å†…å®¹è®¾ç½®è®¡æ—¶å™¨å¹¶åˆ é™¤è¶…è¿‡åˆç†æ—¶é—´çš„é¡¹
- ç”¨æˆ·ä¸»æœºä¹Ÿéœ€è¦é«˜é€Ÿç¼“å­˜



é‡‡ç”¨UDPåè®®è¿›è¡Œå°è£…ï¼Œç«¯å£å·æ˜¯53

## 6.5 FTPæ–‡ä»¶ä¼ é€åè®®

æ˜¯ä½¿ç”¨æœ€å¹¿æ³›çš„æ–‡ä»¶ä¼ é€åè®®

- FTPæä¾›äº¤äº’å¼çš„è®¿é—®ï¼Œå…è®¸å®¢æˆ·æŒ‡æ˜æ–‡ä»¶çš„ç±»å‹å’Œæ ¼å¼ï¼ˆæ¯”å¦‚æ˜¯å¦ä½¿ç”¨ASCIIç ï¼‰ï¼Œå…è®¸æ–‡ä»¶å…·æœ‰å­˜å–æƒé™

**æ ¸å¿ƒä½œç”¨**ï¼šåœ¨**å®¢æˆ·ç«¯**å’Œ**æœåŠ¡å™¨**é—´åŒå‘ä¼ è¾“æ–‡ä»¶ï¼ˆä¸Šä¼ /ä¸‹è½½ï¼‰ï¼Œæ”¯æŒç›®å½•ç®¡ç†ã€æ–‡ä»¶åˆ é™¤ç­‰æ“ä½œã€‚
**ä¸¤å¤§æ ¸å¿ƒé€šé“**ï¼š

| **é€šé“**     | **ç«¯å£**                     | **åŠŸèƒ½**                  |
| :----------- | :--------------------------- | :------------------------ |
| **æ§åˆ¶è¿æ¥** | 21                           | ä¼ è¾“å‘½ä»¤ï¼ˆå¦‚`ls`ã€`get`ï¼‰ |
| **æ•°æ®è¿æ¥** | 20ï¼ˆä¸»åŠ¨ï¼‰æˆ–éšæœºç«¯å£ï¼ˆè¢«åŠ¨ï¼‰ | å®é™…ä¼ è¾“æ–‡ä»¶å†…å®¹          |

> **ç—›ç‚¹**ï¼šæ˜æ–‡ä¼ è¾“ï¼ˆä¸å®‰å…¨ï¼‰ã€é…ç½®å¤æ‚ â†’ é€æ¸è¢« **SFTP**ã€**SCP** æ›¿ä»£

 æ ¸å¿ƒè®¾è®¡

- **åŒé€šé“æ¨¡å‹**ï¼š
	- **æ§åˆ¶è¿æ¥**ï¼ˆç«¯å£21ï¼‰ï¼šä¼ è¾“å‘½ä»¤ï¼ˆ`LIST`/`RETR`ï¼‰
	- **æ•°æ®è¿æ¥**ï¼ˆç«¯å£20æˆ–éšæœºï¼‰ï¼šä¼ è¾“æ–‡ä»¶å†…å®¹
- **å·¥ä½œæ¨¡å¼**ï¼š
	- **ä¸»åŠ¨æ¨¡å¼(PORT)**ï¼šæœåŠ¡å™¨ä¸»åŠ¨è¿æ¥å®¢æˆ·ç«¯ï¼ˆæ˜“è¢«é˜²ç«å¢™æ‹¦æˆªï¼‰
	- **è¢«åŠ¨æ¨¡å¼(PASV)**ï¼šå®¢æˆ·ç«¯è¿æ¥æœåŠ¡å™¨æŒ‡å®šç«¯å£ï¼ˆä¸»æµï¼‰

 ç®€åŒ–åè®®ï¼šTFTP

- åŸºäºUDPï¼Œæ— èº«ä»½éªŒè¯
- æ”¯æŒæ–‡ä»¶ä¼ è¾“ä½†**ä¸æ”¯æŒäº¤äº’**
- é€šè¿‡ç¡®è®¤+é‡ä¼ ä¿è¯å¯é æ€§

## 6.6 è¿œç¨‹ç™»å½• TELNET

1. **åŠŸèƒ½**ï¼šæœ¬åœ°ä¸»æœºç™»å½•è¿œç¨‹ä¸»æœºï¼ˆé€æ˜ä¼ è¾“é”®ç›˜/å±å¹•æ•°æ®ï¼‰
2. **NVTæ¨¡å¼**ï¼ˆç½‘ç»œè™šæ‹Ÿç»ˆç«¯ï¼‰ï¼š
	- å®¢æˆ·ç«¯ï¼šç”¨æˆ·å‘½ä»¤ â†’ NVTæ ¼å¼ â†’ æœåŠ¡å™¨
	- æœåŠ¡å™¨ï¼šNVTæ ¼å¼ â†’ æœ¬åœ°ç³»ç»Ÿæ ¼å¼ â†’ æ‰§è¡Œ
3. **è¡°è½åŸå› **ï¼šç°ä»£PCåŠŸèƒ½å¼ºå¤§ï¼ŒSSHæ›´å®‰å…¨







## 6.7 email

#### æ ¸å¿ƒç»„ä»¶

| **ç»„ä»¶**       | **ä½œç”¨**                   | **åè®®**  |
| :------------- | :------------------------- | :-------- |
| ç”¨æˆ·ä»£ç†(UA)   | é‚®ä»¶ç¼–è¾‘/æ˜¾ç¤ºï¼ˆå¦‚Outlookï¼‰ | -         |
| å‘é€é‚®ä»¶æœåŠ¡å™¨ | è½¬å‘é‚®ä»¶åˆ°æ¥æ”¶æœåŠ¡å™¨       | SMTP      |
| æ¥æ”¶é‚®ä»¶æœåŠ¡å™¨ | å­˜å‚¨é‚®ä»¶åˆ°ç”¨æˆ·é‚®ç®±         | POP3/IMAP |

#### é‚®ä»¶ä¼ è¾“æµç¨‹

1. å‘ä»¶äººUA â†’ **SMTP** â†’ å‘é€æœåŠ¡å™¨
2. å‘é€æœåŠ¡å™¨ â†’ **SMTP** â†’ æ¥æ”¶æœåŠ¡å™¨
3. æ¥æ”¶æœåŠ¡å™¨å­˜å‚¨é‚®ä»¶è‡³æ”¶ä»¶äººé‚®ç®±
4. æ”¶ä»¶äººUA â†’ **POP3** â†’ æ¥æ”¶æœåŠ¡å™¨å–ä»¶

#### é‚®ä»¶æ ¼å¼

- **ä¿¡å°**ï¼šè·¯ç”±ä¿¡æ¯ï¼ˆç”±é‚®ä»¶ç³»ç»Ÿè‡ªåŠ¨æå–ï¼‰
- **å†…å®¹**ï¼šå«å¤´éƒ¨ï¼ˆ`To`/`Subject`/`From`ï¼‰å’Œæ­£æ–‡



![](../images/è®¡ç½‘å›¾27.png)

## 6.8 www

#### æ ¸å¿ƒä¸‰è¦ç´ 

| **è¦ç´ ** | **æŠ€æœ¯** | **ä½œç”¨**               |
| :------- | :------- | :--------------------- |
| èµ„æºæ ‡è¯† | URL      | å”¯ä¸€æ ‡è¯†ç½‘ç»œèµ„æº       |
| ä¼ è¾“åè®® | HTTP     | å®¢æˆ·ç«¯ä¸æœåŠ¡å™¨é€šä¿¡è§„åˆ™ |
| æ–‡æ¡£æ ¼å¼ | HTML     | å®šä¹‰è¶…æ–‡æœ¬ç»“æ„ä¸è¶…é“¾æ¥ |

#### URLæ ¼å¼



```jade
<åè®®>://<ä¸»æœº>:<ç«¯å£>/<è·¯å¾„>
ç¤ºä¾‹ï¼šhttp://www.tju.edu.cn:80/chn/index.htm
```

#### HTTPå·¥ä½œæµç¨‹

1. æµè§ˆå™¨è§£æURL â†’ DNSæŸ¥è¯¢IP
2. å»ºç«‹TCPè¿æ¥ â†’ å‘é€HTTPè¯·æ±‚ï¼ˆå¦‚ `GET /index.html`ï¼‰
3. æœåŠ¡å™¨å“åº” â†’ è¿”å›HTMLæ–‡æ¡£
4. æµè§ˆå™¨æ¸²æŸ“é¡µé¢ â†’ é‡Šæ”¾TCPè¿æ¥

#### HTMLå…³é”®ç‰¹æ€§

- **è¶…é“¾æ¥ç±»å‹**ï¼š
	- è¿œç¨‹é“¾æ¥ï¼šæŒ‡å‘å…¶ä»–ç½‘ç«™ï¼ˆ`<A HREF="http://...">`ï¼‰
	- æœ¬åœ°é“¾æ¥ï¼šç®€åŒ–åè®®/ä¸»æœºåï¼ˆæŒ‡å‘åŒä¸»æœºèµ„æºï¼‰
- **æ ‡ç­¾ä½œç”¨**ï¼šå®šä¹‰æ’ç‰ˆï¼ˆå¦‚ `<H1>`æ ‡é¢˜ `<P>`æ®µè½ï¼‰
