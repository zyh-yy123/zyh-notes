# 数据库概论

## 一、发展历史

- 人工管理阶段

	>硬件：外部存储器只有磁带、卡片、纸带
	>软件：无操作系统，无数据管理软件
	>
	>特点：
	>
	>- 数据面向应用
	>- 数据不能保存
	>- 数据不能共享
	>- 不具有数据独立性

- 文件系统管理
	>硬件：直接存取设备
	>软件：文件系统
	>
	>特点：
	>
	>- 数据有一定的共享性
	>- 冗余
	>- 缺乏数据独立性

- 数据库系统管理
	>- 应用程序具有数据独立性
	>
	>	***


## 二、数据库概念

**数据库是长期存储在计算机内、有组织的、统一管理的、可共享的相关数据的集合**

### 1、数据管理的特点

- 采用数据模型组织数据
- 数据面相整个应用领域
- 数据由DBMS统一管理和控制
- 数据具有独立性

### 2、数据库管理系统DBMS

- 数据库的定义
- 数据操纵
- 数据的组织存储和管理
- 数据库的事务管理和运行管理（控制功能）
- 数据库的维护

### 3、数据库系统

>用户
>
>>应用程序
>>>应用开发工具
>>>>
>>>>DBMS
>>>>>操作系统OS
>>>>>>数据库

### 4、数据库管理员DBS

***

## 三、数据库系统结构

### 1、三级体系结构

| ANSI/SPARC体系结构的层次 | DBTG报告中的体系结构层次的层次 | 对应的抽象视图       | 用数据定义语言描述后的模式 |
| ------------------------ | ------------------------------ | -------------------- | -------------------------- |
| 外部级                   | 视图层                         | 用户视图             | 外模式（子模式）           |
| 概念级                   | 逻辑层                         | 全局视图（概念视图） | 概念模式（逻辑模式）       |
| 内部级                   | 物理层                         | 存储视图             | 内模式（存储模式）         |

### 2、实例和模式

实例：一个特定时刻数据库的即时数据

模式：

- 概念模式：**概念级**数据视图的描述，也称作逻辑模式，是数据库中全体数据的逻辑结构和特征的描述
- 外模式：数据库用户能看见和使用的局部数据的逻辑结构和特征的描述
- 内模式：数据库**物理存储结构和存储方式**的描述

概念模式与内模式可视为**设计与实现**的关系

注意：

- 概念模式独立于其他，设计数据库模式结构时应首先明确
- 内模式独立于外模式，独立于具体的存储设备但是依赖于概念模式
- 外模式定义在概念模式之上，独立于内模式和存储设备，面向具体的应用程序

***

## 四、数据的独立性

数据结构是数据对象在计算机中的组织方式，物理结构是数据在物理存储空间的存储方式

数据独立性是指用户的应用程序与其所处理的数据是相互独立的，当数据的逻辑结构或者物理结构变化时，应用程序保持不变
是在数据库系统中的某个层次修改模式而无需修改上一层模式的能力

- 物理独立性：修改内模式而无需修改概念模式
- 逻辑独立性：修改概念模式而无需修改外模式

***

## 五、数据模型

现实世界—>概念模型—>数据模型



### 1、概念模型

可用ER图（实体entity 联系）来描述，方框表示实体，菱形表示联系，无向边表明联系的类型（一对一、一对多、多对多）

**实体** 客观存在并且可以相互区别的实物
**实体型entity type** 用属性名来抽象和刻画同类实体 
**实体集entity set** 同型实体的集合
**属性attribute** 实体所具有的某一类特性 

>简单属性（原子属性）&复合属性
>存储属性（基本属性）&派生属性（导出属性）
>**域domain** ：属性的取值范围

**关键字key** 能**唯一**标识属性的**最小**属性集
每一个实体一定有关键字

**联系**

>实体集内、实体间的联系
>一元、多元联系
>
>两个实体集间的二元联系：
>
>- 1:1 对A中每一实体，B中至多有一个实体与之联系，反之亦然
>- 1:n 对A中每一实体，B中有n(n>=0)个实体与之联系,对B中实体则A中至多有1个实体与之联系
>- n:n
>
>**IS-A联系**对实体集A的一个子集，可以构造一个新的实体B，实体类型A成为超类，B成为子类
>B可以继承A的所有属性和与A相关的联系，同时有自己特有的属性（在ER图中用三角形）
>例如：type学生 type研究生
>
>**联系的属性** 联系本身也是一种实体型，也可以有属性

### 2、数据模型的组成要素

- 数据结构：

	> 描述数据库的组成对象以及对象之间的联系，反映的是数据静态特性

- 数据操作
	>对数据库中各种对象的实例允许执行的操作的集合，反映的是系统数据的动态变化
	>主要有**查询**和**更新**（插入删除修改）两大类

- 完整性约束
	>制约和依存限制，保证数据的正确，有效，相容

### 3、数据模型的演变

- 层次模型
	>基于树的结构
	>只能表示 1：n 的关系

- 网状模型
	>描述多对多
	>数据结构复杂，编程难度高

- **关系模型**
	**每个关系的数据结构都是一张规范的二维表**

- 半结构化模型
	>类似树，是节点的的集合，每个节点都从根节点可达

- 面向对象数据模型

### 4、关系模型概述

关系：满足一定语义的 D1 x D2 x … x D n的子集叫做在域D1、D2……上的关系

- 在关系模型中只有单一的数据结构——关系
- 关系既可以用来表示概念模型中的实体，也可以表示实体之间的各种联系

| 概念模型     | 关系模型     |
| ------------ | ------------ |
| 实体         | 关系         |
| 实体型       | 关系模式     |
| 实体集       | 关系实例     |
| 属性         | 属性         |
| 域           | 域           |
| 关键字（码） | 候选键（码） |

关系**R(U,D,Dom,F)**

R:关系名
U:组成该关系的属性集合 
D:属性组U中属性来自的域（**域都是原子数据的集合(表中不能再有表)——第一范式条件**）
Dom:属性向域的映像的集合（属性的类型和长度）
F:属性间数据的依赖关系（关系的属性之间的约束关系）



简化版**R(A1,A2,A3…An)**

关系R的实例 r(R) 动态

- 一个给定关系某一时刻的元组 的集合，即为当前关系的值

### 5、关系数据库

>应用领域中所有实体及实体之间联系所形成的关系的集合

| 集合的关系             | 关系模型中的关系                               |
| ---------------------- | ---------------------------------------------- |
| 关系可以是一个无限集合 | 关系必须是有限集合                             |
| 关系中每个元组是“序组” | 为关系的每个属性添加一个属性名取消分量的有序性 |

### 6、候选键和外键

#### 候选键

- 关系中能够**唯一**标识一个元组的**最小**属性集
- 若一个关系有多个候选键，选择其一位**主键**
- 包含候选键的属性集成为**超键**
- 若关系只有一个候选键，并且其包含了关系的所有属性，称之为**全键**
- 构成候选键的每个属性成为**主属性**

#### 外键

- 关系R的一个属性集F 与关系S的主键Ks对应
	即 关系R中的元组在F上的取值与关系S中元组的Ks上的值对应，则称该属性集F为关系R的外键
- R 参照关系（引用关系）
- S 被参照关系（目标关系）

>注意：
>外键与对应的主键必须定义在相同的值域上，即属性值的数据类型要完全一致



### 7、关系模型的完整性约束

#### 实体完整性规则

- 若属性A是关系R的主属性，则属性A的值不能为NULL



#### 参照完整性规则

- 若F是关系R的外键（对应S中的主键Ks）则其取值为：
	1.NULL
	2.S中某个元组的Ks值
- 实质是不允许引用不存在的实体



#### 用户定义完整性

- 针对某一具体关系数据库的约束条件，反映某一具体应用所涉及的数据必须满足的语义要求（如学生成绩数据库限制分数范围）





## 六、关系代数

**相容关系**：定义在一组相同域上的不同关系

>两个关系有相同的目，且相应的属性取值来自同一个域



#### 并

对于相容的关系R和S，并运算的结果是一个与之相容的关系，且其元组由属于R或S的元组组成

#### 差

相容关系R-S，R去掉R与S都有的的元组

#### 交

相容关系R和S都有的元组



#### 投影运算

>投影运算是一元的、对属性进行操作的与暖啊
>从关系中选择若干年属性列形成一个新的关系

π



#### 选择运算

>**一元的、对元组进行操作**的运算
>在关系中选择满足条件F的元组

δ



#### 乘积运算（广义笛卡尔积）

m目k1个元组的关系R与n目k2个元祖的关系S的笛卡尔积是一个m+n目，k1k2个元组的关系

若R、S有同名的属性A ，需要用R.A S.A区分

将两个关系进行笛卡尔积操作后有些元组是没有实际语义的，需要选择操作



#### 连接运算

Θ-连接运算从两个关系的笛卡尔积中选取属性之间满足一定条件的元组

- 当Θ为“=”时候，Θ-连接运算成为等值连接

- 自然连接是一种特殊的等值连接（去掉相同属性列）

- 外连接：在自然连接的结果上保留因在公共属性上没有相同属性值而被舍弃的元组(悬浮元祖)，并且在这些元组新增加的属性赋空值
	>左外连接：只保留运算符左边关系中的悬浮元祖
	>右外连接：只保留运算符右边关系中的悬浮元祖

- 重命名 ρ s

---

## 七、SQL语言

###  1、SQL概述

- structured query language
- 







